webpackJsonp([1],{"+5Q6":function(t,e){},"+CS4":function(t,e){},"+YkN":function(t,e){},"+xc3":function(t,e,n){"use strict";var i=n("eHPN");t.exports={HTTP_CLIENT:i.HTTP_CLIENT,IS_ELECTRON:i.IS_ELECTRON,IS_PRODUCTION:i.IS_PRODUCTION,IS_PRIVATE_SERVER:i.IS_PRIVATE_SERVER,PRIVATE_SERVER_UID:i.PRIVATE_SERVER_UID,IS_DAXUEZHANG:i.IS_DAXUEZHANG,IS_IP:i.IS_IP,HTTP_PREFIX:i.HTTP_PREFIX,SHOW_STATISTIC:i.SHOW_STATISTIC,SHOW_SUPPORT:i.SHOW_SUPPORT,SHOW_FEEDBACK:i.SHOW_FEEDBACK,ADMIN_URL:i.ADMIN_URL,LOGIN_URL:i.LOGIN_URL,CHAT_BASE_URL:i.CHAT_BASE_URL,ADMIN_BASE_URL:i.ADMIN_BASE_URL,HOME_URL:i.HOME_URL,HELP_URL:i.HELP_URL,HELP_BASE_URL:i.HELP_BASE_URL,SOCKJS_WEBSOCKET_ENDPOINT:i.SOCKJS_WEBSOCKET_ENDPOINT,WECHAT_OPEN_PLATFORM_REDIRECT_URI:i.WECHAT_OPEN_PLATFORM_REDIRECT_URI,PRIVATE_SERVER_VALIDATE_URL:i.PRIVATE_SERVER_VALIDATE_URL,AXIOS_DEFAULT_BASEURL:i.AXIOS_DEFAULT_BASEURL,SHOW_IM:i.SHOW_IM,UPLOAD_AVATAR_URL:i.UPLOAD_AVATAR_URL,UPLOAD_IMAGE_URL:i.UPLOAD_IMAGE_URL,UPLOAD_FILE_URL:i.UPLOAD_FILE_URL,UPLOAD_LAYIM_IMAGE_URL:i.UPLOAD_LAYIM_IMAGE_URL,UPLOAD_LAYIM_FILE_URL:i.UPLOAD_LAYIM_FILE_URL,UPLOAD_WECHAT_IMAGE_URL:i.UPLOAD_WECHAT_IMAGE_URL,UPLOAD_WECHAT_VOICE_URL:i.UPLOAD_WECHAT_VOICE_URL,UPLOAD_WECHAT_VIDEO_URL:i.UPLOAD_WECHAT_VIDEO_URL,UPLOAD_WECHAT_THUMB_URL:i.UPLOAD_WECHAT_THUMB_URL,DEFAULT_TITLE:"萝卜丝",LEFT_SIDEBAR_WIDTH:"65px",STOMP_CONNECTION_STATUS_CONNECTING:"connecting",STOMP_CONNECTION_STATUS_CONNECTED:"connected",STOMP_CONNECTION_STATUS_DISCONNECTED:"disconnncted",DOWNLOAD_URL:"https://www.bytedesk.com/download",CHAT_URL:"https://vip.bytedesk.com/chatvue?uid=201808221551193&wid=201807171659201&type=workGroup&aid=&ph=ph",ICON_URL:"https://cdn.bytedesk.com/assets/icon/64.png",VOICE_PLAYER_BASE_URL:"https://wuxieyun.com/opencore-amr-js/js/index.php?url=",SOUND_DINGDONG_URL:"https://cdn.bytedesk.com/assets/sound/dingdong.wav",EMOJI_BASE_URL:"https://chainsnow.oss-cn-shenzhen.aliyuncs.com/emojis/gif/",CONNECTING_IMAGE:"https://bytedesk.oss-cn-shenzhen.aliyuncs.com/util/connecting.gif",CONNCTED_IMAGE:"https://bytedesk.oss-cn-shenzhen.aliyuncs.com/util/connected.png",DISCONNECTED_IMAGE:"https://bytedesk.oss-cn-shenzhen.aliyuncs.com/util/disconnected.png",DEFAULT_AVATAR:"https://chainsnow.oss-cn-shenzhen.aliyuncs.com/avatars/agent_default_avatar.png",DEFAULT_WORKGROUP_AVATAR:"https://chainsnow.oss-cn-shenzhen.aliyuncs.com/avatars/workgroup_default_avatar.png",DEFAULT_WEB_AVATAR_URL:"https://chainsnow.oss-cn-shenzhen.aliyuncs.com/avatars/chrome_default_avatar.png",DEFAULT_ANDROID_AVATAR_URL:"https://chainsnow.oss-cn-shenzhen.aliyuncs.com/avatars/android_default_avatar.png",DEFAULT_IOS_AVATAR_URL:"https://chainsnow.oss-cn-shenzhen.aliyuncs.com/avatars/apple_default_avatar.png",WECHAT_MINI_REDIS_CHANNEL:"wechat_mini_redis_message",WECHAT_MINI_QUEUE_CHANNEL:"wechat_mini_queue",WECHAT_MINI_MESSAGE_CHANNEL:"wechat_mini_message",WECHAT_MP_REDIS_CHANNEL:"wechat_mp_redis_message",WECHAT_MP_QUEUE_CHANNEL:"wechat_mp_queue",WECHAT_MP_MESSAGE_CHANNEL:"wechat_mp_message",MESSAGE_TYPE_TEXT:"text",MESSAGE_TYPE_IMAGE:"image",MESSAGE_TYPE_FILE:"file",MESSAGE_TYPE_VOICE:"voice",MESSAGE_TYPE_VIDEO:"video",MESSAGE_TYPE_CUSTOM:"custom",MESSAGE_TYPE_SHORT_VIDEO:"shortvideo",MESSAGE_TYPE_LOCATION:"location",MESSAGE_TYPE_LINK:"link",MESSAGE_TYPE_EVENT:"event",MESSAGE_TYPE_ROBOT:"robot",MESSAGE_TYPE_QUESTIONNAIRE:"questionnaire",MESSAGE_TYPE_COMPANY:"company",MESSAGE_TYPE_WORK_GROUP:"workGroup",MESSAGE_TYPE_NOTIFICATION:"notification",MESSAGE_TYPE_NOTIFICATION_NON_WORKING_TIME:"notification_non_working_time",MESSAGE_TYPE_NOTIFICATION_OFFLINE:"notification_offline",MESSAGE_TYPE_NOTIFICATION_BROWSE_START:"notification_browse_start",MESSAGE_TYPE_NOTIFICATION_BROWSE_END:"notification_browse_end",MESSAGE_TYPE_NOTIFICATION_BROWSE_INVITE:"notification_browse_invite",MESSAGE_TYPE_NOTIFICATION_BROWSE_INVITE_ACCEPT:"notification_browse_invite_accept",MESSAGE_TYPE_NOTIFICATION_BROWSE_INVITE_REJECT:"notification_browse_invite_reject",MESSAGE_TYPE_NOTIFICATION_THREAD:"notification_thread",MESSAGE_TYPE_NOTIFICATION_THREAD_REENTRY:"notification_thread_reentry",MESSAGE_TYPE_NOTIFICATION_QUEUE:"notification_queue",MESSAGE_TYPE_NOTIFICATION_QUEUE_LEAVE:"notification_queue_leave",MESSAGE_TYPE_NOTIFICATION_QUEUE_ACCEPT:"notification_queue_accept",MESSAGE_TYPE_NOTIFICATION_ACCEPT_AUTO:"notification_accept_auto",MESSAGE_TYPE_NOTIFICATION_ACCEPT_MANUAL:"notification_accept_manual",MESSAGE_TYPE_NOTIFICATION_CONNECT:"notification_connect",MESSAGE_TYPE_NOTIFICATION_DISCONNECT:"notification_disconnect",MESSAGE_TYPE_NOTIFICATION_LEAVE:"notification_leave",MESSAGE_TYPE_NOTIFICATION_AGENT_CLOSE:"notification_agent_close",MESSAGE_TYPE_NOTIFICATION_VISITOR_CLOSE:"notification_visitor_close",MESSAGE_TYPE_NOTIFICATION_AUTO_CLOSE:"notification_auto_close",MESSAGE_TYPE_NOTIFICATION_INVITE_RATE:"notification_invite_rate",MESSAGE_TYPE_NOTIFICATION_RATE_RESULT:"notification_rate_result",MESSAGE_TYPE_NOTIFICATION_INVITE:"notification_invite",MESSAGE_TYPE_NOTIFICATION_INVITE_ACCEPT:"notification_invite_accept",MESSAGE_TYPE_NOTIFICATION_INVITE_REJECT:"notification_invite_reject",MESSAGE_TYPE_NOTIFICATION_TRANSFER:"notification_transfer",MESSAGE_TYPE_NOTIFICATION_TRANSFER_ACCEPT:"notification_transfer_accept",MESSAGE_TYPE_NOTIFICATION_TRANSFER_REJECT:"notification_transfer_reject",MESSAGE_TYPE_NOTIFICATION_RATE_REQUEST:"notification_rate_request",MESSAGE_TYPE_NOTIFICATION_RATE:"notification_rate",MESSAGE_TYPE_NOTIFICATION_CONNECTION_STATUS:"notification_connection_status",MESSAGE_TYPE_NOTIFICATION_ACCEPT_STATUS:"notification_accept_status",MESSAGE_TYPE_NOTIFICATION_PREVIEW:"notification_preview",MESSAGE_TYPE_NOTIFICATION_RECEIPT:"notification_receipt",MESSAGE_TYPE_NOTIFICATION_KICKOFF:"notification_kickoff",MESSAGE_TYPE_NOTIFICATION_WEBRTC_INVITE:"notification_webrtc_invite",MESSAGE_TYPE_NOTIFICATION_WEBRTC_CANCEL:"notification_webrtc_cancel",MESSAGE_TYPE_NOTIFICATION_WEBRTC_OFFER_VIDEO:"notification_webrtc_offer_video",MESSAGE_TYPE_NOTIFICATION_WEBRTC_OFFER_AUDIO:"notification_webrtc_offer_audio",MESSAGE_TYPE_NOTIFICATION_WEBRTC_ANSWER:"notification_webrtc_answer",MESSAGE_TYPE_NOTIFICATION_WEBRTC_CANDIDATE:"notification_webrtc_candidate",MESSAGE_TYPE_NOTIFICATION_WEBRTC_ACCEPT:"notification_webrtc_accept",MESSAGE_TYPE_NOTIFICATION_WEBRTC_REJECT:"notification_webrtc_reject",MESSAGE_TYPE_NOTIFICATION_WEBRTC_READY:"notification_webrtc_ready",MESSAGE_TYPE_NOTIFICATION_WEBRTC_BUSY:"notification_webrtc_busy",MESSAGE_TYPE_NOTIFICATION_WEBRTC_CLOSE:"notification_webrtc_close",MESSAGE_TYPE_NOTIFICATION_GROUP_CREATE:"notification_group_create",MESSAGE_TYPE_NOTIFICATION_GROUP_UPDATE:"notification_group_update",MESSAGE_TYPE_NOTIFICATION_GROUP_ANNOUNCEMENT:"notification_group_announcement",MESSAGE_TYPE_NOTIFICATION_GROUP_INVITE:"notification_group_invite",MESSAGE_TYPE_NOTIFICATION_GROUP_INVITE_ACCEPT:"notification_group_invite_accept",MESSAGE_TYPE_NOTIFICATION_GROUP_INVITE_REJECT:"notification_group_invite_reject",MESSAGE_TYPE_NOTIFICATION_GROUP_JOIN:"notification_group_join",MESSAGE_TYPE_NOTIFICATION_GROUP_APPLY:"notification_group_apply",MESSAGE_TYPE_NOTIFICATION_GROUP_APPLY_APPROVE:"notification_group_apply_approve",MESSAGE_TYPE_NOTIFICATION_GROUP_APPLY_DENY:"notification_group_apply_deny",MESSAGE_TYPE_NOTIFICATION_GROUP_KICK:"notification_group_kick",MESSAGE_TYPE_NOTIFICATION_GROUP_MUTE:"notification_group_mute",MESSAGE_TYPE_NOTIFICATION_GROUP_TRANSFER:"notification_group_transfer",MESSAGE_TYPE_NOTIFICATION_GROUP_TRANSFER_ACCEPT:"notification_group_transfer_accept",MESSAGE_TYPE_NOTIFICATION_GROUP_TRANSFER_REJECT:"notification_group_transfer_reject",MESSAGE_TYPE_NOTIFICATION_GROUP_WITHDRAW:"notification_group_withdraw",MESSAGE_TYPE_NOTIFICATION_GROUP_DISMISS:"notification_group_dismiss",THREAD_TYPE_THREAD:"thread",THREAD_TYPE_APPOINTED:"appointed",THREAD_TYPE_CONTACT:"contact",THREAD_TYPE_GROUP:"group",MESSAGE_SESSION_TYPE_THREAD:"thread",MESSAGE_SESSION_TYPE_CONTACT:"contact",MESSAGE_SESSION_TYPE_GROUP:"group",CLIENT_WEB:"web",CLIENT_WAP:"wap",CLIENT_WEIXIN:"weixin",CLIENT_FLOAT:"float",CLIENT_ANDROID:"android",CLIENT_IOS:"ios",CLIENT_WECHAT_MP:"wechat_mp",CLIENT_WECHAT_URL:"wechat_url",CLIENT_WECHAT_MINI:"wechat_mini",CLIENT_WINDOW_ADMIN:"window_admin",CLIENT_MAC_ADMIN:"mac_admin",CLIENT_ANDROID_ADMIN:"android_admin",CLIENT_IOS_ADMIN:"ios_admin",CLIENT_WEB_ADMIN:"web_admin",CLIENT_WECHAT_MINI_ADMIN:"wechat_mini_admin",MESSAGE_STATUS_SENDING:"sending",MESSAGE_STATUS_RECEIVED:"received",MESSAGE_STATUS_READ:"read",MESSAGE_STATUS_STORED:"stored",MESSAGE_STATUS_ERROR:"error",USER_STATUS_CONNECTED:"connected",USER_STATUS_DISCONNECTED:"disconnected",USER_STATUS_ONLINE:"online",USER_STATUS_OFFLINE:"offline",USER_STATUS_BUSY:"busy",USER_STATUS_AWAY:"away",USER_STATUS_LOGOUT:"logout",USER_STATUS_LOGIN:"login",USER_STATUS_LEAVE:"leave",USER_STATUS_AFTER:"after",USER_STATUS_EAT:"eat",USER_STATUS_REST:"rest",ROLE_SUPER:"ROLE_SUPER",ROLE_ADMIN:"ROLE_ADMIN",ROLE_VIP:"ROLE_VIP",ROLE_TRY:"ROLE_TRY",ROLE_PROXY:"ROLE_PROXY",ROLE_FREE:"ROLE_FREE",ROLE_VISITOR:"ROLE_VISITOR",ROLE_MEMBER:"ROLE_MEMBER",ROLE_ROBOT:"ROLE_ROBOT",ROLE_WORKGROUP_ADMIN:"ROLE_WORKGROUP_ADMIN",ROLE_WORKGROUP_AGENT:"ROLE_WORKGROUP_AGENT",ROLE_WORKGROUP_CHECKER:"ROLE_WORKGROUP_CHECKER",AUTO_REPLY_NO:"无自动回复",AUTO_REPLY_EAT:"外出就餐，请稍后",AUTO_REPLY_LEAVE:"不在电脑旁，请稍后",AUTO_REPLY_BACK:"马上回来",AUTO_REPLY_PHONE:"接听电话中",AUTO_REPLY_SELF:"自定义",AUTHORITY_HOME:"home",AUTHORITY_STATISTIC:"statistic",AUTHORITY_CHAT:"chat",AUTHORITY_THREAD:"thread",AUTHORITY_VISITOR:"visitor",AUTHORITY_HISTORY:"history",AUTHORITY_MONITOR:"monitor",AUTHORITY_QUALITY:"quality",AUTHORITY_ADMIN:"admin",AUTHORITY_ROBOT:"robot",AUTHORITY_SUPPORT:"support",AUTHORITY_SETTING:"setting",AUTHORITY_FEEDBACK:"feedback",AUTHORITY_WORKORDER:"workorder",AUTHORITY_CALLCENTER:"callcenter",AUTHORITY_CRM:"crm",AUTHORITY_WENJUAN:"wenjuan",AUTHORITY_INTERNAL:"internal",USERNAME_NOTIFICATION:"bytedesk_notification",CUW_TYPE_COMPANY:"company",CUW_TYPE_MINE:"mine",CATEGORY_TYPE_ROBOT:"robot",CATEGORY_TYPE_SUPPORT:"support",CATEGORY_TYPE_CUW_MINE:"cuw_mine",CATEGORY_TYPE_CUW_COMPANY:"cuw_company",CATEGORY_TYPE_CUW_PLATFORM:"cuw_platform",QUESTIONNAIRE_ITEM_TYPE_RADIO:"radio",QUESTIONNAIRE_ITEM_TYPE_CHECKBOX:"checkbox",QUESTIONNAIRE_ITEM_TYPE_INPUT:"input",QUESTIONNAIRE_ITEM_TYPE_TEXTAREA:"textarea",EVENT_BUS_MESSAGE_HISTORY:"EVENT_BUS_MESSAGE_HISTORY",EVENT_BUS_SELECT_CUW:"EVENT_BUS_SELECT_CUW",EVENT_BUS_SELECT_THREAD:"EVENT_BUS_SELECT_THREAD",EVENT_BUS_NOTIFICATION_SUCCESS:"EVENT_BUS_NOTIFICATION_SUCCESS",EVENT_BUS_NOTIFICATION_WARNING:"EVENT_BUS_NOTIFICATION_WARNING",EVENT_BUS_NOTIFICATION_INFO:"EVENT_BUS_NOTIFICATION_INFO",EVENT_BUS_NOTIFICATION_ERROR:"EVENT_BUS_NOTIFICATION_ERROR",EVENT_BUS_NOTIFICATION_CONTACT_MESSAGE:"EVENT_BUS_NOTIFICATION_CONTACT_MESSAGE",EVENT_BUS_NOTIFICATION_GROUP_MESSAGE:"EVENT_BUS_NOTIFICATION_GROUP_MESSAGE",EVENT_BUS_NOTIFICATION_INVITE:"EVENT_BUS_NOTIFICATION_INVITE",EVENT_BUS_NOTIFICATION_BROWSE_START:"EVENT_BUS_NOTIFICATION_BROWSE_START",EVENT_BUS_NOTIFICATION_BROWSE_END:"EVENT_BUS_NOTIFICATION_BROWSE_END",EVENT_BUS_NOTIFICATION_INVITE_ACCEPT:"EVENT_BUS_NOTIFICATION_INVITE_ACCEPT",EVENT_BUS_NOTIFICATION_INVITE_REJECT:"EVENT_BUS_NOTIFICATION_INVITE_REJECT",EVENT_BUS_NOTIFICATION_TRANSFER:"EVENT_BUS_NOTIFICATION_TRANSFER",EVENT_BUS_NOTIFICATION_TRANSFER_ACCEPT:"EVENT_BUS_NOTIFICATION_TRANSFER_ACCEPT",EVENT_BUS_NOTIFICATION_TRANSFER_REJECT:"EVENT_BUS_NOTIFICATION_TRANSFER_REJECT",EVENT_BUS_MESSAGE_SCROLL_TO_BOTTOM:"EVENT_BUS_MESSAGE_SCROLL_TO_BOTTOM",EVENT_BUS_LOGIN_TIMEOUT:"EVENT_BUS_LOGIN_TIMEOUT",EVENT_BUS_LOGIN_ERROR_400:"EVENT_BUS_LOGIN_ERROR_400",EVENT_BUS_SERVER_ERROR_500:"EVENT_BUS_SERVER_ERROR_500",EVENT_BUS_SUPPORT_NEW_ARTICLE:"EVENT_BUS_SUPPORT_NEW_ARTICLE",EVENT_BUS_SUPPORT_NEW_ARTICLE_SUCCESS:"EVENT_BUS_SUPPORT_NEW_ARTICLE_SUCCESS",EVENT_BUS_SUPPORT_NEW_ARTICLE_ERROR:"EVENT_BUS_SUPPORT_NEW_ARTICLE_ERROR",EVENT_BUS_SUPPORT_EDIT_ARTICLE:"EVENT_BUS_SUPPORT_EDIT_ARTICLE",EVENT_BUS_SUPPORT_UPDATE_ARTICLE_SUCCESS:"EVENT_BUS_SUPPORT_UPDATE_ARTICLE_SUCCESS",EVENT_BUS_SUPPORT_UPDATE_ARTICLE_ERROR:"EVENT_BUS_SUPPORT_UPDATE_ARTICLE_ERROR",EVENT_BUS_SUPPORT_NEW_TICKET:"EVENT_BUS_SUPPORT_NEW_TICKET",EVENT_BUS_SUPPORT_NEW_TICKET_SUCCESS:"EVENT_BUS_SUPPORT_NEW_TICKET_SUCCESS",EVENT_BUS_SUPPORT_NEW_TICKET_ERROR:"EVENT_BUS_SUPPORT_NEW_TICKET_ERROR",EVENT_BUS_SUPPORT_EDIT_TICKET:"EVENT_BUS_SUPPORT_EDIT_TICKET",EVENT_BUS_SUPPORT_UPDATE_TICKET_SUCCESS:"EVENT_BUS_SUPPORT_UPDATE_TICKET_SUCCESS",EVENT_BUS_SUPPORT_UPDATE_TICKET_ERROR:"EVENT_BUS_SUPPORT_UPDATE_TICKET_ERROR",EVENT_BUS_STATISTIC_DETAIL:"EVENT_BUS_STATISTIC_DETAIL",EVENT_BUS_AGENT_CODE:"EVENT_BUS_AGENT_CODE",EVENT_BUS_WORKGROUP_CODE:"EVENT_BUS_WORKGROUP_CODE",EVENT_BUS_MP_ADMIN:"EVENT_BUS_MP_ADMIN",EVENT_BUS_CONTACT_LOAD_FINISHED:"EVENT_BUS_CONTACT_LOAD_FINISHED",EVENT_BUS_AGENT_LOAD_FINISHED:"EVENT_BUS_AGENT_LOAD_FINISHED",EVENT_BUS_WORKGROUP_LOAD_FINISHIED:"EVENT_BUS_WORKGROUP_LOAD_FINISHIED",EVENT_BUS_COMPANY_LOAD_FINISHED:"EVENT_BUS_COMPANY_LOAD_FINISHED",EVENT_BUS_GROUP_ADDED:"EVENT_BUS_GROUP_ADDED",EVENT_BUS_NEW_QUESTIONNAIRE:"EVENT_BUS_NEW_QUESTIONNAIRE",EVENT_BUS_MESSAGE_PREVIEW:"EVENT_BUS_MESSAGE_PREVIEW",EVENT_BUS_MESSAGE_RECEIPT:"EVENT_BUS_MESSAGE_RECEIPT",EVENT_BUS_MESSAGE_WEBRTC_INVITE:"EVENT_BUS_MESSAGE_WEBRTC_INVITE",EVENT_BUS_MESSAGE_WEBRTC_CANCEL:"EVENT_BUS_MESSAGE_WEBRTC_CANCEL",EVENT_BUS_MESSAGE_WEBRTC_OFFER_VIDEO:"EVENT_BUS_MESSAGE_WEBRTC_OFFER_VIDEO",EVENT_BUS_MESSAGE_WEBRTC_OFFER_AUDIO:"EVENT_BUS_MESSAGE_WEBRTC_OFFER_AUDIO",EVENT_BUS_MESSAGE_WEBRTC_ANSWER:"EVENT_BUS_MESSAGE_WEBRTC_ANSWER",EVENT_BUS_MESSAGE_WEBRTC_CANDIDATE:"EVENT_BUS_MESSAGE_WEBRTC_CANDIDATE",EVENT_BUS_MESSAGE_WEBRTC_ACCEPT:"EVENT_BUS_MESSAGE_WEBRTC_ACCEPT",EVENT_BUS_MESSAGE_WEBRTC_REJECT:"EVENT_BUS_MESSAGE_WEBRTC_REJECT",EVENT_BUS_MESSAGE_WEBRTC_READY:"EVENT_BUS_MESSAGE_WEBRTC_READY",EVENT_BUS_MESSAGE_WEBRTC_BUSY:"EVENT_BUS_MESSAGE_WEBRTC_BUSY",EVENT_BUS_MESSAGE_WEBRTC_CLOSE:"EVENT_BUS_MESSAGE_WEBRTC_CLOSE",EVENT_BUS_STOMP_CONNECTION_STATUS:"EVENT_BUS_STOMP_CONNECTION_STATUS",EVENT_BUS_LOGOUT:"EVENT_BUS_LOGOUT"}},"/Qwz":function(t,e){},"/r6s":function(t,e){},"0Tiy":function(t,e){},"0W+d":function(t,e){},"0vYT":function(t,e){},"18pi":function(t,e){},"1EI/":function(t,e){},"1Psd":function(t,e){},"1Zfq":function(t,e){},"38LJ":function(t,e){},"3o+Q":function(t,e){},"4U/p":function(t,e){},"4qOc":function(t,e){},"4rAd":function(t,e){},"5Cqg":function(t,e){},"6aEi":function(t,e){},"7xeX":function(t,e){},"7yZk":function(t,e){},"8X5D":function(t,e){},"8YsT":function(t,e){},"8xrX":function(t,e){},"9Cmc":function(t,e){},"9Fyy":function(t,e){},"9Pwd":function(t,e){},A5R5:function(t,e){},AHVL:function(t,e){},"B+oi":function(t,e){},B2l1:function(t,e){},BcgP:function(t,e){},"Bh/j":function(t,e){},Bmmi:function(t,e){},Bnup:function(t,e){},CIRa:function(t,e){},DNK6:function(t,e){},DxrB:function(t,e){},Dzck:function(t,e){},EA9o:function(t,e){},F1Wm:function(t,e){},F34l:function(t,e){},GPBx:function(t,e){},"Hh+g":function(t,e){},IKDF:function(t,e){},IXGT:function(t,e){},JYyo:function(t,e){},Jdc4:function(t,e){},JjVa:function(t,e){},Jwgl:function(t,e){},LaxM:function(t,e){},LtOi:function(t,e){},MwHW:function(t,e){},N9Mm:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};n.d(i,"connected",function(){return d}),n.d(i,"accessToken",function(){return p}),n.d(i,"userInfo",function(){return m}),n.d(i,"status",function(){return f}),n.d(i,"userThreads",function(){return _}),n.d(i,"userChattingThreads",function(){return h}),n.d(i,"userClosedThreads",function(){return g}),n.d(i,"userCurrentChatType",function(){return v}),n.d(i,"userCurrentThread",function(){return E}),n.d(i,"userQueues",function(){return T}),n.d(i,"userCurrentContact",function(){return b}),n.d(i,"userCurrentGroup",function(){return S}),n.d(i,"userBrowses",function(){return C}),n.d(i,"messages",function(){return y}),n.d(i,"statistic",function(){return I}),n.d(i,"statisticThreads",function(){return w}),n.d(i,"statisticRates",function(){return A}),n.d(i,"totalThreadCounts",function(){return k}),n.d(i,"totalQueueCounts",function(){return R}),n.d(i,"historyThreads",function(){return N}),n.d(i,"rates",function(){return O}),n.d(i,"historyMessages",function(){return x}),n.d(i,"leaveMessages",function(){return U}),n.d(i,"statuses",function(){return P}),n.d(i,"queues",function(){return D}),n.d(i,"browses",function(){return M}),n.d(i,"monitors",function(){return V}),n.d(i,"qualities",function(){return G}),n.d(i,"agents",function(){return L}),n.d(i,"onlineAgents",function(){return B}),n.d(i,"workGroups",function(){return z}),n.d(i,"filterWorkGroups",function(){return F}),n.d(i,"filterWorkGroupMembers",function(){return $}),n.d(i,"companies",function(){return W}),n.d(i,"regions",function(){return H}),n.d(i,"provinceCities",function(){return Y}),n.d(i,"allCuws",function(){return j}),n.d(i,"companyCuwCategories",function(){return q}),n.d(i,"currentCompanyCuwCategoryId",function(){return Q}),n.d(i,"companyCuws",function(){return K}),n.d(i,"fingerPrints",function(){return X}),n.d(i,"userTags",function(){return J}),n.d(i,"robotCategories",function(){return Z}),n.d(i,"robotAnswers",function(){return tt}),n.d(i,"robotSynonyms",function(){return et}),n.d(i,"taboos",function(){return nt}),n.d(i,"supportCategories",function(){return it}),n.d(i,"supportArticles",function(){return ot}),n.d(i,"supportComments",function(){return at}),n.d(i,"roles",function(){return rt}),n.d(i,"webs",function(){return st}),n.d(i,"apps",function(){return lt}),n.d(i,"mps",function(){return ct}),n.d(i,"minis",function(){return ut}),n.d(i,"connectionStatus",function(){return dt}),n.d(i,"showAuthority",function(){return pt}),n.d(i,"mainHost",function(){return mt}),n.d(i,"contacts",function(){return ft}),n.d(i,"layimMine",function(){return _t}),n.d(i,"layimFriends",function(){return ht}),n.d(i,"layimGroups",function(){return gt});var o={};n.d(o,"updatePassportToken",function(){return kt}),n.d(o,"init",function(){return Rt}),n.d(o,"updateProfile",function(){return Nt}),n.d(o,"updateAutoReply",function(){return Ot}),n.d(o,"setAcceptStatus",function(){return xt}),n.d(o,"updateCurrentThread",function(){return Ut}),n.d(o,"updateChatType",function(){return Pt}),n.d(o,"getMessages",function(){return Dt}),n.d(o,"getHistoryMessages",function(){return Mt}),n.d(o,"filterMessage",function(){return Vt}),n.d(o,"getRates",function(){return Gt}),n.d(o,"filterRate",function(){return Lt}),n.d(o,"inviteRate",function(){return Bt}),n.d(o,"getLeaveMessages",function(){return zt}),n.d(o,"replyLeaveMessage",function(){return Ft}),n.d(o,"filterLeaveMessage",function(){return $t}),n.d(o,"getHistoryStatus",function(){return Wt}),n.d(o,"filterStatus",function(){return Ht}),n.d(o,"closeThread",function(){return Yt}),n.d(o,"getTags",function(){return jt}),n.d(o,"createTag",function(){return qt}),n.d(o,"deleteTag",function(){return Qt}),n.d(o,"transferAccept",function(){return Kt}),n.d(o,"transferAccepted",function(){return Xt}),n.d(o,"inviteAccept",function(){return Jt}),n.d(o,"getThread",function(){return Zt}),n.d(o,"getQueue",function(){return te}),n.d(o,"acceptQueue",function(){return ee}),n.d(o,"getBrowse",function(){return ne}),n.d(o,"getHistoryThread",function(){return ie}),n.d(o,"filterHistoryThread",function(){return oe}),n.d(o,"getMonitor",function(){return ae}),n.d(o,"getQuality",function(){return re}),n.d(o,"getCuws",function(){return se}),n.d(o,"getChildrenCuws",function(){return le}),n.d(o,"cuwCreate",function(){return ce}),n.d(o,"cuwUpdate",function(){return ue}),n.d(o,"cuwDelete",function(){return de}),n.d(o,"fingerPrint",function(){return pe}),n.d(o,"setNote",function(){return me}),n.d(o,"userTag",function(){return fe}),n.d(o,"getRoles",function(){return _e}),n.d(o,"getContacts",function(){return he}),n.d(o,"getAgents",function(){return ge}),n.d(o,"getWorkGroupMembers",function(){return ve}),n.d(o,"getOnlineAgents",function(){return Ee}),n.d(o,"filterAgents",function(){return Te}),n.d(o,"createAgent",function(){return be}),n.d(o,"updateAgent",function(){return Se}),n.d(o,"deleteAgent",function(){return Ce}),n.d(o,"getWorkGroups",function(){return ye}),n.d(o,"getAllWorkGroups",function(){return Ie}),n.d(o,"filterWorkGroups",function(){return we}),n.d(o,"createWorkgroup",function(){return Ae}),n.d(o,"updateWorkgroup",function(){return ke}),n.d(o,"deleteWorkgroup",function(){return Re}),n.d(o,"getWebs",function(){return Ne}),n.d(o,"createWeb",function(){return Oe}),n.d(o,"updateWeb",function(){return xe}),n.d(o,"deleteWeb",function(){return Ue}),n.d(o,"getApps",function(){return Pe}),n.d(o,"createApp",function(){return De}),n.d(o,"updateApp",function(){return Me}),n.d(o,"deleteApp",function(){return Ve}),n.d(o,"getMps",function(){return Ge}),n.d(o,"createMp",function(){return Le}),n.d(o,"updateMp",function(){return Be}),n.d(o,"deleteMp",function(){return ze}),n.d(o,"getMinis",function(){return Fe}),n.d(o,"createMini",function(){return $e}),n.d(o,"updateMini",function(){return We}),n.d(o,"deleteMini",function(){return He}),n.d(o,"getStatistics",function(){return Ye}),n.d(o,"getStatisticDetails",function(){return je}),n.d(o,"filterStatisticDetail",function(){return qe}),n.d(o,"getStatisticThread",function(){return Qe}),n.d(o,"getStatisticRate",function(){return Ke}),n.d(o,"getCategories",function(){return Xe}),n.d(o,"createCategory",function(){return Je}),n.d(o,"updateCategory",function(){return Ze}),n.d(o,"deleteCategory",function(){return tn}),n.d(o,"getRobotAnswers",function(){return en}),n.d(o,"createRobotAnswer",function(){return nn}),n.d(o,"updateRobotAnswer",function(){return on}),n.d(o,"deleteRobotAnswer",function(){return an}),n.d(o,"getRobotSynonyms",function(){return rn}),n.d(o,"createRobotSynonym",function(){return sn}),n.d(o,"updateRobotSynonym",function(){return ln}),n.d(o,"deleteRobotSynonym",function(){return cn}),n.d(o,"getTaboos",function(){return un}),n.d(o,"createTaboo",function(){return dn}),n.d(o,"updateTaboo",function(){return pn}),n.d(o,"deleteTaboo",function(){return mn}),n.d(o,"getSupportArticles",function(){return fn}),n.d(o,"createSupportArticle",function(){return _n}),n.d(o,"updateSupportArticle",function(){return hn}),n.d(o,"deleteSupportArticle",function(){return gn}),n.d(o,"applyTry",function(){return vn}),n.d(o,"filterCompanies",function(){return En}),n.d(o,"getRegions",function(){return Tn}),n.d(o,"getCompanies",function(){return bn}),n.d(o,"createCompany",function(){return Sn}),n.d(o,"updateCompany",function(){return Cn}),n.d(o,"deleteCompany",function(){return yn}),n.d(o,"getBlocks",function(){return In}),n.d(o,"addBlock",function(){return wn}),n.d(o,"removeBlock",function(){return An}),n.d(o,"getGroups",function(){return kn}),n.d(o,"getGroupMembers",function(){return Rn}),n.d(o,"createGroup",function(){return Nn}),n.d(o,"updateGroupNickname",function(){return On}),n.d(o,"updateGroupAnnouncement",function(){return xn}),n.d(o,"updateGroupDescription",function(){return Un}),n.d(o,"kickGroupMember",function(){return Pn}),n.d(o,"muteGroupMember",function(){return Dn}),n.d(o,"dismissGroup",function(){return Mn}),n.d(o,"filterGroup",function(){return Vn}),n.d(o,"clearToken",function(){return Gn}),n.d(o,"logout",function(){return Ln}),n.d(o,"changeCurrentMainView",function(){return Bn}),n.d(o,"stompConnect",function(){return zn}),n.d(o,"sendTextMessage",function(){return Fn}),n.d(o,"sendImageMessage",function(){return $n}),n.d(o,"sendFileMessage",function(){return Wn}),n.d(o,"sendOtherMessage",function(){return Hn}),n.d(o,"sendPreviewMessage",function(){return Yn}),n.d(o,"sendReceiptMessage",function(){return jn}),n.d(o,"sendIceCandidateMessage",function(){return qn}),n.d(o,"sendSessionDescriptionMessage",function(){return Qn}),n.d(o,"sendContactTextMessage",function(){return Kn}),n.d(o,"sendContactImageMessage",function(){return Xn}),n.d(o,"sendContactFileMessage",function(){return Jn}),n.d(o,"sendContactCustomMessage",function(){return Zn}),n.d(o,"sendGroupTextMessage",function(){return ti}),n.d(o,"sendGroupImageMessage",function(){return ei}),n.d(o,"sendGroupFileMessage",function(){return ni}),n.d(o,"sendGroupCustomMessage",function(){return ii}),n.d(o,"sendThreadTextMessageSync",function(){return oi}),n.d(o,"sendThreadImageMessageSync",function(){return ai}),n.d(o,"sendMessageSync",function(){return ri}),n.d(o,"subscribeTopic",function(){return si}),n.d(o,"unsubscribeTopic",function(){return li}),n.d(o,"subscribeQueue",function(){return ci}),n.d(o,"stompDisconnect",function(){return ui});n("ydiG");var a=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App",mounted:function(){}},r,!1,function(t){n("axo7")},null,null).exports,l=n("/ocq"),c=n("NYxO"),u=n("+xc3"),d=function(t){return!!localStorage.access_token||t.passport.token.access_token.length>0},p=function(t){return t.passport.token.access_token},m=function(t){return t.user.info},f=function(t){return t.user.info.acceptStatus},_=function(t){return t.user.threads},h=function(t){return t.user.threads.filter(function(t){return!t.closed})},g=function(t){return t.user.threads.filter(function(t){return t.closed})},v=function(t){return t.user.current_chat_type},E=function(t){return t.user.current_thread},T=function(t){return t.user.queues},b=function(t){return t.user.current_contact},S=function(t){return t.user.current_group},C=function(t){return t.user.browses},y=function(t){var e=t.user.messages.filter(function(e){return t.user.current_thread.type===u.THREAD_TYPE_THREAD?e.thread.visitor.uid===t.user.current_thread.visitor.uid:t.user.current_thread.type!==u.THREAD_TYPE_CONTACT&&(t.user.current_thread.type!==u.THREAD_TYPE_GROUP&&void 0)});return e.sort(function(t,e){return t.id>e.id?1:t.id<e.id?-1:0})},I=function(t){return t.statistic},w=function(t){return t.statistic.threads},A=function(t){return t.statistic.rates},k=function(t){for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<t.statistic.statistic_list.length;n++){var i=t.statistic.statistic_list[n];e[i.hour]=i.currentThreadCount}return e},R=function(t){for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<t.statistic.statistic_list.length;n++){var i=t.statistic.statistic_list[n];e[i.hour]=i.queuingCount}return e},N=function(t){return t.histories},O=function(t){return t.rates},x=function(t){return t.messages},U=function(t){return t.leaveMessages},P=function(t){return t.statuses},D=function(t){return t.queues},M=function(t){return t.browses},V=function(t){return t.monitors},G=function(t){return t.qualities},L=function(t){return t.agents},B=function(t){return t.online_agents},z=function(t){return t.workGroups},F=function(t){return t.filter.workGroups},$=function(t){return t.filter.workGroupMembers},W=function(t){return t.companies},H=function(t){for(var e=[],n=0;n<t.regions.provinces.length;n++){var i=t.regions.provinces[n];e.push({value:i.name,object:i})}for(var o=0;o<t.regions.cities.length;o++){var a=t.regions.cities[o];e.push({value:a.parent.name+a.name,object:a})}return e},Y=function(t){for(var e=[],n=0;n<t.regions.cities.length;n++){for(var i=t.regions.cities[n],o=!1,a=0;a<e.length;a++){var r=e[a];i.parent.code===r.value&&(e[a].children.push({value:i.code,label:i.name}),o=!0)}o||e.push({value:i.parent.code,label:i.parent.name,children:[{value:i.code,label:i.name}]})}return e},j=function(t){return t.cuws},q=function(t){var e=t.categories.filter(function(t){return t.type===u.CATEGORY_TYPE_CUW_COMPANY});return e.unshift({id:0,name:"全部分组",cuwChildren:[],type:u.CATEGORY_TYPE_CUW_COMPANY}),e},Q=function(t){return t.current_company_cuw_category_id},K=function(t){var e=[];if(0===t.current_company_cuw_category_id)for(var n=0;n<t.cuws[1].cuwChildren.length;n++)for(var i=t.cuws[1].cuwChildren[n],o=0;o<i.cuwChildren.length;o++){var a=i.cuwChildren[o];e.push(a)}else for(var r=0;r<t.cuws[1].cuwChildren.length;r++){var s=t.cuws[1].cuwChildren[r];if(s.id===t.current_company_cuw_category_id)for(var l=0;l<s.cuwChildren.length;l++){var c=s.cuwChildren[l];e.push(c)}}return e},X=function(t){return t.user.fingerPrints},J=function(t){return t.user.userTags},Z=function(t){var e=t.categories.filter(function(t){return t.type===u.CATEGORY_TYPE_ROBOT});return e.unshift({id:0,name:"全部类别",type:u.CATEGORY_TYPE_ROBOT}),e},tt=function(t){return t.robot.answers},et=function(t){return t.robot.synonyms},nt=function(t){return t.taboos},it=function(t){var e=t.categories.filter(function(t){return t.type===u.CATEGORY_TYPE_SUPPORT});return e.unshift({id:0,name:"全部分类",type:u.CATEGORY_TYPE_SUPPORT}),e},ot=function(t){return t.support.articles},at=function(t){return t.support.comments},rt=function(t){var e=t.roles.filter(function(t){return t.value!==u.ROLE_WORKGROUP_CHECKER});return e},st=function(t){return t.webs},lt=function(t){return t.apps},ct=function(t){return t.mps},ut=function(t){return t.minis},dt=function(t){return t.user.settings.connection_status},pt=function(t){return t.user.show_authority},mt=function(t){return document.domain.split(".").slice(-2).join(".")+("8081"===location.port?":8081":"")},ft=function(t){return t.user.contacts.filter(function(e){return e.uid!==t.user.info.uid&&!e.robot})},_t=function(t){return{id:t.user.info.uid,username:t.user.info.realName,status:"online",sign:t.user.info.description,avatar:t.user.info.avatar}},ht=function(t){for(var e=[{id:"1",groupname:"同事",list:[]},{id:"2",groupname:"陌生人",list:[]}],n=0;n<t.user.contacts.length;n++){var i=t.user.contacts[n];e[0].list.push({id:i.uid,username:i.realName,sign:i.description,avatar:i.avatar,status:"offline"})}return e},gt=function(t){for(var e=[],n=0;n<t.user.groups.length;n++){var i=t.user.groups[n];e.push({id:i.gid,groupname:i.nickname,sign:i.description,avatar:i.avatar})}return e},vt=n("mvHQ"),Et=n.n(vt),Tt=new a.default;function bt(t,e,n,i,o){axios.post("/api/thread/transfer?access_token="+n,{uid:t,tid:e,client:u.HTTP_CLIENT}).then(function(t){i(t.data)}).catch(function(t){o(t)})}function St(t,e,n,i,o){axios.post("/api/thread/invite?access_token="+n,{uids:t,tid:e,client:u.HTTP_CLIENT}).then(function(t){i(t.data)}).catch(function(t){o(t)})}function Ct(t,e,n){axios.get("/api/user/contacts?access_token="+t,{params:{client:u.HTTP_CLIENT}}).then(function(t){e(t.data)}).catch(function(t){n(t)})}function yt(t,e,n){axios.get("/api/workgroup/all?access_token="+t,{params:{client:u.HTTP_CLIENT}}).then(function(t){e(t.data)}).catch(function(t){n(t)})}function It(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}axios.defaults.timeout=15e3,axios.defaults.headers.post["Content-Type"]="application/json",axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",axios.defaults.baseURL=u.AXIOS_DEFAULT_BASEURL,axios.interceptors.response.use(function(t){return t},function(t){if(t.response)switch(t.response.status){case 400:console.log("axios interception error 400"),Tt.$emit(u.EVENT_BUS_LOGIN_ERROR_400,"400");break;case 401:console.log("axios interception error 401"),Tt.$emit(u.EVENT_BUS_LOGOUT,"401");break;case 403:console.log("axios interception error 403"),Tt.$emit(u.EVENT_BUS_LOGOUT,"403");break;case 500:console.log("axios interception error 500"),Tt.$emit(u.EVENT_BUS_SERVER_ERROR_500,"500")}return"return axios interception error"});var wt,At=void 0,kt=function(t,e){(0,t.commit)("PERSIST_PASSPORT_TOKEN",{token:e})},Rt=function(t){var e=t.commit,n=t.state;e("INIT"),function(t,e,n){axios.get("/api/user/init?access_token="+t,{params:{client:u.HTTP_CLIENT}}).then(function(t){e(t.data)}).catch(function(t){n(t)})}(n.passport.token.access_token,function(t){if(console.log("init response: ",t.data),200===t.status_code){var i=t.data.info;e("PERSIST_USER_INFO",{info:i});var o=t.data.workGroups;e("PERSIST_USER_WORKGROUPS",{workGroups:o});var a=t.data.agentThreads;e("PERSIST_USER_THREADS",{threads:a});var r=t.data.queues;e("PERSIST_USER_QUEUES",{queues:r});var s=t.data.groups;e("PERSIST_USER_GROUPS",{groups:s});var l=t.data.contacts;e("PERSIST_USER_CONTACTS",{contacts:l}),e("UPDATE_SHOW_AUTHORITY"),zn({commit:e,state:n}),Tt.$emit(u.EVENT_BUS_CONTACT_LOAD_FINISHED,"")}else console.log("init error:",t.message),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,"初始化错误")})},Nt=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,u){axios.post("/api/user/update/profile?access_token="+l,{username:t,password:e,nickname:n,avatar:i,mobile:o,email:a,description:r,welcomeTip:s}).then(function(t){c(t.data)}).catch(function(t){u(t)})}(e.username,e.password,e.nickname,e.avatar,e.mobile,e.email,e.description,e.welcomeTip,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("PERSIST_USER_INFO",{info:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ot=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.post("/api/user/update/autoReply?access_token="+n,{isAutoReply:t,content:e}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.isAutoReply,e.content,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("PERSIST_AUTO_REPLY",{info:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},xt=function(t,e){var n=t.commit,i=t.state.passport.token.access_token;!function(t,e,n,i){axios.post("/api/status/set?access_token="+e,{status:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,i,function(t){console.log(t),200===t.status_code?n("PERSIST_ACCEPT_STATUS",{status:e}):Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ut=function(t,e){var n=t.commit,i=t.state,o=i.user.current_thread.tid,a=e.tid;n("UPDATE_CURRENT_THREAD",{thread:e}),function(t,e,n,i,o){axios.post("/api/thread/update/current?access_token="+n,{preTid:t,tid:e,client:u.HTTP_CLIENT}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(o,a,i.passport.token.access_token,function(t){console.log(t)},function(t){console.log(t)});Dt({commit:n,state:i},20);var r=e.visitor.uid;pe({commit:n,state:i},r),fe({commit:n,state:i},r)},Pt=function(t,e){var n=t.commit;t.state;n("UPDATE_CURRENT_CHAT_TYPE",{type:e})},Dt=function(t,e){var n=t.commit,i=t.state,o=i.user.current_thread.visitor.uid,a=i.user.current_thread.page,r=i.passport.token.access_token;!function(t,e,n,i,o,a){axios.get("/api/messages/user?access_token="+i,{params:{uid:t,page:e,size:n,client:u.HTTP_CLIENT}}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(o,a,e,r,function(t){console.log(t),t.data.content.forEach(function(t){n("ADD_USER_MESSAGE",{message:t})});var e=t.data.first,i=t.data.last,r=t.data.totalElements;n("UPDATE_LOAD_MESSAGE_PAGE",{uid:o,page:a,first:e,last:i,totalElements:r}),Tt.$emit(u.EVENT_BUS_MESSAGE_SCROLL_TO_BOTTOM)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Mt=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/messages/request?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("PERSIST_MESSAGES",{messages:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Vt=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,u){axios.get("/api/messages/filter?access_token="+l,{params:{page:t,size:e,nickname:n,createdAtStart:i,createdAtEnd:o,workGroupNickname:a,agentRealName:r,client:s}}).then(function(t){c(t.data)}).catch(function(t){u(t)})}(e.page,e.size,e.nickname,e.createdAtStart,e.createdAtEnd,e.workGroupNickname,e.agentRealName,e.client,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_MESSAGES",{messages:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Gt=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/rate/get?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("PERSIST_RATES",{rates:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Lt=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,u){axios.get("/api/rate/filter?access_token="+l,{params:{page:t,size:e,nickname:n,createdAtStart:i,createdAtEnd:o,workGroupNickname:a,agentRealName:r,client:s}}).then(function(t){c(t.data)}).catch(function(t){u(t)})}(e.page,e.size,e.nickname,e.createdAtStart,e.createdAtEnd,e.workGroupNickname,e.agentRealName,e.client,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_RATES",{rates:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Bt=function(t,e){t.commit;!function(t,e,n,i){axios.post("/api/rate/invite?access_token="+e,{tid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,t.state.passport.token.access_token,function(t){console.log(t),200===t.status_code?Tt.$emit(u.EVENT_BUS_NOTIFICATION_SUCCESS,t.message):Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},zt=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/leavemsg/get?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("PERSIST_LEAVE_MESSAGES",{leaveMessages:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ft=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a){axios.post("/api/leavemsg/reply?access_token="+i,{lid:t,replied:e,reply:n,client:u.HTTP_CLIENT}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(e.lid,e.replied,e.reply,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("UPDATE_LEAVE_MESSAGE",{leaveMessage:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},$t=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,u){axios.get("/api/leavemsg/filter?access_token="+l,{params:{page:t,size:e,nickname:n,createdAtStart:i,createdAtEnd:o,workGroupNickname:a,agentRealName:r,client:s}}).then(function(t){c(t.data)}).catch(function(t){u(t)})}(e.page,e.size,e.nickname,e.createdAtStart,e.createdAtEnd,e.workGroupNickname,e.agentRealName,e.client,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("PERSIST_LEAVE_MESSAGES",{leaveMessages:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Wt=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/status/request?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("PERSIST_STATUSES",{statuses:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ht=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l){axios.get("/api/status/filter?access_token="+r,{params:{page:t,size:e,createdAtStart:n,createdAtEnd:i,agentRealName:o,client:a}}).then(function(t){s(t.data)}).catch(function(t){l(t)})}(e.page,e.size,e.createdAtStart,e.createdAtEnd,e.agentRealName,e.client,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_STATUSES",{statuses:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Yt=function(t,e){var n=t.commit,i=t.state.passport.token.access_token;!function(t,e,n,i){axios.post("/api/thread/agent/close?access_token="+e,{tid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,i,function(t){console.log(t),n("CLOSE_USER_THREAD",{tid:e}),200===t.status_code||Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},jt=function(t){var e=t.commit;!function(t,e,n){axios.get("/api/tag/get?access_token="+t,{params:{robot:!1,client:u.HTTP_CLIENT}}).then(function(t){e(t.data)}).catch(function(t){n(t)})}(t.state.passport.token.access_token,function(t){console.log(t);var n=t.data;e("PERSIST_USER_TAGS",{tags:n})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},qt=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i){axios.get("/api/tag/create?access_token="+e,{params:{name:t,robot:!1,client:u.HTTP_CLIENT}}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e.name,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("ADD_USER_TAG",{tag:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Qt=function(t,e){var n=t.commit;!function(t,e,n,i){axios.get("/api/tag/delete?access_token="+e,{params:{id:t,client:u.HTTP_CLIENT}}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,t.state.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("DELETE_USER_TAG",{id:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Kt=function(t,e){var n=t.commit,i=t.state,o=e.thread;n("ADD_USER_THREAD",{thread:o});var a="thread."+o.tid;si({commit:n,state:i},a)},Xt=function(t,e){var n=t.commit,i=t.state,o=e.thread.tid;n("REMOVE_USER_THREAD",{tid:o}),li({commit:n,state:i},"thread."+o),n("CLEAR_CURRENT_THREAD")},Jt=function(t,e){var n=t.commit,i=t.state,o=e.thread;n("ADD_USER_THREAD",{thread:o});var a="thread."+o.tid;si({commit:n,state:i},a)},Zt=function(t){var e=t.commit,n=t.state;!function(t,e,n){axios.get("/api/thread/get?access_token="+t,{params:{client:u.HTTP_CLIENT}}).then(function(t){e(t.data)}).catch(function(t){n(t)})}(n.passport.token.access_token,function(t){console.log(t);var i=t.data.agentThreads;e("PERSIST_USER_THREADS",{threads:i});for(var o=0;o<i.length;o++){var a="thread."+i[o].tid;si({commit:e,state:n},a)}},function(t){console.log(t)})},te=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/queue/get?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_USER_QUEUES",{queues:e})},function(t){console.log(t)})},ee=function(t,e){var n=t.commit,i=t.state,o=i.passport.token.access_token;!function(t,e,n,i){axios.post("/api/queue/accept?access_token="+e,{qid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,o,function(t){console.log(t),n("ACCEPT_USER_QUEUE",{qid:e});var o=t.data.thread;n("ADD_USER_THREAD",{thread:o});var a="thread."+o.tid;si({commit:n,state:i},a)},function(t){console.log(t)})},ne=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/browse/request?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_USER_BROWSES",{browses:e})},function(t){console.log(t)})},ie=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/thread/history?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_HISTORIES",{histories:e})},function(t){console.log(t)})},oe=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,u){axios.get("/api/thread/filter?access_token="+l,{params:{page:t,size:e,nickname:n,createdAtStart:i,createdAtEnd:o,workGroupNickname:a,agentRealName:r,client:s}}).then(function(t){c(t.data)}).catch(function(t){u(t)})}(e.page,e.size,e.nickname,e.createdAtStart,e.createdAtEnd,e.workGroupNickname,e.agentRealName,e.client,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_HISTORIES",{histories:e})},function(t){console.log(t)})},ae=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/thread/monitor?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_MONITORS",{monitors:e})},function(t){console.log(t)})},re=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/thread/quality?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_QUALITIES",{qualities:e})},function(t){console.log(t)})},se=function(t){var e=t.commit;!function(t,e,n){axios.get("/api/cuw/get?access_token="+t,{params:{client:u.HTTP_CLIENT}}).then(function(t){e(t.data)}).catch(function(t){n(t)})}(t.state.passport.token.access_token,function(t){console.log(t);var n=t.data;e("PERSIST_CUWS",{cuws:n})},function(t){console.log(t)})},le=function(t,e){var n=t.commit;t.state;n("UPDATE_COMPANY_CURRENT_CUW_CATEGORY_ID",{categoryId:e})},ce=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a){axios.post("/api/cuw/create?access_token="+i,{categoryId:t,name:e,content:n,client:u.HTTP_CLIENT}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(e.categoryId,e.name,e.content,i.passport.token.access_token,function(t){console.log(t);var e=t.data.cuw,i=t.data.category;n("ADD_CUW",{cuw:e,category:i})},function(t){console.log(t)})},ue=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a){axios.post("/api/cuw/update?access_token="+i,{id:t,name:e,content:n,client:u.HTTP_CLIENT}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(e.id,e.name,e.content,i.passport.token.access_token,function(t){console.log(t);var e=t.data.cuw,i=t.data.category;n("UPDATE_CUW",{cuw:e,category:i})},function(t){console.log(t)})},de=function(t,e){var n=t.commit;!function(t,e,n,i){axios.post("/api/cuw/delete?access_token="+e,{id:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,t.state.passport.token.access_token,function(t){console.log(t);var e=t.data.cuw,i=t.data.category;n("DELETE_CUW",{cuw:e,category:i})},function(t){console.log(t)})},pe=function(t,e){var n=t.commit;!function(t,e,n,i){axios.get("/api/fingerprint2/get?access_token="+e,{params:{uid:t,client:u.HTTP_CLIENT}}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,t.state.passport.token.access_token,function(t){console.log(t);var e=t.data.fingerPrints;n("PERSIST_USER_FINGERPRINTS",{fingerPrints:e})},function(t){console.log(t)})},me=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.post("/api/fingerprint2/note?access_token="+n,{uid:t,value:e}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.uid,e.value,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("ADD_USER_FINGERPRINT",{fingerPrint:e})},function(t){console.log(t)})},fe=function(t,e){var n=t.commit,i=t.state.passport.token.access_token;!function(t,e,n,i){axios.get("/api/user/tag?access_token="+e,{params:{uid:t,client:u.HTTP_CLIENT}}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,i,function(t){console.log(t);var i=t.data;n("PERSIST_USER_TAGS",{uid:e,tags:i})},function(t){console.log(t)})},_e=function(t){var e,n,i=t.commit;t.state;e=function(t){var e=t.data;i("PERSIST_ROLES",{roles:e})},n=function(t){console.log(t)},axios.get("/visitor/api/roles",{params:{client:u.HTTP_CLIENT}}).then(function(t){e(t.data)}).catch(function(t){n(t)})},he=function(t){var e=t.commit;Ct(t.state.passport.token.access_token,function(t){console.log(t);var n=t.data;e("PERSIST_USER_CONTACTS",{contacts:n}),Tt.$emit(u.EVENT_BUS_CONTACT_LOAD_FINISHED,"")},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_CONTACT_LOAD_FINISHED,""),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},ge=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/user/get?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_AGENTS",{agents:e}),Tt.$emit(u.EVENT_BUS_AGENT_LOAD_FINISHED,"")},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_AGENT_LOAD_FINISHED,""),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},ve=function(t){var e=t.commit;!function(t,e,n){axios.get("/api/user/workGroupMembers?access_token="+t,{params:{client:u.HTTP_CLIENT}}).then(function(t){e(t.data)}).catch(function(t){n(t)})}(t.state.passport.token.access_token,function(t){console.log(t);var n=t.data;e("PERSIST_FILTER_WORKGROUP_MEMBERS",{workGroupMembers:n})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_AGENT_LOAD_FINISHED,""),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ee=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/user/online?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_ONLINE_AGENTS",{agents:e}),Tt.$emit(u.EVENT_BUS_AGENT_LOAD_FINISHED,"")},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_AGENT_LOAD_FINISHED,""),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Te=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a){axios.get("/api/user/filter?access_token="+i,{params:{page:t,size:e,realName:n,client:u.HTTP_CLIENT}}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(e.page,e.size,e.realName,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_AGENTS",{agents:e})},function(t){console.log(t)})},be=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,u,d,p){axios.post("/api/user/create?access_token="+u,{username:t,password:e,email:n,avatar:i,realName:o,nickname:a,maxThreadCount:r,workGroups:s,role:l,enabled:c}).then(function(t){d(t.data)}).catch(function(t){p(t)})}(e.username,e.password,e.email,e.avatar,e.realName,e.nickname,e.maxThreadCount,e.workGroups,e.role,e.enabled,i.passport.token.access_token,function(t){if(console.log("create agent:",t),200===t.status_code){var e=t.data;n("ADD_AGENT",{agent:e})}},function(t){console.log(t)})},Se=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,u,d,p,m){axios.post("/api/user/update?access_token="+d,{id:t,username:e,password:n,email:i,avatar:o,realName:a,nickname:r,maxThreadCount:s,workGroups:l,role:c,enabled:u}).then(function(t){p(t.data)}).catch(function(t){m(t)})}(e.id,e.username,e.password,e.email,e.avatar,e.realName,e.nickname,e.maxThreadCount,e.workGroups,e.role,e.enabled,i.passport.token.access_token,function(t){if(console.log("update agent:",t),200===t.status_code){var e=t.data;n("UPDATE_AGENT",{agent:e})}},function(t){console.log(t)})},Ce=function(t,e){var n=t.commit;!function(t,e,n,i){axios.post("/api/user/delete?access_token="+e,{id:t}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,t.state.passport.token.access_token,function(t){if(console.log("delete agent:",t),200===t.status_code){var e=t.data;n("DELETE_AGENT",{id:e})}},function(t){console.log(t)})},ye=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/workgroup/get?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_WORKGROUPS",{workGroups:e}),Tt.$emit(u.EVENT_BUS_WORKGROUP_LOAD_FINISHIED,"")},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_WORKGROUP_LOAD_FINISHIED,""),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ie=function(t){var e=t.commit;yt(t.state.passport.token.access_token,function(t){console.log(t);var n=t.data;e("PERSIST_FILTER_WORKGROUPS",{workGroups:n}),Tt.$emit(u.EVENT_BUS_WORKGROUP_LOAD_FINISHIED,"")},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_WORKGROUP_LOAD_FINISHIED,""),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},we=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a){axios.get("/api/workgroup/filter?access_token="+i,{params:{page:t,size:e,nickname:n,client:u.HTTP_CLIENT}}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(e.page,e.size,e.nickname,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_WORKGROUPS",{workGroups:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ae=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,u,d,p,m,f,_){axios.post("/api/workgroup/create?access_token="+m,{nickname:t,avatar:e,defaultRobot:n,offlineRobot:i,forceRate:o,routeType:a,welcomeTip:r,acceptTip:s,offlineTip:l,workTimes:c,users:u,onDutyWorkGroupWid:d,admin:p}).then(function(t){f(t.data)}).catch(function(t){_(t)})}(e.nickname,e.avatar,e.defaultRobot,e.offlineRobot,e.forceRate,e.routeType,e.welcomeTip,e.acceptTip,e.offlineTip,Et()(e.workTimes),e.users,e.onDutyWorkGroupWid,e.admin,i.passport.token.access_token,function(t){console.log("create workgroup:",t);var e=t.data;n("ADD_WORKGROUP",{workGroup:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},ke=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,u,d,p,m,f,_,h){axios.post("/api/workgroup/update?access_token="+f,{id:t,nickname:e,avatar:n,defaultRobot:i,offlineRobot:o,forceRate:a,routeType:r,welcomeTip:s,acceptTip:l,offlineTip:c,workTimes:u,users:d,onDutyWorkGroupWid:p,admin:m}).then(function(t){_(t.data)}).catch(function(t){h(t)})}(e.id,e.nickname,e.avatar,e.defaultRobot,e.offlineRobot,e.forceRate,e.routeType,e.welcomeTip,e.acceptTip,e.offlineTip,Et()(e.workTimes),e.users,e.onDutyWorkGroupWid,e.admin,i.passport.token.access_token,function(t){console.log("update workgroup:",t);var e=t.data;n("UPDATE_WORKGROUP",{workGroup:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Re=function(t,e){var n=t.commit,i=t.state.passport.token.access_token;!function(t,e,n,i){axios.post("/api/workgroup/delete?access_token="+e,{id:t}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,i,function(t){console.log("delete workgroup:",t),n("DELETE_WORKGROUP",{id:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ne=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/app/webs?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_WEBS",{webs:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Oe=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a){axios.post("/api/app/web/create?access_token="+i,{name:t,url:e,description:n,client:u.HTTP_CLIENT}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(e.name,e.url,e.description,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("ADD_WEB",{web:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},xe=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r){axios.post("/api/app/web/update?access_token="+o,{aid:t,name:e,url:n,description:i,client:u.HTTP_CLIENT}).then(function(t){a(t.data)}).catch(function(t){r(t)})}(e.aid,e.name,e.url,e.description,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("UPDATE_WEB",{web:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ue=function(t,e){var n=t.commit,i=t.state.passport.token.access_token;!function(t,e,n,i){axios.post("/api/app/web/delete?access_token="+e,{aid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,i,function(t){console.log(t),n("DELETE_WEB",{aid:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Pe=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/app/apps?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_APPS",{apps:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},De=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,d){axios.post("/api/app/app/create?access_token="+l,{name:t,avatar:e,version:n,tip:i,url:o,status:a,platform:r,description:s,client:u.HTTP_CLIENT}).then(function(t){c(t.data)}).catch(function(t){d(t)})}(e.name,e.avatar,e.version,e.tip,e.url,e.status,e.platform,e.description,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("ADD_APP",{app:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Me=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,d,p){axios.post("/api/app/app/update?access_token="+c,{aid:t,name:e,avatar:n,version:i,tip:o,url:a,status:r,platform:s,description:l,client:u.HTTP_CLIENT}).then(function(t){d(t.data)}).catch(function(t){p(t)})}(e.aid,e.name,e.avatar,e.version,e.tip,e.url,e.status,e.platform,e.description,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("UPDATE_APP",{app:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ve=function(t,e){var n=t.commit,i=t.state.passport.token.access_token;!function(t,e,n,i){axios.post("/api/app/app/delete?access_token="+e,{aid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,i,function(t){console.log(t),n("DELETE_APP",{aid:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ge=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/app/mps?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_MPS",{mps:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Le=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,d,p){axios.post("/api/app/mp/create?access_token="+c,{nickname:t,number:e,description:n,company:i,originalId:o,appId:a,appSecret:r,aesKey:s,encodeType:l,client:u.HTTP_CLIENT}).then(function(t){d(t.data)}).catch(function(t){p(t)})}(e.nickname,e.number,e.description,e.company,e.original_id,e.app_id,e.app_secret,e.aes_key,e.encode_type,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("ADD_MP",{mp:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Be=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,d,p,m){axios.post("/api/app/mp/update?access_token="+d,{wid:t,nickname:e,number:n,description:i,company:o,originalId:a,appId:r,appSecret:s,aesKey:l,encodeType:c,client:u.HTTP_CLIENT}).then(function(t){p(t.data)}).catch(function(t){m(t)})}(e.wid,e.nickname,e.number,e.description,e.company,e.original_id,e.app_id,e.app_secret,e.aes_key,e.encode_type,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("UPDATE_MP",{mp:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},ze=function(t,e){var n=t.commit,i=t.state.passport.token.access_token;!function(t,e,n,i){axios.post("/api/app/mp/delete?access_token="+e,{wid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,i,function(t){console.log(t),n("DELETE_MP",{wid:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Fe=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/app/minis?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_MINIS",{minis:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},$e=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,d,p){axios.post("/api/app/mini/create?access_token="+c,{nickname:t,description:e,company:n,originalId:i,appId:o,appSecret:a,aesKey:r,encodeType:s,dataType:l,client:u.HTTP_CLIENT}).then(function(t){d(t.data)}).catch(function(t){p(t)})}(e.nickname,e.description,e.company,e.original_id,e.app_id,e.app_secret,e.aes_key,e.encode_type,e.data_type,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("ADD_MINI",{mini:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},We=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l,c,d,p,m){axios.post("/api/app/mini/update?access_token="+d,{wid:t,nickname:e,description:n,company:i,originalId:o,appId:a,appSecret:r,aesKey:s,encodeType:l,dataType:c,client:u.HTTP_CLIENT}).then(function(t){p(t.data)}).catch(function(t){m(t)})}(e.wid,e.nickname,e.description,e.company,e.original_id,e.app_id,e.app_secret,e.aes_key,e.encode_type,e.data_type,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("UPDATE_MINI",{mini:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},He=function(t,e){var n=t.commit,i=t.state.passport.token.access_token;!function(t,e,n,i){axios.post("/api/app/mini/delete?access_token="+e,{wid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,i,function(t){console.log(t),n("DELETE_MINI",{wid:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ye=function(t){var e=t.commit;!function(t,e,n){axios.get("/api/statistic/all?access_token="+t,{params:{client:u.HTTP_CLIENT}}).then(function(t){e(t.data)}).catch(function(t){n(t)})}(t.state.passport.token.access_token,function(t){console.log(t);var n=t.data;e("PERSIST_STATISTICS",{statistic:n})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},je=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/statistic/detail?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_STATISTIC_DETAILS",{detail:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},qe=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r){axios.get("/api/statistic/filter?access_token="+o,{params:{page:t,size:e,date:n,realName:i,client:u.HTTP_CLIENT}}).then(function(t){a(t.data)}).catch(function(t){r(t)})}(e.page,e.size,e.date,e.realName,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_STATISTIC_DETAILS",{detail:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Qe=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/statistic/thread?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_STATISTICS_THREADS",{threads:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ke=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/statistic/rate?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_STATISTICS_RATES",{rates:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Xe=function(t){var e=t.commit;!function(t,e,n){axios.get("/api/category/get?access_token="+t,{params:{client:u.HTTP_CLIENT}}).then(function(t){e(t.data)}).catch(function(t){n(t)})}(t.state.passport.token.access_token,function(t){console.log(t);var n=t.data;e("PERSIST_CATEGORIES",{categories:n})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Je=function(t,e){var n=t.commit,i=t.state,o=e.parent_id,a=e.name,r=e.type,s=i.passport.token.access_token;!function(t,e,n,i,o,a){axios.post("/api/category/create?access_token="+i,{parentId:t,name:e,type:n,client:u.HTTP_CLIENT}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(o,a,r,s,function(t){console.log(t);var e=t.data;if(r===u.CATEGORY_TYPE_CUW_MINE){n("ADD_CUW",{cuw:null,category:e})}else n("ADD_CATEGORY",{category:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Ze=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.post("/api/category/update?access_token="+n,{categoryId:t,name:e,client:u.HTTP_CLIENT}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.category_id,e.name,i.passport.token.access_token,function(t){console.log(t);var e=t.data;if(e.type===u.CATEGORY_TYPE_CUW_MINE){n("UPDATE_CUW",{cuw:null,category:e})}else n("UPDATE_CATEGORY",{category:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},tn=function(t,e){var n=t.commit,i=t.state.passport.token.access_token;!function(t,e,n,i){axios.post("/api/category/delete?access_token="+e,{categoryId:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,i,function(t){console.log(t);var i=t.data;if(i.type===u.CATEGORY_TYPE_CUW_MINE){n("DELETE_CUW",{cuw:null,category:i})}else n("DELETE_CATEGORY",{id:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},en=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a){axios.get("/api/answer/get?access_token="+i,{params:{categoryId:t,page:e,size:n,client:u.HTTP_CLIENT}}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(e.categoryId,e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_ROBOT_ANSWERS",{answers:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},nn=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r){axios.post("/api/answer/create?access_token="+o,{question:t,relateds:e,answer:n,categories:i}).then(function(t){a(t.data)}).catch(function(t){r(t)})}(e.question,e.relateds,e.answer,e.categories,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("ADD_ROBOT_ANSWER",{answer:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},on=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s){axios.post("/api/answer/update?access_token="+a,{aid:t,question:e,relateds:n,answer:i,categories:o}).then(function(t){r(t.data)}).catch(function(t){s(t)})}(e.aid,e.question,e.relateds,e.answer,e.categories,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("UPDATE_ROBOT_ANSWER",{answer:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},an=function(t,e){var n=t.commit,i=t.state.passport.token.access_token;!function(t,e,n,i){axios.post("/api/answer/delete?access_token="+e,{aid:t}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,i,function(t){n("DELETE_ROBOT_ANSWER",{aid:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},rn=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/synonym/get?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_ROBOT_SYNONYMS",{synonyms:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},sn=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.post("/api/synonym/create?access_token="+n,{standard:t,synonyms:e}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.standard,e.synonyms,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("ADD_ROBOT_SYNONYM",{synonym:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},ln=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a){axios.post("/api/synonym/update?access_token="+i,{sid:t,standard:e,synonyms:n}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(e.sid,e.standard,e.synonyms,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("UPDATE_ROBOT_SYNONYM",{synonym:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},cn=function(t,e){var n=t.commit,i=t.state.passport.token.access_token;!function(t,e,n,i){axios.post("/api/synonym/delete?access_token="+e,{sid:t}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,i,function(t){console.log(t),200===t.status_code?n("DELETE_ROBOT_SYNONYM",{sid:e}):Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},un=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/taboo/get?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_TABOOS",{taboos:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},dn=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.post("/api/taboo/create?access_token="+n,{standard:t,synonyms:e,client:u.HTTP_CLIENT}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.standard,e.synonyms,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("ADD_TABOO",{taboo:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},pn=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a){axios.post("/api/taboo/update?access_token="+i,{tid:t,standard:e,synonyms:n,client:u.HTTP_CLIENT}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(e.sid,e.standard,e.synonyms,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("UPDATE_TABOO",{taboo:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},mn=function(t,e){var n=t.commit,i=t.state.passport.token.access_token;!function(t,e,n,i){axios.post("/api/taboo/delete?access_token="+e,{tid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,i,function(t){console.log(t),200===t.status_code?n("DELETE_TABOO",{tid:e}):Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},fn=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a){axios.get("/api/article/get?access_token="+i,{params:{categoryId:t,page:e,size:n,client:u.HTTP_CLIENT}}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(e.categoryId,e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_SUPPORT_ARTICLES",{articles:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},_n=function(t,e){var n=t.commit,i=t.state,o=e.title,a=e.content,r=e.categories;!function(t,e,n,i,o,a,r,s){axios.post("/api/article/create?access_token="+a,{title:t,content:e,recommend:n,markdown:i,categories:o,client:u.HTTP_CLIENT}).then(function(t){r(t.data)}).catch(function(t){s(t)})}(o,a,e.recommend,e.markdown,r,i.passport.token.access_token,function(t){console.log(t),Tt.$emit(u.EVENT_BUS_SUPPORT_NEW_ARTICLE_SUCCESS);var e=t.data;n("ADD_SUPPORT_ARTICLE",{article:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_SUPPORT_NEW_ARTICLE_ERROR)})},hn=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r,s,l){axios.post("/api/article/update?access_token="+r,{articleId:t,title:e,content:n,recommend:i,markdown:o,categories:a,client:u.HTTP_CLIENT}).then(function(t){s(t.data)}).catch(function(t){l(t)})}(e.id,e.title,e.content,e.recommend,e.markdown,e.categories,i.passport.token.access_token,function(t){console.log(t),Tt.$emit(u.EVENT_BUS_SUPPORT_UPDATE_ARTICLE_SUCCESS);var e=t.data;n("UPDATE_SUPPORT_ARTICLE",{article:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_SUPPORT_UPDATE_ARTICLE_ERROR)})},gn=function(t,e){var n=t.commit,i=t.state.passport.token.access_token;!function(t,e,n,i){axios.post("/api/article/delete?access_token="+e,{articleId:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,i,function(t){console.log(t),n("DELETE_SUPPORT_ARTICLE",{articleId:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},vn=function(t,e){var n=t.commit;!function(t,e,n,i){axios.post("/api/user/apply?access_token="+e,{mobile:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,t.state.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_USER_INFO",{info:e}),n("UPDATE_SHOW_AUTHORITY")},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},En=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a){axios.get("/api/company/filter?access_token="+i,{params:{page:t,size:e,name:n,client:u.HTTP_CLIENT}}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(e.page,e.size,e.name,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_COMPANIES",{companies:e}),Tt.$emit(u.EVENT_BUS_COMPANY_LOAD_FINISHED,"")},function(t){console.log(t)})},Tn=function(t){var e=t.commit;!function(t,e,n){axios.get("/api/region/get?access_token="+t,{params:{client:u.HTTP_CLIENT}}).then(function(t){e(t.data)}).catch(function(t){n(t)})}(t.state.passport.token.access_token,function(t){console.log(t);var n=t.data;e("PERSIST_REGIONS",{regions:n})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},bn=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.get("/api/company/get?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("PERSIST_COMPANIES",{companies:e}),Tt.$emit(u.EVENT_BUS_COMPANY_LOAD_FINISHED,"")},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_COMPANY_LOAD_FINISHED,""),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Sn=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a){axios.post("/api/company/create?access_token="+i,{name:t,description:e,regions:n,client:u.HTTP_CLIENT}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(e.name,e.description,e.selectedRegions,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("ADD_COMPANY",{company:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Cn=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o,a,r){axios.post("/api/company/update?access_token="+o,{cid:t,name:e,description:n,regions:i,client:u.HTTP_CLIENT}).then(function(t){a(t.data)}).catch(function(t){r(t)})}(e.cid,e.name,e.description,e.selectedRegions,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("UPDATE_COMPANY",{company:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},yn=function(t,e){var n=t.commit;!function(t,e,n,i){axios.post("/api/company/delete?access_token="+e,{cid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,t.state.passport.token.access_token,function(t){console.log(t);var e=t.data;n("DELETE_COMPANY",{cid:e})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},In=function(t,e){t.commit;var n=t.state;!function(t,e,n,i,o){axios.get("/api/block/get?access_token="+n,{params:{page:t,size:e,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.page,e.size,n.passport.token.access_token,function(t){console.log(t)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},wn=function(t,e){t.commit;var n=t.state;!function(t,e,n,i,o,a){axios.post("/api/block/add?access_token="+i,{uid:t,type:e,note:n,client:u.HTTP_CLIENT}).then(function(t){o(t.data)}).catch(function(t){a(t)})}(e.uid,e.type,e.note,n.passport.token.access_token,function(t){console.log(t)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},An=function(t,e){t.commit;!function(t,e,n,i){axios.post("/api/block/remove?access_token="+e,{uid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,t.state.passport.token.access_token,function(t){console.log(t)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},kn=function(t){var e=t.commit;!function(t,e,n){axios.get("/api/group/get?access_token="+t,{params:{client:u.HTTP_CLIENT}}).then(function(t){e(t.data)}).catch(function(t){n(t)})}(t.state.passport.token.access_token,function(t){console.log(t);var n=t.data;e("PERSIST_USER_GROUPS",{groups:n})},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Rn=function(t,e){t.commit;!function(t,e,n,i){axios.get("/api/group/members?access_token="+e,{params:{gid:t,client:u.HTTP_CLIENT}}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,t.state.passport.token.access_token,function(t){console.log(t)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Nn=function(t,e){var n=t.commit,i=t.state;!function(t,e,n,i,o){axios.post("/api/group/create?access_token="+n,{nickname:t,selectedContacts:e,client:u.HTTP_CLIENT}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.nickname,e.selectedContacts,i.passport.token.access_token,function(t){console.log(t);var e=t.data;n("ADD_USER_GROUP",{group:e}),Tt.$emit(u.EVENT_BUS_GROUP_ADDED,e)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},On=function(t,e){t.commit;var n=t.state;!function(t,e,n,i,o){axios.post("/api/group/update/nickname?access_token="+n,{gid:t,nickname:e,client:u.HTTP_CLIENT}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.gid,e.nickname,n.passport.token.access_token,function(t){console.log(t)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},xn=function(t,e){t.commit;var n=t.state;!function(t,e,n,i,o){axios.post("/api/group/update/announcement?access_token="+n,{gid:t,announcement:e,client:u.HTTP_CLIENT}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.gid,e.nickname,n.passport.token.access_token,function(t){console.log(t)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Un=function(t,e){t.commit;var n=t.state;!function(t,e,n,i,o){axios.post("/api/group/update/description?access_token="+n,{gid:t,description:e,client:u.HTTP_CLIENT}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.gid,e.nickname,n.passport.token.access_token,function(t){console.log(t)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Pn=function(t,e){t.commit;var n=t.state;!function(t,e,n,i,o){axios.post("/api/group/kick?access_token="+n,{gid:t,uid:e,client:u.HTTP_CLIENT}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.gid,e.uid,n.passport.token.access_token,function(t){console.log(t)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Dn=function(t,e){t.commit;var n=t.state;!function(t,e,n,i,o){axios.post("/api/group/mute?access_token="+n,{gid:t,uid:e,client:u.HTTP_CLIENT}).then(function(t){i(t.data)}).catch(function(t){o(t)})}(e.gid,e.uid,n.passport.token.access_token,function(t){console.log(t)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Mn=function(t,e){t.commit;var n=t.state;!function(t,e,n,i){axios.post("/api/group/dismiss?access_token="+e,{gid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e.gid,n.passport.token.access_token,function(t){console.log(t)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Vn=function(t,e){t.commit;!function(t,e,n,i){axios.get("/api/group/filter?access_token="+e,{params:{keyword:t,client:u.HTTP_CLIENT}}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(e,t.state.passport.token.access_token,function(t){console.log(t)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},Gn=function(t){var e=t.commit;t.state;localStorage.removeItem("access_token"),e("LOGOUT")},Ln=function(t){var e=t.commit,n=t.state;console.log("action logout"),function(t,e,n){axios.post("/api/user/logout?access_token="+t,{client:u.HTTP_CLIENT}).then(function(t){e(t.data)}).catch(function(t){n(t)})}(n.passport.token.access_token,function(t){console.log(t),200===t.status_code&&(Gn({commit:e,state:n}),Tt.$emit(u.EVENT_BUS_LOGOUT,"logout"))},function(t){console.log(t),Gn({commit:e,state:n}),Tt.$emit(u.EVENT_BUS_LOGOUT,"logout")})},Bn=function(t,e){var n=t.commit;t.state;n("CHANGE_CURRENT_MAIN_VIEW",{view:e})},zn=function t(e){var n=e.commit,i=e.state,o=u.STOMP_CONNECTION_STATUS_CONNECTING;n("UPDATE_USER_CONNECTION",{connectionStatus:o}),Tt.$emit(u.EVENT_BUS_STOMP_CONNECTION_STATUS,o);var a=new SockJS(u.SOCKJS_WEBSOCKET_ENDPOINT+i.passport.token.access_token);(At=StompJS.over(a)).reconnect_delay=1e3,At.heartbeat.outgoing=15e3,At.heartbeat.incoming=15e3,u.IS_PRODUCTION,At.connect({},function(t){console.log("Connected: "+t),0;var e=u.STOMP_CONNECTION_STATUS_CONNECTED;n("UPDATE_USER_CONNECTION",{connectionStatus:e}),Tt.$emit(u.EVENT_BUS_STOMP_CONNECTION_STATUS,e);var o="subDomain."+i.user.info.subDomain;si({commit:n,state:i},o);for(var a=i.user.workGroups,r=0;r<a.length;r++){var s="workGroup."+a[r].wid;si({commit:n,state:i},s)}for(var l=i.user.groups,c=0;c<l.length;c++){var d="group."+l[c].gid;si({commit:n,state:i},d)}for(var p=i.user.threads,m=0;m<p.length;m++){var f="thread."+p[m].tid;si({commit:n,state:i},f)}var _="contact."+i.user.info.uid;si({commit:n,state:i},_),_="user."+i.user.info.uid,si({commit:n,state:i},_)},function(e){console.log("连接断开【"+e+"】"),n("CLEAR_TOPIC");var o=u.STOMP_CONNECTION_STATUS_DISCONNECTED;n("UPDATE_USER_CONNECTION",{connectionStatus:o}),Tt.$emit(u.EVENT_BUS_STOMP_CONNECTION_STATUS,o),setTimeout(function(){console.log("reconnecting..."),0,t({commit:n,state:i})},1e4)})},Fn=function(t,e){t.commit;var n="thread."+t.state.user.current_thread.tid;At.send("/app/"+n,{},Et()({type:u.MESSAGE_TYPE_TEXT,content:e,localId:It(),client:u.CLIENT_WEB_ADMIN}))},$n=function(t,e){t.commit;var n="thread."+t.state.user.current_thread.tid;At.send("/app/"+n,{},Et()({type:u.MESSAGE_TYPE_IMAGE,imageUrl:e,localId:It(),client:u.CLIENT_WEB_ADMIN}))},Wn=function(t,e){t.commit;var n=t.state,i=e.fileUrl,o=e.format,a="thread."+n.user.current_thread.tid;At.send("/app/"+a,{},Et()({type:u.MESSAGE_TYPE_FILE,fileUrl:i,format:o,localId:It(),client:u.CLIENT_WEB_ADMIN}))},Hn=function(t,e){t.commit;var n=t.state,i=e.type,o=e.content,a="thread."+n.user.current_thread.tid;At.send("/app/"+a,{},Et()({type:i,content:o,localId:It(),client:u.CLIENT_WEB_ADMIN}))},Yn=function(t,e){t.commit;var n="thread."+t.state.user.current_thread.tid;At.send("/app/"+n,{},Et()({type:u.MESSAGE_TYPE_NOTIFICATION_PREVIEW,content:e,client:u.CLIENT_WEB_ADMIN}))},jn=function(t,e){t.commit,t.state;var n=e.mid,i=e.status,o="thread."+e.tid;At.send("/app/"+o,{},Et()({type:u.MESSAGE_TYPE_NOTIFICATION_RECEIPT,content:n,status:i,client:u.CLIENT_WEB_ADMIN}))},qn=function(t,e){t.commit;var n=t.state,i=e.type,o=e.content,a="thread."+n.user.current_thread.tid;At.send("/app/"+a,{},Et()({type:i,candidate:o,client:u.CLIENT_WEB_ADMIN}))},Qn=function(t,e){t.commit;var n=t.state,i=e.type,o=e.content,a="thread."+n.user.current_thread.tid;At.send("/app/"+a,{},Et()({type:i,sessionDescription:o,client:u.CLIENT_WEB_ADMIN}))},Kn=function(t,e){t.commit,t.state;var n=e.uid,i=e.content,o="contact."+n;At.send("/app/"+o,{},Et()({type:u.MESSAGE_TYPE_TEXT,content:i,localId:It(),client:u.CLIENT_WEB_ADMIN}))},Xn=function(t,e){t.commit,t.state;var n=e.uid,i=e.imageUrl,o="contact."+n;At.send("/app/"+o,{},Et()({type:u.MESSAGE_TYPE_IMAGE,imageUrl:i,localId:It(),client:u.CLIENT_WEB_ADMIN}))},Jn=function(t,e){t.commit,t.state;var n=e.uid,i=e.fileUrl,o=e.format,a="contact."+n;At.send("/app/"+a,{},Et()({type:u.MESSAGE_TYPE_FILE,fileUrl:i,format:o,localId:It(),client:u.CLIENT_WEB_ADMIN}))},Zn=function(t,e){t.commit,t.state;var n=e.uid,i=e.content,o="contact."+n;At.send("/app/"+o,{},Et()({type:u.MESSAGE_TYPE_CUSTOM,content:i,localId:It(),client:u.CLIENT_WEB_ADMIN}))},ti=function(t,e){t.commit,t.state;var n=e.uid,i=e.content,o="group."+n;At.send("/app/"+o,{},Et()({type:u.MESSAGE_TYPE_TEXT,content:i,localId:It(),client:u.CLIENT_WEB_ADMIN}))},ei=function(t,e){t.commit,t.state;var n=e.uid,i=e.imageUrl,o="group."+n;At.send("/app/"+o,{},Et()({type:u.MESSAGE_TYPE_IMAGE,imageUrl:i,localId:It(),client:u.CLIENT_WEB_ADMIN}))},ni=function(t,e){t.commit,t.state;var n=e.uid,i=e.fileUrl,o=e.format,a="group."+n;At.send("/app/"+a,{},Et()({type:u.MESSAGE_TYPE_FILE,fileUrl:i,format:o,localId:It(),client:u.CLIENT_WEB_ADMIN}))},ii=function(t,e){t.commit,t.state;var n=e.uid,i=e.content,o="group."+n;At.send("/app/"+o,{},Et()({type:u.MESSAGE_TYPE_CUSTOM,content:i,localId:It(),client:u.CLIENT_WEB_ADMIN}))},oi=function(t,e){var n=t.commit,i=t.state,o={tid:i.user.current_thread.tid,type:u.MESSAGE_TYPE_TEXT,content:e,sessionType:u.MESSAGE_SESSION_TYPE_THREAD};ri({commit:n,state:i},o)},ai=function(t,e){var n=t.commit,i=t.state,o={tid:i.user.current_thread.tid,type:u.MESSAGE_TYPE_IMAGE,content:e,sessionType:u.MESSAGE_SESSION_TYPE_THREAD};ri({commit:n,state:i},o)},ri=function(t,e){var n=t.commit,i=t.state,o=e.tid,a=e.type,r=e.content,s=e.sessionType;!function(t,e,n,i,o,a,r,s){axios.post("/api/messages/send?access_token="+a,{tid:t,type:e,content:n,status:u.MESSAGE_STATUS_SENDING,localId:i,sessionType:o,client:u.HTTP_CLIENT}).then(function(t){r(t.data)}).catch(function(t){s(t)})}(o,a,r,It(),s,i.passport.token.access_token,function(t){if(console.log(t),200===t.status_code){var e=t.data;n("ADD_USER_MESSAGE",{message:e})}else Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t.message)},function(t){console.log(t),Tt.$emit(u.EVENT_BUS_NOTIFICATION_ERROR,t)})},si=function t(e,n){var i=e.commit,o=e.state;if(!o.user.subscribed_topics.some(function(t){return n===t.topic})){var a=At.subscribe("/topic/"+n,function(e){var n=JSON.parse(e.body);if(n.type===u.MESSAGE_TYPE_NOTIFICATION_QUEUE){console.log("排队访客");var a=n.queue;i("ADD_USER_QUEUE",{queue:a})}else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_QUEUE_ACCEPT){console.log("排队访客被接入");var r=n.queue.qid;i("ACCEPT_USER_QUEUE",{qid:r})}else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_THREAD||n.type===u.MESSAGE_TYPE_NOTIFICATION_THREAD_REENTRY){console.log("新会话 + 重新进入会话"),i("ADD_USER_MESSAGE",{message:n});var s=n.thread;i("ADD_USER_THREAD",{thread:s});var l="thread."+s.tid;t({commit:i,state:o},l),Tt.$emit(u.EVENT_BUS_NOTIFICATION_INFO,n)}else if(n.type===u.MESSAGE_TYPE_TEXT||n.type===u.MESSAGE_TYPE_IMAGE||n.type===u.MESSAGE_TYPE_FILE)if(console.log("会话消息:",n.type),i("ADD_USER_MESSAGE",{message:n}),n.thread.type===u.THREAD_TYPE_THREAD){if(n.user.uid!==o.user.info.uid){var c={mid:n.mid,tid:n.thread.tid,status:u.MESSAGE_STATUS_RECEIVED};if(jn({commit:i,state:o},c),n.thread.tid===o.user.current_thread.tid){var d={mid:n.mid,tid:n.thread.tid,status:u.MESSAGE_STATUS_READ};jn({commit:i,state:o},d)}}var p=n.thread;p.tid===o.user.current_thread.tid&&Tt.$emit(u.EVENT_BUS_MESSAGE_SCROLL_TO_BOTTOM);var m=p.tid,f=p.content,_=p.timestamp,h=p.unreadCount;i("UPDATE_THREAD_CONTENT",{tid:m,content:f,timestamp:_,unreadCount:h}),n.user.visitor&&Tt.$emit(u.EVENT_BUS_NOTIFICATION_INFO,n)}else n.thread.type===u.THREAD_TYPE_CONTACT?Tt.$emit(u.EVENT_BUS_NOTIFICATION_CONTACT_MESSAGE,n):n.thread.type===u.THREAD_TYPE_GROUP&&Tt.$emit(u.EVENT_BUS_NOTIFICATION_GROUP_MESSAGE,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_CONNECT||n.type===u.MESSAGE_TYPE_NOTIFICATION_DISCONNECT){var g=n.thread,v=g.tid,E=g.content,T=g.timestamp,b=g.unreadCount;i("UPDATE_THREAD_CONTENT",{tid:v,content:E,timestamp:T,unreadCount:b})}else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_AGENT_CLOSE||n.type===u.MESSAGE_TYPE_NOTIFICATION_VISITOR_CLOSE||n.type===u.MESSAGE_TYPE_NOTIFICATION_AUTO_CLOSE){console.log("关闭会话"),i("ADD_USER_MESSAGE",{message:n});var S=n.thread.tid;i("CLOSE_USER_THREAD",{tid:S});var C=n.thread;C.tid===o.user.current_thread.tid&&Tt.$emit(u.EVENT_BUS_MESSAGE_SCROLL_TO_BOTTOM);var y=C.content,I=C.timestamp,w=C.unreadCount;i("UPDATE_THREAD_CONTENT",{tid:S,content:y,timestamp:I,unreadCount:w})}else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_INVITE_RATE)console.log("邀请评价"),i("ADD_USER_MESSAGE",{message:n}),Tt.$emit(u.EVENT_BUS_MESSAGE_SCROLL_TO_BOTTOM);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_RATE_RESULT)i("ADD_USER_MESSAGE",{message:n}),Tt.$emit(u.EVENT_BUS_NOTIFICATION_SUCCESS,"访客已评价"),Tt.$emit(u.EVENT_BUS_MESSAGE_SCROLL_TO_BOTTOM);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_INVITE)console.log("邀请会话"),Tt.$emit(u.EVENT_BUS_NOTIFICATION_INVITE,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_INVITE_ACCEPT)console.log("接受邀请"),Tt.$emit(u.EVENT_BUS_NOTIFICATION_INVITE_ACCEPT,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_INVITE_REJECT)console.log("拒绝邀请"),Tt.$emit(u.EVENT_BUS_NOTIFICATION_INVITE_REJECT,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_TRANSFER)console.log("转接会话"),Tt.$emit(u.EVENT_BUS_NOTIFICATION_TRANSFER,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_TRANSFER_ACCEPT)console.log("接受转接"),Tt.$emit(u.EVENT_BUS_NOTIFICATION_TRANSFER_ACCEPT,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_TRANSFER_REJECT)console.log("拒绝转接"),Tt.$emit(u.EVENT_BUS_NOTIFICATION_TRANSFER_REJECT,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_ACCEPT_STATUS)console.log("在线状态变化");else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_BROWSE_START){console.log("访客开始浏览网页");var A=n.browse;i("ADD_USER_BROWSE",{browse:A})}else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_BROWSE_END){console.log("访客关闭网页");var k=n.browse;i("DELETE_USER_BROWSE",{browse:k})}else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_BROWSE_INVITE_ACCEPT){console.log("访客接受邀请");var R=n.thread;i("ADD_USER_THREAD",{thread:R});var N="thread."+R.tid;t({commit:i,state:o},N)}else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_BROWSE_INVITE_REJECT)console.log("访客拒绝邀请");else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_PREVIEW)console.log("消息预知"),n.user.visitor&&Tt.$emit(u.EVENT_BUS_MESSAGE_PREVIEW,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_RECEIPT)console.log("收到消息回执"),Tt.$emit(u.EVENT_BUS_MESSAGE_RECEIPT,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_KICKOFF)console.log("踢掉其他客户端");else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_INVITE)console.log("通知初始化localStream"),Tt.$emit(u.EVENT_BUS_MESSAGE_WEBRTC_INVITE,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_CANCEL)console.log("webrtc取消邀请"),Tt.$emit(u.EVENT_BUS_MESSAGE_WEBRTC_CANCEL,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_OFFER_VIDEO)console.log("webrtc邀请视频会话"),Tt.$emit(u.EVENT_BUS_MESSAGE_WEBRTC_OFFER_VIDEO,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_OFFER_AUDIO)console.log("webrtc邀请音频会话"),Tt.$emit(u.EVENT_BUS_MESSAGE_WEBRTC_OFFER_AUDIO,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_ANSWER)console.log("接受webrtc邀请"),Tt.$emit(u.EVENT_BUS_MESSAGE_WEBRTC_ANSWER,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_CANDIDATE)console.log("webrtccandidate信息"),Tt.$emit(u.EVENT_BUS_MESSAGE_WEBRTC_CANDIDATE,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_ACCEPT)console.log("接受webrtc邀请"),Tt.$emit(u.EVENT_BUS_MESSAGE_WEBRTC_ACCEPT,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_REJECT)console.log("拒绝webrtc邀请"),Tt.$emit(u.EVENT_BUS_MESSAGE_WEBRTC_REJECT,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_READY)console.log("被邀请方视频设备 + peeConnection已经就绪"),Tt.$emit(u.EVENT_BUS_MESSAGE_WEBRTC_READY,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_BUSY)console.log("webrtc忙线"),Tt.$emit(u.EVENT_BUS_MESSAGE_WEBRTC_BUSY,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_CLOSE)console.log("结束webrtc会话"),Tt.$emit(u.EVENT_BUS_MESSAGE_WEBRTC_CLOSE,n);else if(n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_CREATE){console.log("创建群组");var O=n.thread.group;i("ADD_USER_GROUP",{group:O}),Tt.$emit(u.EVENT_BUS_GROUP_ADDED,O);var x="group."+O.gid;t({commit:i,state:o},x)}else n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_UPDATE?console.log("更新群名称、简介等"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_ANNOUNCEMENT?console.log("群公告"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_INVITE?console.log("邀请多人加入群"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_INVITE_ACCEPT?console.log("受邀请：同意"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_INVITE_REJECT?console.log("受邀请：拒绝"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_APPLY?console.log("主动申请加入群组"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_APPLY_APPROVE?console.log("同意：主动申请加群"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_APPLY_DENY?console.log("拒绝：主动申请加群"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_KICK?console.log("踢人"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_MUTE?console.log("禁言"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_TRANSFER?console.log("移交群组"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_TRANSFER_ACCEPT?console.log("移交群组：同意、接受"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_TRANSFER_REJECT?console.log("移交群组：拒绝"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_WITHDRAW?console.log("退出群组"):n.type===u.MESSAGE_TYPE_NOTIFICATION_GROUP_DISMISS?console.log("解散群组"):(console.log("other message:",n),Tt.$emit(u.EVENT_BUS_MESSAGE_SCROLL_TO_BOTTOM))});i("SUBSCRIBE_TOPIC",{topic:n,subscription:a})}},li=function(t,e){for(var n=t.commit,i=t.state,o=i.user.subscribed_topics.length-1;o>=0;o--){var a=i.user.subscribed_topics[o];if(a.topic===e)a.subscription.unsubscribe()}n("UNSUBSCRIBE_TOPIC",{topic:e})},ci=function(t,e){t.commit,t.state;At.subscribe("/user/queue/"+e,function(t){console.log("queue:",e,":",t,"body:",t.body)})},ui=function(t){t.commit,t.state;At.disconnect(function(){console.log("stomp disconnect")})},di=n("bOdI"),pi=n.n(di),mi=(wt={},pi()(wt,"INIT",function(t){var e=localStorage.getItem("LOCALSTORAGE_PASSPORT_TOKEN_KEY");e&&(t.passport.token=JSON.parse(e),localStorage.access_token=t.passport.token.access_token)}),pi()(wt,"UPDATE_SHOW_AUTHORITY",function(t){t.user.show_authority.home=!1,t.user.show_authority.statistic=!1,t.user.show_authority.chat=!0,t.user.show_authority.thread=!0,t.user.show_authority.visitor=!0,t.user.show_authority.history=!0,t.user.show_authority.monitor=!1,t.user.show_authority.quality=!1,t.user.show_authority.robot=!1,t.user.show_authority.support=!1,t.user.show_authority.setting=!0,t.user.show_authority.feedback=!1,t.user.show_authority.workorder=!1,t.user.show_authority.callcenter=!1,t.user.show_authority.crm=!1,t.user.show_authority.wenjuan=!1,t.user.show_authority.internal=!1,t.user.show_authority.admin=!1,t.user.show_authority.debug=!1,t.user.show_authority.free=!1,t.user.show_authority.try=!1,t.user.show_authority.vip=!1;for(var e=0;e<t.user.info.roles.length;e++){var n=t.user.info.roles[e];n.value===u.ROLE_SUPER&&(t.user.show_authority.debug=!0,t.user.show_authority.admin=!0),n.value===u.ROLE_ADMIN&&(t.user.show_authority.admin=!0),n.value===u.ROLE_FREE&&(t.user.show_authority.free=!0),n.value===u.ROLE_TRY&&(t.user.show_authority.admin=!0,t.user.show_authority.try=!0),n.value===u.ROLE_VIP&&(t.user.show_authority.admin=!0,t.user.show_authority.vip=!0),n.value!==u.ROLE_SUPER&&n.value!==u.ROLE_VIP&&n.value!==u.ROLE_TRY||(t.user.show_authority.home=!0,t.user.show_authority.statistic=!0,t.user.show_authority.history=!0,t.user.show_authority.monitor=!0,t.user.show_authority.quality=!0,t.user.show_authority.robot=!0,t.user.show_authority.support=!0,t.user.show_authority.feedback=!0,t.user.show_authority.workorder=!0,t.user.show_authority.callcenter=!0,t.user.show_authority.crm=!0,t.user.show_authority.wenjuan=!0,t.user.show_authority.internal=!0)}}),pi()(wt,"PERSIST_AUTO_REPLY",function(t,e){var n=e.info;t.user.info=n}),pi()(wt,"PERSIST_USER_INFO",function(t,e){var n=e.info;t.user.info=n}),pi()(wt,"PERSIST_ACCEPT_STATUS",function(t,e){var n=e.status;t.user.info.acceptStatus=n}),pi()(wt,"PERSIST_USER_THREADS",function(t,e){var n=e.threads;t.user.threads=n;for(var i=0;i<n.length;i++){var o=n[i];o.current&&this.commit("UPDATE_CURRENT_THREAD",{thread:o})}}),pi()(wt,"ADD_USER_THREAD",function(t,e){for(var n=e.thread,i=t.user.threads.length-1;i>=0;i--){t.user.threads[i].visitor.uid===n.visitor.uid&&t.user.threads.splice(i,1)}t.user.threads.some(function(t){return n.tid===t.tid})||t.user.threads.unshift(n)}),pi()(wt,"CLOSE_USER_THREAD",function(t,e){for(var n=e.tid,i=t.user.threads.length-1;i>=0;i--)t.user.threads[i].tid===n&&(t.user.threads[i].closed=!0);t.user.current_thread.tid===n&&(t.user.current_thread.id=0,t.user.current_thread.tid="")}),pi()(wt,"REMOVE_USER_THREAD",function(t,e){for(var n=e.tid,i=t.user.threads.length-1;i>=0;i--)t.user.threads[i].tid===n&&t.user.threads.splice(i,1)}),pi()(wt,"PERSIST_USER_QUEUES",function(t,e){var n=e.queues;t.user.queues=n}),pi()(wt,"ADD_USER_QUEUE",function(t,e){var n=e.queue;t.user.queues.content.some(function(t){return t.qid===n.qid})||t.user.queues.content.unshift(n)}),pi()(wt,"ACCEPT_USER_QUEUE",function(t,e){for(var n=e.qid,i=0;i<t.user.queues.content.length;i++){t.user.queues.content[i].qid===n&&t.user.queues.content.splice(i,1)}}),pi()(wt,"PERSIST_USER_CONTACTS",function(t,e){var n=e.contacts;t.user.contacts=n}),pi()(wt,"UPDATE_CURRENT_CONTACT",function(t,e){var n=e.contact;t.user.current_contact=n}),pi()(wt,"UPDATE_THREAD_CONTENT",function(t,e){for(var n=e.tid,i=e.content,o=e.timestamp,a=e.unreadCount,r=t.user.threads.length-1;r>=0;r--)t.user.threads[r].tid===n&&(t.user.threads[r].content=i,t.user.threads[r].timestamp=o,t.user.threads[r].unreadCount=a)}),pi()(wt,"PERSIST_USER_WORKGROUPS",function(t,e){var n=e.workGroups;t.user.workGroups=n}),pi()(wt,"PERSIST_USER_GROUPS",function(t,e){var n=e.groups;t.user.groups=n}),pi()(wt,"ADD_USER_GROUP",function(t,e){var n=e.group;t.user.groups.unshift(n)}),pi()(wt,"UPDATE_CURRENT_GROUP",function(t,e){var n=e.group;t.user.current_group=n}),pi()(wt,"UPDATE_CURRENT_CHAT_TYPE",function(t,e){var n=e.type;t.user.current_chat_type=n}),pi()(wt,"ADD_USER_WORKGROUP",function(t,e){var n=e.workGroup;t.user.workGroups.some(function(t){return t.wid===n.wid})||t.user.workGroups.unshift(n)}),pi()(wt,"PERSIST_USER_MESSAGES",function(t,e){var n=e.messages;t.user.messages=n}),pi()(wt,"ADD_USER_MESSAGE",function(t,e){for(var n=e.message,i=!1,o=t.user.messages.length-1;o>=0;o--){t.user.messages[o].mid===n.mid&&(t.user.messages.splice(o,1),t.user.messages.unshift(n),i=!0)}i||t.user.messages.unshift(n)}),pi()(wt,"PERSIST_USER_BROWSES",function(t,e){var n=e.browses;t.user.browses=n}),pi()(wt,"ADD_USER_BROWSE",function(t,e){var n=e.browse;t.user.browses.content.some(function(t){return t.bid===n.bid})||(t.user.browses.content.unshift(n),t.user.browses.totalElements+=1)}),pi()(wt,"DELETE_USER_BROWSE",function(t,e){for(var n=e.browse,i=0;i<t.user.browses.content.length;i++){t.user.browses.content[i].bid===n.bid&&(t.user.browses.content.splice(i,1),t.user.browses.totalElements-=1)}}),pi()(wt,"UPDATE_USER_CONNECTION",function(t,e){var n=e.connectionStatus;t.user.settings.connection_status=n}),pi()(wt,"UPDATE_CURRENT_THREAD",function(t,e){var n=e.thread;n.current=!0,n.unreadCount=0,t.user.current_thread=n;for(var i=0;i<t.user.mores.length;i++)if(t.user.mores[i].uid===n.visitor.uid)return a.default.set(t.user.current_thread,"page",t.user.mores[i].page),a.default.set(t.user.current_thread,"first",t.user.mores[i].first),a.default.set(t.user.current_thread,"last",t.user.mores[i].last),void a.default.set(t.user.current_thread,"totalElements",t.user.mores[i].totalElements);a.default.set(t.user.current_thread,"page",0),a.default.set(t.user.current_thread,"first",!0),a.default.set(t.user.current_thread,"last",!1),a.default.set(t.user.current_thread,"totalElements",0);var o={uid:n.visitor.uid,page:0,first:!0,last:!1,totalElements:0};t.user.mores.unshift(o)}),pi()(wt,"CLEAR_CURRENT_THREAD",function(t){t.user.current_thread.id=0}),pi()(wt,"UPDATE_LOAD_MESSAGE_PAGE",function(t,e){for(var n=e.uid,i=e.page,o=e.first,a=e.last,r=e.totalElements,s=!1,l=0;l<t.user.mores.length;l++)t.user.mores[l].uid===n&&(s=!0,t.user.mores[l].page=i+1,t.user.mores[l].first=o,t.user.mores[l].last=a,t.user.mores[l].totalElements=r,t.user.current_thread.page=i+1,t.user.current_thread.first=o,t.user.current_thread.last=a,t.user.current_thread.totalElements=r);if(!s){var c={uid:n,page:i+1,first:o,last:a,totalElements:r};t.user.mores.unshift(c)}}),pi()(wt,"PERSIST_THREADS",function(t,e){var n=e.threads;t.threads=n}),pi()(wt,"PERSIST_HISTORIES",function(t,e){var n=e.histories;t.histories=n}),pi()(wt,"PERSIST_RATES",function(t,e){var n=e.rates;t.rates=n}),pi()(wt,"PERSIST_MESSAGES",function(t,e){var n=e.messages;t.messages=n}),pi()(wt,"PERSIST_STATUSES",function(t,e){var n=e.statuses;t.statuses=n}),pi()(wt,"PERSIST_QUEUES",function(t,e){var n=e.queues;t.queues=n}),pi()(wt,"PERSIST_BROWSES",function(t,e){var n=e.browses;t.browses=n}),pi()(wt,"PERSIST_MONITORS",function(t,e){var n=e.monitors;t.monitors=n}),pi()(wt,"PERSIST_QUALITIES",function(t,e){var n=e.qualities;t.qualities=n}),pi()(wt,"PERSIST_CUWS",function(t,e){var n=e.cuws;t.cuws[0].cuwChildren=n.mine,t.cuws[1].cuwChildren=n.company,t.cuws[2].cuwChildren=n.platform}),pi()(wt,"ADD_CUW",function(t,e){var n=e.cuw,i=e.category;if(null===n)t.cuws[0].cuwChildren.unshift(i);else for(var o=i.type===u.CATEGORY_TYPE_CUW_MINE?0:1,a=0;a<t.cuws[o].cuwChildren.length;a++){var r=t.cuws[o].cuwChildren[a];if(i.id===r.id)return void t.cuws[o].cuwChildren[a].cuwChildren.unshift(n)}}),pi()(wt,"UPDATE_CUW",function(t,e){var n=e.cuw,i=e.category;if(null===n)for(var o=0;o<t.cuws[0].cuwChildren.length;o++)t.cuws[0].cuwChildren[o].id===i.id&&a.default.set(t.cuws[0].cuwChildren[o],"name",i.name);else for(var r=i.type===u.CATEGORY_TYPE_CUW_MINE?0:1,s=0;s<t.cuws[r].cuwChildren.length;s++)for(var l=t.cuws[r].cuwChildren[s],c=0;c<l.cuwChildren.length;c++)l.cuwChildren[c].id===n.id&&(a.default.set(l.cuwChildren[c],"name",n.name),a.default.set(l.cuwChildren[c],"content",n.content))}),pi()(wt,"DELETE_CUW",function(t,e){var n=e.cuw,i=e.category;if(null===n)for(var o=0;o<t.cuws[0].cuwChildren.length;o++){t.cuws[0].cuwChildren[o].id===i.id&&t.cuws[0].cuwChildren.splice(o,1)}else for(var a=i.type===u.CATEGORY_TYPE_CUW_MINE?0:1,r=0;r<t.cuws[a].cuwChildren.length;r++)for(var s=t.cuws[a].cuwChildren[r],l=0;l<s.cuwChildren.length;l++){s.cuwChildren[l].id===n.id&&s.cuwChildren.splice(l,1)}}),pi()(wt,"UPDATE_COMPANY_CURRENT_CUW_CATEGORY_ID",function(t,e){var n=e.categoryId;t.current_company_cuw_category_id=n}),pi()(wt,"PERSIST_USER_FINGERPRINTS",function(t,e){var n=e.fingerPrints;t.user.fingerPrints=n}),pi()(wt,"ADD_USER_FINGERPRINT",function(t,e){var n=e.fingerPrint;t.user.fingerPrints.push(n)}),pi()(wt,"PERSIST_AGENTS",function(t,e){var n=e.agents;t.agents=n}),pi()(wt,"PERSIST_ONLINE_AGENTS",function(t,e){var n=e.agents;t.online_agents=n}),pi()(wt,"ADD_AGENT",function(t,e){var n=e.agent;t.agents.content.some(function(t){return t.id===n.id})||t.agents.content.unshift(n)}),pi()(wt,"UPDATE_AGENT",function(t,e){for(var n=e.agent,i=t.agents.content.length-1;i>=0;i--){t.agents.content[i].id===n.id&&(t.agents.content.splice(i,1),t.agents.content.unshift(n))}}),pi()(wt,"DELETE_AGENT",function(t,e){for(var n=e.id,i=t.agents.content.length-1;i>=0;i--){t.agents.content[i].id===n&&t.agents.content.splice(i,1)}}),pi()(wt,"PERSIST_WORKGROUPS",function(t,e){var n=e.workGroups;t.workGroups=n}),pi()(wt,"ADD_WORKGROUP",function(t,e){var n=e.workGroup;t.workGroups.content.some(function(t){return t.id===n.id})||t.workGroups.content.unshift(n)}),pi()(wt,"UPDATE_WORKGROUP",function(t,e){for(var n=e.workGroup,i=t.workGroups.content.length-1;i>=0;i--){t.workGroups.content[i].id===n.id&&(t.workGroups.content.splice(i,1),t.workGroups.content.unshift(n))}}),pi()(wt,"DELETE_WORKGROUP",function(t,e){for(var n=e.id,i=t.workGroups.content.length-1;i>=0;i--){t.workGroups.content[i].id===n&&t.workGroups.content.splice(i,1)}}),pi()(wt,"PERSIST_REGIONS",function(t,e){var n=e.regions;t.regions=n}),pi()(wt,"PERSIST_COMPANIES",function(t,e){var n=e.companies;t.companies=n}),pi()(wt,"ADD_COMPANY",function(t,e){var n=e.company;t.companies.content.some(function(t){return t.id===n.id})||t.companies.content.unshift(n)}),pi()(wt,"UPDATE_COMPANY",function(t,e){for(var n=e.company,i=t.companies.content.length-1;i>=0;i--){t.companies.content[i].id===n.id&&(t.companies.content.splice(i,1),t.companies.content.unshift(n))}}),pi()(wt,"DELETE_COMPANY",function(t,e){for(var n=e.cid,i=t.companies.content.length-1;i>=0;i--){t.companies.content[i].cid===n&&t.companies.content.splice(i,1)}}),pi()(wt,"PERSIST_USER_TAGS",function(t,e){var n=e.uid,i=e.tags;t.user.userTags[n]=i}),pi()(wt,"ADD_USER_TAG",function(t,e){var n=e.tag;t.user.userTags.some(function(t){return t.id===n.id})||t.user.userTags.unshift(n)}),pi()(wt,"DELETE_USER_TAG",function(t,e){for(var n=e.id,i=0;i<t.user.userTags.length;i++){t.user.userTags[i].id===n&&t.user.userTags.splice(i,1)}}),pi()(wt,"PERSIST_CATEGORIES",function(t,e){var n=e.categories;t.categories=n}),pi()(wt,"ADD_CATEGORY",function(t,e){var n=e.category;t.categories.some(function(t){return t.id===n.id})||(t.categories.unshift(n),t.cuws[1].cuwChildren.unshift(n))}),pi()(wt,"UPDATE_CATEGORY",function(t,e){for(var n=e.category,i=t.categories.length-1;i>=0;i--){t.categories[i].id===n.id&&a.default.set(t.categories[i],"name",n.name)}}),pi()(wt,"DELETE_CATEGORY",function(t,e){for(var n=e.id,i=t.categories.length-1;i>=0;i--){t.categories[i].id===n&&t.categories.splice(i,1)}}),pi()(wt,"PERSIST_ROBOT_ANSWERS",function(t,e){var n=e.answers;t.robot.answers=n}),pi()(wt,"ADD_ROBOT_ANSWER",function(t,e){var n=e.answer;t.robot.answers.content.some(function(t){return t.id===n.id})||t.robot.answers.content.unshift(n)}),pi()(wt,"UPDATE_ROBOT_ANSWER",function(t,e){for(var n=e.answer,i=t.robot.answers.content.length-1;i>=0;i--){t.robot.answers.content[i].id===n.id&&(t.robot.answers.content.splice(i,1),t.robot.answers.content.unshift(n))}}),pi()(wt,"DELETE_ROBOT_ANSWER",function(t,e){for(var n=e.aid,i=0;i<t.robot.answers.content.length;i++){t.robot.answers.content[i].aid===n&&t.robot.answers.content.splice(i,1)}}),pi()(wt,"PERSIST_ROBOT_SYNONYMS",function(t,e){var n=e.synonyms;t.robot.synonyms=n}),pi()(wt,"ADD_ROBOT_SYNONYM",function(t,e){var n=e.synonym;t.robot.synonyms.content.some(function(t){return t.sid===n.sid})||t.robot.synonyms.content.unshift(n)}),pi()(wt,"UPDATE_ROBOT_SYNONYM",function(t,e){for(var n=e.synonym,i=t.robot.synonyms.content.length-1;i>=0;i--){t.robot.synonyms.content[i].sid===n.sid&&(t.robot.synonyms.content.splice(i,1),t.robot.synonyms.content.unshift(n))}}),pi()(wt,"DELETE_ROBOT_SYNONYM",function(t,e){for(var n=e.sid,i=0;i<t.robot.synonyms.content.length;i++){t.robot.synonyms.content[i].sid===n&&t.robot.synonyms.content.splice(i,1)}}),pi()(wt,"PERSIST_TABOOS",function(t,e){var n=e.taboos;t.taboos=n}),pi()(wt,"ADD_TABOO",function(t,e){var n=e.taboo;t.taboos.content.some(function(t){return t.sid===n.tid})||t.taboos.content.unshift(n)}),pi()(wt,"UPDATE_TABOO",function(t,e){for(var n=e.taboo,i=t.taboos.content.length-1;i>=0;i--){t.taboos.content[i].tid===n.tid&&(t.taboos.content.splice(i,1),t.taboos.content.unshift(n))}}),pi()(wt,"DELETE_TABOO",function(t,e){for(var n=e.tid,i=0;i<t.taboos.content.length;i++){t.taboos.content[i].tid===n&&t.taboos.content.splice(i,1)}}),pi()(wt,"PERSIST_FILTER_WORKGROUPS",function(t,e){var n=e.workGroups;t.filter.workGroups=n}),pi()(wt,"PERSIST_FILTER_WORKGROUP_MEMBERS",function(t,e){var n=e.workGroupMembers;t.filter.workGroupMembers=n}),pi()(wt,"PERSIST_LEAVE_MESSAGES",function(t,e){var n=e.leaveMessages;t.leaveMessages=n}),pi()(wt,"UPDATE_LEAVE_MESSAGE",function(t,e){for(var n=e.leaveMessage,i=t.leaveMessages.content.length-1;i>=0;i--){t.leaveMessages.content[i].id===n.id&&(t.leaveMessages.content.splice(i,1),t.leaveMessages.content.unshift(n))}}),pi()(wt,"DELETE_LEAVE_MESSAGE",function(t,e){for(var n=e.id,i=0;i<t.leaveMessages.length;i++){t.leaveMessages[i].id===n&&t.leaveMessages.content.splice(i,1)}}),pi()(wt,"PERSIST_SUPPORT_ARTICLES",function(t,e){var n=e.articles;t.support.articles=n}),pi()(wt,"ADD_SUPPORT_ARTICLE",function(t,e){var n=e.article;t.support.articles.content.some(function(t){return t.id===n.id})||t.support.articles.content.unshift(n)}),pi()(wt,"UPDATE_SUPPORT_ARTICLE",function(t,e){for(var n=e.article,i=t.support.articles.content.length-1;i>=0;i--){t.support.articles.content[i].id===n.id&&(t.support.articles.content.splice(i,1),t.support.articles.content.unshift(n))}}),pi()(wt,"DELETE_SUPPORT_ARTICLE",function(t,e){for(var n=e.articleId,i=t.support.articles.content.length-1;i>=0;i--){t.support.articles.content[i].id===n&&t.support.articles.content.splice(i,1)}}),pi()(wt,"PERSIST_STATISTICS",function(t,e){var n=e.statistic;t.statistic.online_agent_count=n.onlineAgentCount,t.statistic.current_thread_count=n.currentThreadCount,t.statistic.current_queue_count=n.currentQueueCount,t.statistic.today_total_thread_count=n.todayTotalThreadCount,t.statistic.today_total_queue_count=n.todayTotalQueueCount,t.statistic.today_leave_queue_count=n.todayLeaveQueueCount,t.statistic.statistic_list=n.statisticList,t.statistic.statistic_detail_list=n.statisticDetailList}),pi()(wt,"PERSIST_STATISTIC_DETAILS",function(t,e){var n=e.detail;t.statistic.statistic_detail_list=n}),pi()(wt,"PERSIST_STATISTICS_THREADS",function(t,e){var n=e.threads;t.statistic.threads=n}),pi()(wt,"PERSIST_STATISTICS_RATES",function(t,e){var n=e.rates;t.statistic.rates=n}),pi()(wt,"PERSIST_ROLES",function(t,e){var n=e.roles;t.roles=n}),pi()(wt,"PERSIST_WEBS",function(t,e){var n=e.webs;t.webs=n}),pi()(wt,"ADD_WEB",function(t,e){var n=e.web;t.webs.content.some(function(t){return t.id===n.id})||t.webs.content.unshift(n)}),pi()(wt,"UPDATE_WEB",function(t,e){for(var n=e.web,i=t.webs.content.length-1;i>=0;i--){t.webs.content[i].id===n.id&&(t.webs.content.splice(i,1),t.webs.content.unshift(n))}}),pi()(wt,"DELETE_WEB",function(t,e){for(var n=e.aid,i=t.webs.content.length-1;i>=0;i--){t.webs.content[i].aid===n&&t.webs.content.splice(i,1)}}),pi()(wt,"PERSIST_APPS",function(t,e){var n=e.apps;t.apps=n}),pi()(wt,"ADD_APP",function(t,e){var n=e.app;t.apps.content.some(function(t){return t.id===n.id})||t.apps.content.unshift(n)}),pi()(wt,"UPDATE_APP",function(t,e){for(var n=e.app,i=t.apps.content.length-1;i>=0;i--){t.apps.content[i].id===n.id&&(t.apps.content.splice(i,1),t.apps.content.unshift(n))}}),pi()(wt,"DELETE_APP",function(t,e){for(var n=e.aid,i=t.apps.content.length-1;i>=0;i--){t.apps.content[i].aid===n&&t.apps.content.splice(i,1)}}),pi()(wt,"PERSIST_MPS",function(t,e){var n=e.mps;t.mps=n}),pi()(wt,"ADD_MP",function(t,e){var n=e.mp;t.mps.content.some(function(t){return t.id===n.id})||t.mps.content.unshift(n)}),pi()(wt,"UPDATE_MP",function(t,e){for(var n=e.mp,i=t.mps.content.length-1;i>=0;i--){t.mps.content[i].id===n.id&&(t.mps.content.splice(i,1),t.mps.content.unshift(n))}}),pi()(wt,"DELETE_MP",function(t,e){for(var n=e.wid,i=t.mps.content.length-1;i>=0;i--){t.mps.content[i].wid===n&&t.mps.content.splice(i,1)}}),pi()(wt,"PERSIST_MINIS",function(t,e){var n=e.minis;t.minis=n}),pi()(wt,"ADD_MINI",function(t,e){var n=e.mini;t.minis.content.some(function(t){return t.id===n.id})||t.minis.content.unshift(n)}),pi()(wt,"UPDATE_MINI",function(t,e){for(var n=e.mini,i=t.minis.content.length-1;i>=0;i--){t.minis.content[i].id===n.id&&(t.minis.content.splice(i,1),t.minis.content.unshift(n))}}),pi()(wt,"DELETE_MINI",function(t,e){for(var n=e.wid,i=t.minis.content.length-1;i>=0;i--){t.minis.content[i].wid===n&&t.minis.content.splice(i,1)}}),pi()(wt,"PERSIST_PASSPORT_TOKEN",function(t,e){var n=e.token;t.passport.token=n,localStorage.access_token=n.access_token,localStorage.setItem("LOCALSTORAGE_PASSPORT_TOKEN_KEY",Et()(n))}),pi()(wt,"LOGOUT",function(t){localStorage.removeItem("access_token"),localStorage.removeItem("LOCALSTORAGE_PASSPORT_TOKEN_KEY"),t.passport.token.access_token=""}),pi()(wt,"SUBSCRIBE_TOPIC",function(t,e){var n=e.topic,i=e.subscription;if(!t.user.subscribed_topics.some(function(t){return n===t.topic})){var o={topic:n,subscription:i};t.user.subscribed_topics.push(o)}}),pi()(wt,"UNSUBSCRIBE_TOPIC",function(t,e){for(var n=e.topic,i=t.user.subscribed_topics.length-1;i>=0;i--){t.user.subscribed_topics[i].topic===n&&t.user.subscribed_topics.splice(i,1)}}),pi()(wt,"CLEAR_TOPIC",function(t){t.user.subscribed_topics=[]}),pi()(wt,"CHANGE_CURRENT_MAIN_VIEW",function(t,e){var n=e.view;t.current_main_view=n}),wt),fi={passport:{token:{access_token:"",expires_in:0,jti:"",refresh_token:"",scope:"",token_type:""}},user:{info:{uid:"",username:"",nickname:"",realName:"",avatar:"",email:"",mobile:"",subDomain:"",imStatus:"",acceptStatus:"",autoReplyContent:"",connectionStatus:"",roles:[]},current_chat_type:"thread",contacts:[],current_contact:{id:0,username:"",nickname:"",realName:"",avatar:"",email:"",mobile:""},groups:[],current_group:{id:0},show_authority:{home:!1,statistic:!1,chat:!0,thread:!0,visitor:!0,history:!0,monitor:!1,quality:!1,robot:!1,support:!1,setting:!0,feedback:!1,workorder:!1,callcenter:!1,crm:!1,wenjuan:!1,internal:!1,admin:!1,debug:!1,free:!1,try:!1,vip:!1},queues:{content:[]},subscribed_topics:[],threads:[],current_thread:{id:0,tid:"",content:"",timestamp:"",unreadCount:0,queue:Object,visitor:{uid:"",username:"",nickname:"",avatar:u.DEFAULT_WEB_AVATAR_URL},page:0,first:!0,last:!1,totalElements:0},browses:{content:[]},workGroups:[],messages:[],drafts:[],mores:[{uid:"",page:0,first:!0,last:!0,totalElements:1}],settings:{notification:!1,connection_status:"connecting"},fingerPrints:[],userTags:[]},statistic:{online_agent_count:0,current_thread_count:0,current_queue_count:0,today_total_thread_count:0,today_total_queue_count:0,today_leave_queue_count:0,statistic_list:[],statistic_detail_list:[],threads:[],rates:[]},roles:[],threads:[],histories:[],rates:[],messages:[],leaveMessages:[],statuses:[],queues:[],browses:[],monitors:[],qualities:[],agents:{content:[]},online_agents:{content:[]},workGroups:{content:[]},regions:{provinces:[],cities:[]},companies:{content:[]},categories:[],cuws:[{id:0,name:"我的",cuwChildren:[]},{id:-1,name:"公司",cuwChildren:[]},{id:-2,name:"默认",cuwChildren:[]}],current_company_cuw_category_id:0,robot:{answers:[],synonyms:[]},support:{articles:[],comments:[]},filter:{workGroups:[],workGroupMembers:[]},questionnaire:[],taboos:[],webs:[],apps:[],mps:[],minis:[],current_main_view:"",more_template:{username:0,page:0,last:!1},draft_templage:{thread_id:0,content:""},cuw_template:{id:0,type:"",title:"",content:"",children:[]},message_templage:{id:0,user:{username:"",nickname:"",avatar:""},type:"",role:"",content:"",pic_url:"",image_url:"",media_id:"",format:"",voice_url:"",length:0,is_played:!1,thumb_media_id:"",video_or_short_url:"",video_or_short_thumb_url:"",location_x:"",location_y:"",scale:"",label:"",title:"",description:"",url:"",client:"",thread:Object,timestamp:"",local_id:"",status:""},emotionWxTextMap:{"/::)":"[微笑]","/::~":"[撇嘴]","/::B":"[色]","/::|":"[发呆]","/:8-)":"[得意]","/::<":"[流泪]","/::$":"[害羞]","/::X":"[闭嘴]","/::Z":"[睡]","/::'(":"[大哭]","/::-|":"[尴尬]","/::@":"[发怒]","/::P":"[调皮]","/::D":"[呲牙]","/::O":"[惊讶]","/::(":"[难过]","/::+":"[酷]","/:-b":"[冷汗]","/::Q":"[抓狂]","/::T":"[吐]","/:,@P":"[偷笑]","/:,@-D":"[愉快]","/::d":"[白眼]","/:,@o":"[傲慢]","/::g":"[饥饿]","/:|-)":"[困]","/::!":"[惊恐]","/::L":"[流汗]","/::>":"[憨笑]","/::,@":"[悠闲]","/:,@f":"[奋斗]","/::-S":"[咒骂]","/:?":"[疑问]","/:,@x":"[嘘]","/:,@@":"[晕]","/::8":"[疯了]","/:,@!":"[衰]","/:!!!":"[骷髅]","/:xx":"[敲打]","/:bye":"[再见]","/:wipe":"[擦汗]","/:dig":"[抠鼻]","/:handclap":"[鼓掌]","/:&-(":"[糗大了]","/:B-)":"[坏笑]","/:<@":"[左哼哼]","/:@>":"[右哼哼]","/::-O":"[哈欠]","/:>-|":"[鄙视]","/:P-(":"[委屈]","/::’|":"[快哭]","/:X-)":"[阴险]","/::*":"[亲亲]","/:@x":"[吓]","/:8*":"[可怜]","/:pd":"[菜刀]","/:<W>":"[西瓜]","/:beer":"[啤酒]","/:basketb":"[篮球]","/:oo":"[乒乓]","/:coffee":"[咖啡]","/:eat":"[饭]","/:pig":"[猪头]","/:rose":"[玫瑰]","/:fade":"[凋谢]","/:showlove":"[嘴唇]","/:heart":"[爱心]","/:break":"[心碎]","/:cake":"[蛋糕]","/:li":"[闪电]","/:bome":"[炸弹]","/:kn":"[刀]","/:footb":"[足球]","/:ladybug":"[瓢虫]","/:shit":"[便便]","/:moon":"[月亮]","/:sun":"[太阳]","/:gift":"[礼物]","/:hug":"[拥抱]","/:strong":"[强]","/:weak":"[弱]","/:share":"[握手]","/:v":"[胜利]","/:@)":"[抱拳]","/:jj":"[勾引]","/:@@":"[拳头]","/:bad":"[差劲]","/:lvu":"[爱你]","/:no":"[No]","/:ok":"[OK]","/:love":"[爱情]","/:<L>":"[飞吻]","/:jump":"[跳跳]","/:shake":"[发抖]","/:<O>":"[怄火]","/:circle":"[转圈]","/:kotow":"[磕头]","/:turn":"[回头]","/:skip":"[跳绳]","/:oY":"[投降]","/:#-0":"[激动]","/:hiphot":"[乱舞]","/:kiss":"[献吻]","/:<&":"[左太极]","/:&>":"[右太极]"},emotionWxMap:{"/::)":"100.gif","/::~":"101.gif","/::B":"102.gif","/::|":"103.gif","/:8-)":"104.gif","/::<":"105.gif","/::$":"106.gif","/::X":"107.gif","/::Z":"108.gif","/::'(":"109.gif","/::-|":"110.gif","/::@":"111.gif","/::P":"112.gif","/::D":"113.gif","/::O":"114.gif","/::(":"115.gif","/::+":"116.gif","/:-b":"117.gif","/::Q":"118.gif","/::T":"119.gif","/:,@P":"120.gif","/:,@-D":"121.gif","/::d":"122.gif","/:,@o":"123.gif","/::g":"124.gif","/:|-)":"125.gif","/::!":"126.gif","/::L":"127.gif","/::>":"128.gif","/::,@":"129.gif","/:,@f":"130.gif","/::-S":"131.gif","/:?":"132.gif","/:,@x":"133.gif","/:,@@":"134.gif","/::8":"135.gif","/:,@!":"136.gif","/:!!!":"137.gif","/:xx":"138.gif","/:bye":"139.gif","/:wipe":"140.gif","/:dig":"141.gif","/:handclap":"142.gif","/:&-(":"143.gif","/:B-)":"144.gif","/:<@":"145.gif","/:@>":"146.gif","/::-O":"147.gif","/:>-|":"148.gif","/:P-(":"149.gif","/::’|":"150.gif","/:X-)":"151.gif","/::*":"152.gif","/:@x":"153.gif","/:8*":"154.gif","/:pd":"155.gif","/:<W>":"156.gif","/:beer":"157.gif","/:basketb":"158.gif","/:oo":"159.gif","/:coffee":"160.gif","/:eat":"161.gif","/:pig":"162.gif","/:rose":"163.gif","/:fade":"164.gif","/:showlove":"165.gif","/:heart":"166.gif","/:break":"167.gif","/:cake":"168.gif","/:li":"169.gif","/:bome":"170.gif","/:kn":"171.gif","/:footb":"172.gif","/:ladybug":"173.gif","/:shit":"174.gif","/:moon":"175.gif","/:sun":"176.gif","/:gift":"177.gif","/:hug":"178.gif","/:strong":"179.gif","/:weak":"180.gif","/:share":"181.gif","/:v":"182.gif","/:@)":"183.gif","/:jj":"184.gif","/:@@":"185.gif","/:bad":"186.gif","/:lvu":"187.gif","/:no":"188.gif","/:ok":"189.gif","/:love":"190.gif","/:<L>":"191.gif","/:jump":"192.gif","/:shake":"193.gif","/:<O>":"194.gif","/:circle":"195.gif","/:kotow":"196.gif","/:turn":"197.gif","/:skip":"198.gif","/:oY":"199.gif","/:#-0":"200.gif","/:hiphot":"201.gif","/:kiss":"202.gif","/:<&":"203.gif","/:&>":"204.gif"},emotionMap:{"[微笑]":"100.gif","[撇嘴]":"101.gif","[色]":"102.gif","[发呆]":"103.gif","[得意]":"104.gif","[流泪]":"105.gif","[害羞]":"106.gif","[闭嘴]":"107.gif","[睡]":"108.gif","[大哭]":"109.gif","[尴尬]":"110.gif","[发怒]":"111.gif","[调皮]":"112.gif","[呲牙]":"113.gif","[惊讶]":"114.gif","[难过]":"115.gif","[酷]":"116.gif","[冷汗]":"117.gif","[抓狂]":"118.gif","[吐]":"119.gif","[偷笑]":"120.gif","[愉快]":"121.gif","[白眼]":"122.gif","[傲慢]":"123.gif","[饥饿]":"124.gif","[困]":"125.gif","[惊恐]":"126.gif","[流汗]":"127.gif","[憨笑]":"128.gif","[悠闲]":"129.gif","[奋斗]":"130.gif","[咒骂]":"131.gif","[疑问]":"132.gif","[嘘]":"133.gif","[晕]":"134.gif","[疯了]":"135.gif","[衰]":"136.gif","[骷髅]":"137.gif","[敲打]":"138.gif","[再见]":"139.gif","[擦汗]":"140.gif","[抠鼻]":"141.gif","[鼓掌]":"142.gif","[糗大了]":"143.gif","[坏笑]":"144.gif","[左哼哼]":"145.gif","[右哼哼]":"146.gif","[哈欠]":"147.gif","[鄙视]":"148.gif","[委屈]":"149.gif","[快哭]":"150.gif","[阴险]":"151.gif","[亲亲]":"152.gif","[吓]":"153.gif","[可怜]":"154.gif","[菜刀]":"155.gif","[西瓜]":"156.gif","[啤酒]":"157.gif","[篮球]":"158.gif","[乒乓]":"159.gif","[咖啡]":"160.gif","[饭]":"161.gif","[猪头]":"162.gif","[玫瑰]":"163.gif","[凋谢]":"164.gif","[嘴唇]":"165.gif","[爱心]":"166.gif","[心碎]":"167.gif","[蛋糕]":"168.gif","[闪电]":"169.gif","[炸弹]":"170.gif","[刀]":"171.gif","[足球]":"172.gif","[瓢虫]":"173.gif","[便便]":"174.gif","[月亮]":"175.gif","[太阳]":"176.gif","[礼物]":"177.gif","[拥抱]":"178.gif","[强]":"179.gif","[弱]":"180.gif","[握手]":"181.gif","[胜利]":"182.gif","[抱拳]":"183.gif","[勾引]":"184.gif","[拳头]":"185.gif","[差劲]":"186.gif","[爱你]":"187.gif","[No]":"188.gif","[OK]":"189.gif","[爱情]":"190.gif","[飞吻]":"191.gif","[跳跳]":"192.gif","[发抖]":"193.gif","[怄火]":"194.gif","[转圈]":"195.gif","[磕头]":"196.gif","[回头]":"197.gif","[跳绳]":"198.gif","[投降]":"199.gif","[激动]":"201.gif","[乱舞]":"202.gif","[献吻]":"203.gif","[左太极]":"204.gif","[右太极]":"205.gif"},emojis:[{title:"[微笑]",file:"100.gif"},{title:"[撇嘴]",file:"101.gif"},{title:"[色]",file:"102.gif"},{title:"[发呆]",file:"103.gif"},{title:"[得意]",file:"104.gif"},{title:"[流泪]",file:"105.gif"},{title:"[害羞]",file:"106.gif"},{title:"[闭嘴]",file:"107.gif"},{title:"[睡]",file:"108.gif"},{title:"[大哭]",file:"109.gif"},{title:"[尴尬]",file:"110.gif"},{title:"[发怒]",file:"111.gif"},{title:"[调皮]",file:"112.gif"},{title:"[呲牙]",file:"113.gif"},{title:"[惊讶]",file:"114.gif"},{title:"[难过]",file:"115.gif"},{title:"[酷]",file:"116.gif"},{title:"[冷汗]",file:"117.gif"},{title:"[抓狂]",file:"118.gif"},{title:"[吐]",file:"119.gif"},{title:"[偷笑]",file:"120.gif"},{title:"[愉快]",file:"121.gif"},{title:"[白眼]",file:"122.gif"},{title:"[傲慢]",file:"123.gif"},{title:"[饥饿]",file:"124.gif"},{title:"[困]",file:"125.gif"},{title:"[惊恐]",file:"126.gif"},{title:"[流汗]",file:"127.gif"},{title:"[憨笑]",file:"128.gif"},{title:"[悠闲]",file:"129.gif"},{title:"[奋斗]",file:"130.gif"},{title:"[咒骂]",file:"131.gif"},{title:"[疑问]",file:"132.gif"},{title:"[嘘]",file:"133.gif"},{title:"[晕]",file:"134.gif"},{title:"[疯了]",file:"135.gif"},{title:"[衰]",file:"136.gif"},{title:"[骷髅]",file:"137.gif"},{title:"[敲打]",file:"138.gif"},{title:"[再见]",file:"139.gif"},{title:"[擦汗]",file:"140.gif"},{title:"[抠鼻]",file:"141.gif"},{title:"[鼓掌]",file:"142.gif"},{title:"[糗大了]",file:"143.gif"},{title:"[坏笑]",file:"144.gif"},{title:"[左哼哼]",file:"145.gif"},{title:"[右哼哼]",file:"146.gif"},{title:"[哈欠]",file:"147.gif"},{title:"[鄙视]",file:"148.gif"},{title:"[委屈]",file:"149.gif"},{title:"[快哭]",file:"150.gif"},{title:"[阴险]",file:"151.gif"},{title:"[亲亲]",file:"152.gif"},{title:"[吓]",file:"153.gif"}]};a.default.use(c.a);var _i=new c.a.Store({state:fi,getters:i,actions:o,mutations:mi,strict:!1}),hi={name:"cm-header",data:function(){return{activeIndex:"0",homeUrl:u.HOME_URL,chatUrl:u.CHAT_URL,helpUrl:u.HELP_URL,downloadUrl:u.DOWNLOAD_URL,title:u.DEFAULT_TITLE,electron:u.IS_ELECTRON}},methods:{handleSelect:function(t,e){"home"===t?this.electron?ipcRenderer.send("open-external-url",this.homeUrl):window.open(this.homeUrl):"login"===t?this.$router.push("/login"):"register"===t?this.$router.push("/register"):"forget"===t?this.$router.push("/forget"):"chat"===t?this.electron?ipcRenderer.send("open-external-url",this.chatUrl):window.open(this.chatUrl):"help"===t?this.electron?ipcRenderer.send("open-external-url",this.helpUrl):window.open(this.helpUrl):"download"===t&&(this.electron?ipcRenderer.send("open-external-url",this.downloadUrl):window.open(this.downloadUrl))}}},gi={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"cm-header"}},[n("el-menu",{staticClass:"el-menu-demo",staticStyle:{"padding-left":"25px","margin-left":"-20px","margin-right":"-20px","padding-right":"30px"},attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":"#007bff","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[n("el-menu-item",{attrs:{index:"home"}},[n("template",{slot:"title"},[t._v(t._s(t.title))])],2),t._v(" "),n("el-menu-item",{attrs:{index:"login"}},[n("template",{slot:"title"},[t._v("登录")])],2),t._v(" "),n("el-menu-item",{attrs:{index:"register"}},[n("template",{slot:"title"},[t._v("注册")])],2),t._v(" "),n("el-menu-item",{attrs:{index:"forget"}},[n("template",{slot:"title"},[t._v("找回密码")])],2),t._v(" "),n("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"download"}},[n("template",{slot:"title"},[t._v("下载客户端")])],2),t._v(" "),n("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"help"}},[n("template",{slot:"title"},[t._v("帮助文档")])],2),t._v(" "),n("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"chat"}},[n("template",{slot:"title"},[t._v("联系客服")])],2)],1)],1)},staticRenderFns:[]};var vi=n("VU/8")(hi,gi,!1,function(t){n("XI/4")},"data-v-5b399164",null).exports,Ei={name:"cm-footer",data:function(){return{url:u.HOME_URL,electron:u.IS_ELECTRON}},methods:{gotoHomeUrl:function(){this.electron?ipcRenderer.send("open-external-url",this.url):window.open(this.url)}}},Ti={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"cm-footer"}},[t.electron?t._e():n("p",[n("a",{attrs:{href:t.url,target:"_blank"}},[t._v("北京微语天下科技有限公司")])]),t._v(" "),t.electron?n("p",{staticStyle:{cursor:"pointer"}},[n("a",{on:{click:t.gotoHomeUrl}},[t._v("北京微语天下科技有限公司")])]):t._e(),t._v(" "),n("p",[t._v("京ICP备17041763号-2")]),t._v(" "),t.electron?t._e():n("p")])},staticRenderFns:[]};var bi={name:"bd-auth",components:{CmHeader:vi,CmFooter:n("VU/8")(Ei,Ti,!1,function(t){n("gbdC")},"data-v-4dc523b9",null).exports}},Si={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"bd-auth"}},[e("el-container",[e("el-header",[e("cm-header")],1),this._v(" "),e("el-main",[e("transition",{attrs:{mode:"out-in","enter-active-class":"fadeIn","leave-active-class":"fadeOut",appear:""}},[e("router-view",{staticClass:"animated"})],1)],1),this._v(" "),e("el-footer",{staticStyle:{height:"150px"}},[e("cm-footer")],1)],1)],1)},staticRenderFns:[]};var Ci=n("VU/8")(bi,Si,!1,function(t){n("PSoF")},"data-v-6b1a37e6",null).exports,yi=n("Dd8w"),Ii=n.n(yi),wi={name:"bd-header",data:function(){var t=this;return{activeIndex:"0",isCollapse:!0,changePasswordDialogVisible:!1,searchContent:"",form:{old:"",password:"",rePassword:""},rules:{old:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符之间",trigger:"blur"},{validator:function(e,n,i){""===n?i(new Error("请输入密码")):(""!==t.form.rePassword&&t.$refs.form.validateField("rePassword"),i())},trigger:"blur"}],rePassword:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:function(e,n,i){n!==t.form.password?i(new Error("两次输入密码不一致!")):i()},trigger:"blur"}]},autoReplyContent:u.AUTO_REPLY_NO,noAuto:u.AUTO_REPLY_NO,autoReplyEat:u.AUTO_REPLY_EAT,autoReplyLeave:u.AUTO_REPLY_LEAVE,autoReplyBack:u.AUTO_REPLY_BACK,autoReplyPhone:u.AUTO_REPLY_PHONE,autoReplySelf:u.AUTO_REPLY_SELF,autoReplyDialogVisible:!1,autoReplySelfContent:"",title:u.DEFAULT_TITLE,headerColor:"#007bff",predefineColors:["#ffd700","rgb(255, 120, 0)","#ff4500","#c71585","#90ee90","#00ced1","#1e90ff","rgba(0, 123, 255, 1)"]}},computed:Ii()({},Object(c.c)(["userInfo","accessToken","status","showAuthority"]),{onlineStatus:function(){return this.status===u.USER_STATUS_ONLINE?"在线":this.status===u.USER_STATUS_BUSY?"忙线":"小休"}}),methods:Ii()({},Object(c.b)(["setAcceptStatus","applyTry","logout","updateAutoReply"]),{onApplyTry:function(){var t=this;this.$prompt("请输入手机号码","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var n=e.value;t.applyTry(n)}).catch(function(){})},onPayVip:function(){console.log("pay vip")},onChange:function(t){localStorage.headerColor=t},onActiveChange:function(t){},doSelfAutoReply:function(){this.autoReplyDialogVisible=!1;var t={isAutoReply:!0,content:this.autoReplySelfContent};this.updateAutoReply(t)},doChangePassword:function(){var t=this;this.$refs.form.validate(function(e){e&&function(t,e,n,i){axios.post("/api/user/change/password?access_token="+e,{password:t}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(t.form.password,t.accessToken,function(e){console.log(e),t.changePasswordDialogVisible=!1},function(t){console.log(t)})})},handleSelect:function(t,e){if("home"===t)this.$router.replace("/admin");else if("1"===t)this.isCollapse=!this.isCollapse,Tt.$emit("collapse",this.isCollapse);else if("profile"===t)this.$router.replace("/admin/setting/profile");else if("password"===t)this.changePasswordDialogVisible=!0;else if("logout"===t)this.logout();else if("online"===t)this.setAcceptStatus(u.USER_STATUS_ONLINE);else if("busy"===t)this.setAcceptStatus(u.USER_STATUS_BUSY);else if("rest"===t)this.setAcceptStatus(u.USER_STATUS_REST);else if("recharge"===t)this.$router.replace("/admin/setting/pay");else if("detail"===t)this.$router.replace("/admin/setting/pay");else if("noreply"===t){this.autoReplyContent=this.noAuto;var n={isAutoReply:!1,content:this.noAuto};this.updateAutoReply(n)}else if("eat"===t){this.autoReplyContent=this.autoReplyEat;var i={isAutoReply:!0,content:this.autoReplyEat};this.updateAutoReply(i)}else if("leave"===t){this.autoReplyContent=this.autoReplyLeave;var o={isAutoReply:!0,content:this.autoReplyLeave};this.updateAutoReply(o)}else if("back"===t){this.autoReplyContent=this.autoReplyBack;var a={isAutoReply:!0,content:this.autoReplyBack};this.updateAutoReply(a)}else if("phone"===t){this.autoReplyContent=this.autoReplyPhone;var r={isAutoReply:!0,content:this.autoReplyPhone};this.updateAutoReply(r)}else"self"===t&&(this.autoReplyContent=this.autoReplySelf,this.autoReplyDialogVisible=!0)}}),created:function(){var t=localStorage.headerColor;null!=t&&(this.headerColor=t)}},Ai={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-header"}},[n("el-menu",{staticClass:"el-menu-demo",staticStyle:{"padding-left":"25px","margin-left":"-20px","margin-right":"-20px","padding-right":"30px"},attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":t.headerColor,"text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[n("el-menu-item",{attrs:{index:"home"}},[t._v("\n        "+t._s(t.title)+"\n      ")]),t._v(" "),n("el-menu-item",{attrs:{index:"1"}},[n("i",{staticClass:"el-icon-menu"})]),t._v(" "),n("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"2"}},[n("el-color-picker",{attrs:{size:"mini","show-alpha":"",predefine:t.predefineColors},on:{change:t.onChange,"active-change":t.onActiveChange},model:{value:t.headerColor,callback:function(e){t.headerColor=e},expression:"headerColor"}})],1),t._v(" "),t.showAuthority.debug?n("el-submenu",{staticStyle:{float:"right"},attrs:{index:"2-1"}},[n("template",{slot:"title"},[n("span",[t._v("中文")])]),t._v(" "),n("el-menu-item",{attrs:{index:"zh_cn"}},[t._v("中文")]),t._v(" "),n("el-menu-item",{attrs:{index:"en"}},[t._v("English")])],2):t._e(),t._v(" "),n("el-submenu",{staticStyle:{float:"right"},attrs:{index:"3"}},[n("template",{slot:"title"},[n("span",[t._v(t._s(t.userInfo.realName))])]),t._v(" "),n("el-menu-item",{attrs:{index:"profile"}},[t._v("个人资料")]),t._v(" "),n("el-menu-item",{attrs:{index:"password"}},[t._v("修改密码")]),t._v(" "),n("el-menu-item",{attrs:{index:"logout"}},[t._v("退出登录")])],2),t._v(" "),n("el-submenu",{staticStyle:{float:"right"},attrs:{index:"4"}},[n("template",{slot:"title"},[t._v(t._s(t.onlineStatus))]),t._v(" "),n("el-menu-item",{attrs:{index:"online"}},[t._v("上线")]),t._v(" "),n("el-menu-item",{attrs:{index:"busy"}},[t._v("忙线")]),t._v(" "),n("el-menu-item",{attrs:{index:"rest"}},[t._v("小休")])],2),t._v(" "),n("el-submenu",{staticStyle:{float:"right"},attrs:{index:"5"}},[n("template",{slot:"title"},[t._v(t._s(t.userInfo.autoReplyContent))]),t._v(" "),n("el-menu-item",{attrs:{index:"noreply"}},[t._v(t._s(t.noAuto))]),t._v(" "),n("el-menu-item",{attrs:{index:"eat"}},[t._v(t._s(t.autoReplyEat))]),t._v(" "),n("el-menu-item",{attrs:{index:"leave"}},[t._v(t._s(t.autoReplyLeave))]),t._v(" "),n("el-menu-item",{attrs:{index:"back"}},[t._v(t._s(t.autoReplyBack))]),t._v(" "),n("el-menu-item",{attrs:{index:"phone"}},[t._v(t._s(t.autoReplyPhone))]),t._v(" "),n("el-menu-item",{attrs:{index:"self"}},[t._v(t._s(t.autoReplySelf))])],2),t._v(" "),t.showAuthority.debug?n("el-submenu",{staticStyle:{float:"right"},attrs:{index:"6"}},[n("template",{slot:"title"},[t._v("费用")]),t._v(" "),n("el-menu-item",{attrs:{index:"recharge"}},[t._v("充值")]),t._v(" "),n("el-menu-item",{attrs:{index:"detail"}},[t._v("明细")])],2):t._e(),t._v(" "),t.showAuthority.debug?n("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"7"}},[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.onPayVip}},[t._v("成为VIP用户")])],1):t._e(),t._v(" "),t.showAuthority.free?n("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"8"}},[n("el-button",{attrs:{type:"warning",size:"mini"},on:{click:t.onApplyTry}},[t._v("申请30天试用")])],1):t._e(),t._v(" "),t.showAuthority.debug?n("el-menu-item",{attrs:{index:"9"}},[n("el-input",{attrs:{size:"mini",placeholder:"请输入内容","prefix-icon":"el-icon-search"},model:{value:t.searchContent,callback:function(e){t.searchContent=e},expression:"searchContent"}})],1):t._e()],1),t._v(" "),n("el-dialog",{attrs:{title:"自定义",visible:t.autoReplyDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.autoReplyDialogVisible=e}}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入自动回复内容"},model:{value:t.autoReplySelfContent,callback:function(e){t.autoReplySelfContent=e},expression:"autoReplySelfContent"}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.autoReplyDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.doSelfAutoReply}},[t._v("保 存")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"修改密码",visible:t.changePasswordDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.changePasswordDialogVisible=e}}},[n("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{rules:t.rules,model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"原密码",prop:"old"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{type:"password","auto-complete":"off",placeholder:"原密码"},model:{value:t.form.old,callback:function(e){t.$set(t.form,"old",e)},expression:"form.old"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"新密码",prop:"password"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{type:"password","auto-complete":"off",placeholder:"新密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"确认密码",prop:"rePassword"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{type:"password","auto-complete":"off",placeholder:"确认密码"},model:{value:t.form.rePassword,callback:function(e){t.$set(t.form,"rePassword",e)},expression:"form.rePassword"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.changePasswordDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.doChangePassword}},[t._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var ki=n("VU/8")(wi,Ai,!1,function(t){n("9Pwd")},"data-v-49248190",null).exports,Ri={name:"bd-aside",data:function(){return{isCollapse:!0,showSupport:u.SHOW_SUPPORT}},computed:Ii()({},Object(c.c)(["showAuthority"]),{showStatistic:function(){return this.showAuthority.admin&&u.SHOW_STATISTIC}}),methods:{handleOpen:function(t,e){},handleClose:function(t,e){}},mounted:function(){var t=this;Tt.$on("collapse",function(e){t.isCollapse=e})}},Ni={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"left-side"}},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",collapse:t.isCollapse,router:!0},on:{open:t.handleOpen,close:t.handleClose}},[t.showAuthority.debug?n("el-menu-item",{attrs:{index:"/admin/home"}},[n("i",{staticClass:"iconfont icon-home"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("我的首页")])]):t._e(),t._v(" "),t.showStatistic?n("el-menu-item",{attrs:{index:"/admin/statistic"}},[n("i",{staticClass:"iconfont icon-data"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("绩效数据")])]):t._e(),t._v(" "),n("el-menu-item",{attrs:{index:"/admin/chat"}},[n("i",{staticClass:"iconfont icon-agent"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("人工客服")])]),t._v(" "),t.showAuthority.admin?n("el-menu-item",{attrs:{index:"/admin/robot"}},[n("i",{staticClass:"iconfont icon-robot"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("智能客服")])]):t._e(),t._v(" "),t.showAuthority.debug?n("el-menu-item",{attrs:{index:"/admin/ticket"}},[n("i",{staticClass:"iconfont icon-workorder"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("工单系统")])]):t._e(),t._v(" "),t.showSupport?n("el-menu-item",{attrs:{index:"/admin/support"}},[n("i",{staticClass:"iconfont icon-help"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("知识库")])]):t._e(),t._v(" "),t.showAuthority.debug?n("el-menu-item",{attrs:{index:"/admin/crm"}},[n("i",{staticClass:"iconfont icon-crm"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("客户管理")])]):t._e(),t._v(" "),t.showAuthority.setting?n("el-menu-item",{attrs:{index:"/admin/setting"}},[n("i",{staticClass:"iconfont icon-setting"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("所有设置")])]):t._e(),t._v(" "),t.showAuthority.debug?n("el-submenu",{attrs:{index:""}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-location"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("二期开发")])]),t._v(" "),t.showAuthority.debug?n("el-menu-item",{attrs:{index:"/admin/wenjuan"}},[n("i",{staticClass:"iconfont icon-wenjuan"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("调查问卷")])]):t._e(),t._v(" "),t.showAuthority.debug?n("el-menu-item",{attrs:{index:"/admin/callcenter"}},[n("i",{staticClass:"iconfont icon-callcenter"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("呼叫中心")])]):t._e(),t._v(" "),t.showAuthority.debug?n("el-menu-item",{attrs:{index:"/admin/community"}},[n("i",{staticClass:"iconfont icon-community"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("讨论社区")])]):t._e(),t._v(" "),t.showAuthority.debug?n("el-menu-item",{attrs:{index:"/admin/imcloud"}},[n("i",{staticClass:"iconfont icon-imcloud"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("云通讯IM")])]):t._e(),t._v(" "),t.showAuthority.debug?n("el-menu-item",{attrs:{index:"/admin/conference"}},[n("i",{staticClass:"iconfont icon-camera"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("视频会议")])]):t._e(),t._v(" "),t.showAuthority.debug?n("el-menu-item",{attrs:{index:"/admin/everyone"}},[n("i",{staticClass:"iconfont icon-world"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("人人客服")])]):t._e(),t._v(" "),t.showAuthority.debug?n("el-menu-item",{attrs:{index:"/admin/other"}},[n("i",{staticClass:"iconfont icon-other"}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("其他功能")])]):t._e()],2):t._e()],1)],1)},staticRenderFns:[]};var Oi=n("VU/8")(Ri,Ni,!1,function(t){n("x20+")},"data-v-3f04f76b",null).exports,xi={name:"bd-footer",data:function(){return{feedDialogVisible:!1,feedContent:"",feedRate:5,homeUrl:u.HOME_URL,chatUrl:u.CHAT_URL,helpUrl:u.HELP_URL,title:u.DEFAULT_TITLE,electron:u.IS_ELECTRON,showFeedback:u.SHOW_FEEDBACK}},computed:Ii()({},Object(c.c)(["connectionStatus","showAuthority"]),{currentYear:function(){return(new Date).getFullYear()},connecting:function(){return this.connectionStatus===u.STOMP_CONNECTION_STATUS_CONNECTING},connected:function(){return this.connectionStatus===u.STOMP_CONNECTION_STATUS_CONNECTED},disconnected:function(){return this.connectionStatus===u.STOMP_CONNECTION_STATUS_DISCONNECTED},connectingImage:function(){return u.CONNECTING_IMAGE},connectedImage:function(){return u.CONNCTED_IMAGE},disconnectedImage:function(){return u.DISCONNECTED_IMAGE}}),methods:{gotoHomeUrl:function(){this.electron?ipcRenderer.send("open-external-url",this.homeUrl):window.open(this.homeUrl)},onFeedback:function(){this.feedDialogVisible=!0},onChat:function(){this.electron?ipcRenderer.send("open-external-url",this.chatUrl):window.open(this.chatUrl)},onHelp:function(){this.electron?ipcRenderer.send("open-external-url",this.helpUrl):window.open(this.helpUrl)},doSaveFeed:function(){this.feedDialogVisible=!1,this.$message({message:"多谢反馈",type:"success"})},handleClose:function(t){t()}}},Ui={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-footer"}},[t.connecting?n("span",{staticStyle:{float:"left"}},[n("i",{staticClass:"el-icon-loading"})]):t._e(),t._v(" "),t.connected?n("img",{staticClass:"bd-image",attrs:{src:t.connectedImage}}):t._e(),t._v(" "),t.disconnected?n("img",{staticClass:"bd-image",attrs:{src:t.disconnectedImage}}):t._e(),t._v(" "),n("div",{staticClass:"bd-status"},[t.connecting?n("span",{staticStyle:{color:"blue"}},[t._v("连接中...")]):t._e(),t._v(" "),t.connected?n("span",{staticStyle:{color:"green"}},[t._v("连接成功")]):t._e(),t._v(" "),t.disconnected?n("span",{staticStyle:{color:"red"}},[t._v("连接断开")]):t._e()]),t._v(" "),n("div",{staticClass:"pull-right"},[n("a",{staticStyle:{cursor:"pointer"},on:{click:t.gotoHomeUrl}},[t._v(t._s(t.title)+" © 2013 ~ "+t._s(t.currentYear))]),t._v(" "),t.showFeedback?n("span",{staticStyle:{cursor:"pointer"},on:{click:t.onFeedback}},[n("i",{staticClass:"iconfont icon-face bd-help"}),t._v(" 反馈")]):t._e(),t._v(" "),n("span",{staticStyle:{cursor:"pointer"},on:{click:t.onChat}},[n("i",{staticClass:"iconfont icon-chat bd-help"}),t._v(" 咨询")]),t._v(" "),n("span",{staticStyle:{cursor:"pointer"},on:{click:t.onHelp}},[n("i",{staticClass:"iconfont icon-help bd-help"}),t._v(" 帮助")])]),t._v(" "),n("el-dialog",{attrs:{title:"意见反馈",visible:t.feedDialogVisible,width:"30%","before-close":t.handleClose,center:""},on:{"update:visible":function(e){t.feedDialogVisible=e}}},[n("el-rate",{staticStyle:{height:"30px","text-align":"center"},attrs:{"show-text":""},model:{value:t.feedRate,callback:function(e){t.feedRate=e},expression:"feedRate"}}),t._v(" "),n("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:8},placeholder:"请输入反馈内容"},model:{value:t.feedContent,callback:function(e){t.feedContent=e},expression:"feedContent"}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.feedDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.doSaveFeed}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Pi={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-layim-msgbox"}},[this._v("\n  通知消息\n")])},staticRenderFns:[]};var Di={name:"dashboard",components:{BdHeader:ki,BdSide:Oi,BdFooter:n("VU/8")(xi,Ui,!1,function(t){n("3o+Q")},"data-v-71040ba2",null).exports,BdMsgBox:n("VU/8")({name:"bd-layim-msgbox"},Pi,!1,function(t){n("gZ/o")},"data-v-713be684",null).exports},data:function(){return{leftSideWidth:u.LEFT_SIDEBAR_WIDTH,soundUrl:u.SOUND_DINGDONG_URL,iconUrl:u.ICON_URL,homeUrl:u.HOME_URL,electron:u.IS_ELECTRON,daxuezhang:u.IS_DAXUEZHANG,showIm:u.SHOW_IM,layer:null,layim:null,layimCurrentChatType:"friend",layimCurrentChatId:"",createGroupDialogVisible:!1,messageDialogVisible:!1,selectedContacts:[]}},computed:Ii()({},Object(c.c)(["accessToken","userInfo","contacts","layimMine","layimFriends","layimGroups"]),Object(c.d)({currentMainView:"current_main_view"}),{contactData:function(){var t=[];return this.contacts.forEach(function(e,n){t.push({label:e.realName,key:e.uid})}),t}}),methods:Ii()({},Object(c.b)(["init","transferAccept","transferAccepted","inviteAccept","sendContactTextMessage","sendContactImageMessage","sendContactFileMessage","sendGroupTextMessage","sendGroupImageMessage","sendGroupFileMessage","clearToken","logout","createGroup"]),{showElectronMessageNotification:function(t){var e={title:"新消息",icon:this.iconUrl,body:t.thread.content};new window.Notification(e.title,e).onclick=function(){}},scrollTitle:function(){var t=document.title,e=t.split(""),n=e.shift();e.push(n),t=e.join(""),document.title=t,setTimeout(function(){this.scrollTitle()},1e3)},playAudio:function(){document.getElementById("audioPlay").play()},initLayim:function(){var t=this;null===this.layim&&(layui.use("layer",function(){t.layer=layui.layer}),layui.use("layim",function(e){e.config({init:{mine:t.layimMine,friend:t.layimFriends,group:t.layimGroups},uploadImage:{url:u.UPLOAD_LAYIM_IMAGE_URL,type:"post"},uploadFile:{url:u.UPLOAD_LAYIM_FILE_URL,type:"post"},initSkin:"2.jpg",min:!0,notice:!0,msgbox:"url",find:"url",chatLog:"url",copyright:!0}),t.layim=e,e.on("online",function(t){console.log("online:",t)}),e.on("find",function(e){console.log("find:",e),t.createGroupDialogVisible=!0}),e.on("msgbox",function(t){console.log("msgbox:",t)}),e.on("chatLog",function(t){console.log("chatLog:",t),"friend"===t.data.type||t.data.type}),e.on("groupMembers",function(t){console.log("groupMembers:",t)}),e.on("sign",function(t){console.log("sign: ",t)}),e.on("setSkin",function(t,e){console.log(t),console.log(e)}),e.on("ready",function(t){console.log("ready: ",t)}),e.on("sendMessage",function(e){if(console.log("sendMessage: ",e),"friend"===e.to.type)if(e.mine.content.startsWith("img[")&&e.mine.content.endsWith("]")){var n=e.mine.content.slice(4,-1),i={uid:e.to.id,imageUrl:n};t.sendContactImageMessage(i)}else if(e.mine.content.startsWith("file(")&&e.mine.content.endsWith("]")){var o=e.mine.content.indexOf(")"),a=e.mine.content.slice(5,o),r={uid:e.to.id,fileUrl:a,format:"doc"};t.sendContactFileMessage(r)}else{var s={uid:e.to.id,content:e.mine.content};t.sendContactTextMessage(s)}else if("group"===e.to.type)if(e.mine.content.startsWith("img[")&&e.mine.content.endsWith("]")){var l=e.mine.content.slice(4,-1),c={uid:e.to.id,imageUrl:l};t.sendGroupImageMessage(c)}else if(e.mine.content.startsWith("file(")&&e.mine.content.endsWith("]")){var u=e.mine.content.indexOf(")"),d=e.mine.content.slice(5,u),p={uid:e.to.id,fileUrl:d,format:"doc"};t.sendGroupFileMessage(p)}else{var m={uid:e.to.id,content:e.mine.content};t.sendGroupTextMessage(m)}}),e.on("chatChange",function(e){console.log("chatChange:",e),t.layimCurrentChatType=e.data.type,t.layimCurrentChatId=e.data.id})}))},doCreateGroup:function(){if(this.createGroupDialogVisible=!1,0!==this.selectedContacts.length){for(var t=0,e=this.userInfo.realName,n=0;n<this.selectedContacts.length;n++)for(var i=this.selectedContacts[n],o=0;o<this.contacts.length;o++){var a=this.contacts[o];if(i===a.uid&&(e=e+","+a.realName,++t>2))break}var r={nickname:e,selectedContacts:this.selectedContacts};this.createGroup(r),this.selectedContacts=[]}}}),created:function(){var t,e,n,i=this;this.init(),u.IS_PRIVATE_SERVER&&(t=u.PRIVATE_SERVER_UID,e=function(t){console.log(t),t.data.valid||i.$alert(t.data.message,"提示",{confirmButtonText:"确定",callback:function(t){i.logout()}})},n=function(t){console.log(t)},axios.get(u.PRIVATE_SERVER_VALIDATE_URL,{params:{uId:t}}).then(function(t){e(t.data)}).catch(function(t){n(t)}))},mounted:function(){var t=this;document.title=u.DEFAULT_TITLE,Tt.$on("collapse",function(e){t.leftSideWidth=e?u.LEFT_SIDEBAR_WIDTH:"200px"}),Tt.$on(u.EVENT_BUS_NOTIFICATION_SUCCESS,function(e){t.$notify({title:"提示",message:e,type:"success"})}),Tt.$on(u.EVENT_BUS_NOTIFICATION_WARNING,function(e){t.$notify({title:"提示",message:e,type:"warning"})}),Tt.$on(u.EVENT_BUS_NOTIFICATION_INFO,function(e){if(t.playAudio(),"chat"!==t.currentMainView&&(t.electron&&(t.showElectronMessageNotification(e),e.type===u.MESSAGE_TYPE_NOTIFICATION_THREAD?ipcRenderer.send("new-visitor",e):ipcRenderer.send("new-message",e)),null!==e.thread&&void 0!==e.thread)){var n=t;t.$notify({title:"收到新消息",message:e.thread.content,type:"success",onClick:function(){n.$router.replace("/admin/chat")}})}}),Tt.$on(u.EVENT_BUS_NOTIFICATION_ERROR,function(e){t.$notify({title:"提示",message:e,type:"error"})}),Tt.$on(u.EVENT_BUS_NOTIFICATION_TRANSFER,function(e){var n=e.transfer.realName,i=e.transfer.tTid;t.$msgbox({title:"转接会话",message:n+"转接给您一个会话",showCancelButton:!0,confirmButtonText:"接受",cancelButtonText:"拒绝",beforeClose:function(n,o,a){console.log("beforeClose:",n),"confirm"===n?(o.confirmButtonLoading=!0,o.confirmButtonText="接入中...",function(t,e,n,i){axios.post("/api/thread/transfer/accept?access_token="+e,{ttid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(i,t.accessToken,function(n){console.log(n),t.transferAccept(e),a(),o.confirmButtonLoading=!1},function(t){console.log(t),a(),o.confirmButtonLoading=!1})):function(t,e,n,i){axios.post("/api/thread/transfer/reject?access_token="+e,{ttid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(i,t.accessToken,function(t){console.log(t),a()},function(t){console.log(t),a()})}}).then(function(t){console.log("then:",t)})}),Tt.$on(u.EVENT_BUS_NOTIFICATION_TRANSFER_ACCEPT,function(e){var n=e.transfer.realName+e.content;t.$notify({title:"提示",message:n,type:"success"}),t.transferAccepted(e)}),Tt.$on(u.EVENT_BUS_NOTIFICATION_TRANSFER_REJECT,function(e){var n=e.transfer.realName+e.content;t.$notify({title:"提示",message:n,type:"warning"})}),Tt.$on(u.EVENT_BUS_NOTIFICATION_INVITE,function(e){var n=e.invite.realName,i=e.invite.tIid;t.$msgbox({title:"邀请会话",message:n+"邀请您加入会话",showCancelButton:!0,confirmButtonText:"接受",cancelButtonText:"拒绝",beforeClose:function(n,o,a){console.log("beforeClose:",n),"confirm"===n?(o.confirmButtonLoading=!0,o.confirmButtonText="接入中...",function(t,e,n,i){axios.post("/api/thread/invite/accept?access_token="+e,{tiid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(i,t.accessToken,function(n){console.log(n.data),t.inviteAccept(e),o.confirmButtonLoading=!1,a()},function(t){console.log(t),o.confirmButtonLoading=!1,a()})):function(t,e,n,i){axios.post("/api/thread/invite/reject?access_token="+e,{tiid:t,client:u.HTTP_CLIENT}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(i,t.accessToken,function(t){console.log(t.data),a()},function(t){console.log(t),a()})}}).then(function(t){console.log("then:",t)})}),Tt.$on(u.EVENT_BUS_NOTIFICATION_INVITE_ACCEPT,function(e){var n=e.invite.realName+e.content;t.$notify({title:"提示",message:n,type:"success"})}),Tt.$on(u.EVENT_BUS_NOTIFICATION_INVITE_REJECT,function(e){var n=e.invite.realName+e.content;t.$notify({title:"提示",message:n,type:"warning"})}),Tt.$on(u.EVENT_BUS_CONTACT_LOAD_FINISHED,function(e){t.showIm&&t.initLayim()}),Tt.$on(u.EVENT_BUS_GROUP_ADDED,function(e){if(console.log("群组信息发生变化",e),t.showIm){var n={id:e.gid,type:"group",avatar:e.avatar,groupname:e.nickname,sign:e.description};t.layim.addList(n)}}),Tt.$on(u.EVENT_BUS_NOTIFICATION_CONTACT_MESSAGE,function(e){if(t.userInfo.uid!==e.user.uid){var n="";e.type===u.MESSAGE_TYPE_TEXT?n=e.content:e.type===u.MESSAGE_TYPE_IMAGE&&(n="img["+e.imageUrl+"]"),t.layim.getMessage({id:e.user.uid,username:e.user.realName,avatar:e.user.avatar,type:"friend",content:n,cid:0,mine:!1,fromid:e.user.uid,timestamp:moment(e.createdAt).valueOf()})}}),Tt.$on(u.EVENT_BUS_NOTIFICATION_GROUP_MESSAGE,function(e){if(t.userInfo.uid!==e.user.uid){var n="";e.type===u.MESSAGE_TYPE_TEXT?n=e.content:e.type===u.MESSAGE_TYPE_IMAGE&&(n="img["+e.imageUrl+"]"),t.layim.getMessage({id:e.gid,username:e.user.realName,avatar:e.user.avatar,type:"group",content:n,cid:0,mine:!1,fromid:e.user.uid,timestamp:moment(e.createdAt).valueOf()})}}),Tt.$on(u.EVENT_BUS_STOMP_CONNECTION_STATUS,function(e){var n=e;t.electron&&ipcRenderer.send(n,"")}),Tt.$on(u.EVENT_BUS_LOGOUT,function(e){t.clearToken(),t.$router.replace("/login"),window.location.reload(),u.IS_ELECTRON&&ipcRenderer.send("hide-tray","")}),document.addEventListener("visibilitychange",function(){document.hidden})}},Mi={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"dashboard"}},[n("el-header",[n("bd-header")],1),t._v(" "),n("el-container",{staticStyle:{height:"calc(100% - 60px)"}},[n("el-aside",{staticStyle:{height:"100%"},attrs:{width:t.leftSideWidth}},[n("bd-side")],1),t._v(" "),n("el-container",[n("el-main",{staticStyle:{"padding-left":"5px","padding-top":"5px","padding-bottom":"0px","padding-right":"5px"}},[n("transition",{attrs:{mode:"out-in","enter-active-class":"fadeIn","leave-active-class":"fadeOut",appear:""}},[n("router-view",{staticClass:"animated"})],1)],1),t._v(" "),n("el-footer",{staticStyle:{height:"40px"}},[n("bd-footer")],1)],1)],1),t._v(" "),n("audio",{attrs:{id:"audioPlay",src:t.soundUrl,hidden:"true"}}),t._v(" "),n("el-dialog",{attrs:{title:"创建群组",visible:t.createGroupDialogVisible,width:"550px",center:""},on:{"update:visible":function(e){t.createGroupDialogVisible=e}}},[n("el-transfer",{attrs:{filterable:"","filter-placeholder":"请输入姓名",data:t.contactData,titles:["联系人","群成员"]},model:{value:t.selectedContacts,callback:function(e){t.selectedContacts=e},expression:"selectedContacts"}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.createGroupDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.doCreateGroup}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Vi=n("VU/8")(Di,Mi,!1,function(t){n("zM5E")},"data-v-0e2c3736",null).exports,Gi={name:"bd-login",data:function(){return{activeIndex:"0",errorCode:0,is400:!1,isIp:u.IS_IP,logining:!1,loginForm:{sub_domain:location.hostname.split(".").length>2?location.hostname.split(".")[0]:"",email:"",password:""},rules:{sub_domain:[{required:!0,message:"请输入企业号",trigger:"blur"}],email:[{required:!0,message:"请输入用户名/邮箱",trigger:"blur"},{min:5,message:"长度不能少于5个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},computed:Ii()({},Object(c.c)(["mainHost"]),{subDomain:function(){return location.hostname.split(".").length>2?location.hostname.split(".")[0]:""}}),methods:Ii()({},Object(c.b)(["updatePassportToken"]),{onEnter:function(){this.login()},login:function(){var t=this;this.$refs.loginForm.validate(function(e){if(!e)return!1;var n=t.loginForm.email.toLowerCase();n.indexOf("@")<0&&(n=n+"@"+t.loginForm.sub_domain),t.logining=!0,function(t,e,n,i){axios({method:"post",url:"/oauth/token",params:{username:t,password:e,grant_type:"password",scope:"all"},auth:{username:"client",password:"secret"}}).then(function(t){n(t.data)}).catch(function(t){i(t)})}(n,t.loginForm.password,function(e){if(console.log("login success:",e),t.logining=!1,null!=e)u.IS_ELECTRON&&ipcRenderer.send("show-tray",""),localStorage.access_token=e.access_token,t.updatePassportToken(e),u.IS_ELECTRON?t.$router.replace("/admin"):t.isIp?window.location.href=u.ADMIN_URL:window.location.href=u.HTTP_PREFIX+t.loginForm.sub_domain+"."+t.mainHost+"/admin";else{if(500===t.errorCode)return;t.is400||Tt.$emit(u.EVENT_BUS_LOGIN_TIMEOUT,"")}},function(e){console.log("login error:",e),t.logining=!1})})},register:function(){this.$router.replace("/register")}}),mounted:function(){var t=this;Tt.$on(u.EVENT_BUS_LOGIN_ERROR_400,function(e){t.is400=!0,t.errorCode=400,t.$message.error("用户名或密码错误")}),Tt.$on(u.EVENT_BUS_LOGIN_TIMEOUT,function(e){t.$message.error("登录超时，请检查网络或稍后重试")}),Tt.$on(u.EVENT_BUS_SERVER_ERROR_500,function(e){t.errorCode=500,t.$message.error("服务器错误")})}},Li={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-login"}},[n("el-main",[n("el-row",[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"grid-content"})]),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-form",{ref:"loginForm",attrs:{model:t.loginForm,"status-icon":"",rules:t.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"企业号",prop:"sub_domain"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请填写企业号",clearable:""},model:{value:t.loginForm.sub_domain,callback:function(e){t.$set(t.loginForm,"sub_domain",e)},expression:"loginForm.sub_domain"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"用户名/邮箱",prop:"email"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"用户名/邮箱",clearable:""},model:{value:t.loginForm.email,callback:function(e){t.$set(t.loginForm,"email",e)},expression:"loginForm.email"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{type:"password","auto-complete":"off",placeholder:"密码",clearable:""},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onEnter(e):null}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",loading:t.logining},on:{click:t.login}},[t._v("登录")]),t._v(" "),n("el-button",{on:{click:t.register}},[t._v("注册")])],1)],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"grid-content"})])],1)],1)],1)},staticRenderFns:[]};var Bi=n("VU/8")(Gi,Li,!1,function(t){n("18pi")},"data-v-212f07e1",null).exports,zi={name:"bd-register",data:function(){var t=this;return{logining:!1,emailForm:{email:"",password:"",rePassword:""},subDomainForm:{sub_domain:"vip"},registerRoles:{email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"change"},{validator:function(e,n,i){var o,a,r;o=t.emailForm.email,a=function(t){console.log(t),200===t.status_code?i():i(new Error("邮箱已经存在，请重新填写"))},r=function(t){console.log(t)},axios.get("/visitor/api/email/validate",{params:{email:o}}).then(function(t){a(t.data)}).catch(function(t){r(t)})},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符之间",trigger:"blur"},{validator:function(e,n,i){""===n?i(new Error("请输入密码")):(""!==t.emailForm.rePassword&&t.$refs.emailForm.validateField("rePassword"),i())},trigger:"blur"}],rePassword:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:function(e,n,i){n!==t.emailForm.password?i(new Error("两次输入密码不一致!")):i()},trigger:"blur"}]},firstStep:!0,secondStep:!1}},computed:Ii()({},Object(c.c)(["mainHost"])),methods:Ii()({},Object(c.b)(["updatePassportToken"]),{register:function(){var t=this;this.$refs.emailForm.validate(function(e){if(!e)return!1;var n,i,o,a;t.logining=!0,n=t.emailForm.email.toLowerCase(),i=t.emailForm.password,o=function(e){console.log("register success:",e),t.subDomainForm.sub_domain=e.data.subDomain,t.$message({message:"注册成功",type:"success"}),t.firstStep=!1,t.secondStep=!0,t.logining=!1},a=function(e){console.log("register error:",e),t.logining=!1},axios.post("/visitor/api/register",{email:n,password:i}).then(function(t){o(t.data)}).catch(function(t){a(t)})})},routeLogin:function(){u.IS_ELECTRON?this.$router.replace("/login"):window.location.href=u.HTTP_PREFIX+this.subDomainForm.sub_domain+"."+this.mainHost+"/login"}})},Fi={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-register"}},[n("el-main",[t.firstStep?n("el-row",[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"grid-content"})]),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-form",{ref:"emailForm",attrs:{model:t.emailForm,"status-icon":"",rules:t.registerRoles,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{type:"email",placeholder:"请输入邮箱",clearable:""},model:{value:t.emailForm.email,callback:function(e){t.$set(t.emailForm,"email",e)},expression:"emailForm.email"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{type:"password","auto-complete":"off",clearable:""},model:{value:t.emailForm.password,callback:function(e){t.$set(t.emailForm,"password",e)},expression:"emailForm.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"确认密码",prop:"rePassword"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{type:"password","auto-complete":"off",clearable:""},model:{value:t.emailForm.rePassword,callback:function(e){t.$set(t.emailForm,"rePassword",e)},expression:"emailForm.rePassword"}})],1),t._v(" "),n("el-form-item",[n("el-button",{on:{click:t.routeLogin}},[t._v("登录")]),t._v(" "),n("el-button",{attrs:{type:"primary",loading:t.logining},on:{click:t.register}},[t._v("注册")])],1)],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"grid-content"})])],1):t._e(),t._v(" "),t.secondStep?n("el-row",[n("el-col",{attrs:{span:10}},[n("div",{staticClass:"grid-content"})]),t._v(" "),n("el-col",{attrs:{span:4}},[n("el-form",{attrs:{"label-width":"150px"}},[n("el-form-item",{attrs:{label:"请牢记您的企业号："}},[t._v(t._s(this.subDomainForm.sub_domain))]),t._v(" "),n("el-form-item",[n("el-button",{on:{click:t.routeLogin}},[t._v("去登录")])],1)],1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("div",{staticClass:"grid-content"})])],1):t._e()],1)],1)},staticRenderFns:[]};var $i=n("VU/8")(zi,Fi,!1,function(t){n("fxMK")},"data-v-b6954bb8",null).exports,Wi={name:"bd-forget",data:function(){var t=this;return{emailForm:{email:"",email_code:""},passwordForm:{password:"",rePassword:""},forgetRoles:{email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"change"},{validator:function(e,n,i){var o,a,r;o=t.emailForm.email,a=function(t){console.log(t),200===t.status_code?i():i(new Error("邮箱不存在，请重新填写"))},r=function(t){console.log(t)},axios.get("/visitor/api/email/forget",{params:{email:o}}).then(function(t){a(t.data)}).catch(function(t){r(t)})},trigger:"blur"}],email_code:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:function(e,n,i){parseInt(n)!==t.emailServerCode?i(new Error("验证码错误")):i()},trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符之间",trigger:"blur"},{validator:function(e,n,i){""===n?i(new Error("请输入密码")):(""!==t.passwordForm.rePassword&&t.$refs.passwordForm.validateField("rePassword"),i())},trigger:"blur"}],rePassword:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:function(e,n,i){n!==t.passwordForm.password?i(new Error("两次输入密码不一致!")):i()},trigger:"blur"}]},emailServerCode:0,emailButtonCountingDown:!1,emailCountDownTime:0,firstStep:!0,secondStep:!1}},computed:{emailButtonText:function(){return this.emailCountDownTime>0?this.emailCountDownTime+"s后重新获取":"获取验证码"}},watch:{emailCountDownTime:function(t){0===this.value&&(this.emailButtonCountingDown=!1)}},methods:{getEmailCode:function(){var t=this;this.$refs.emailForm.validateField("email",function(e){if(console.log(e),e)return!1;var n,i,o;n=t.emailForm.email,i=function(e){console.log(e),t.emailServerCode=e.data,t.emailButtonCountingDown=!0,t.emailCountDownTime=60,t.emailTimer(),t.$message({message:"发送成功",type:"success"})},o=function(e){console.log(e),t.$message.error("发送失败, 请重试"+e)},axios.get("/visitor/api/email/code",{params:{email:n}}).then(function(t){i(t.data)}).catch(function(t){o(t)})})},emailTimer:function(){this.emailCountDownTime>0&&(this.emailCountDownTime--,setTimeout(this.emailTimer,1e3))},nextSecondStep:function(){var t=this;this.$refs.emailForm.validate(function(e){if(!e)return!1;t.firstStep=!1,t.secondStep=!0})},preSecondStep:function(){this.firstStep=!0,this.secondStep=!1},changePassword:function(){var t,e,n,i,o=this;t=this.emailForm.email,e=this.passwordForm.password,n=function(t){console.log(t),200===t.status_code&&(o.$message({message:"修改成功, 请登录",type:"success"}),o.routeLogin())},i=function(t){console.log(t)},axios.post("/visitor/api/change",{email:t,password:e}).then(function(t){n(t.data)}).catch(function(t){i(t)})},routeLogin:function(){this.$router.replace("/login")}}},Hi={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-forget"}},[n("el-main",[t.firstStep?n("el-row",[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"grid-content"})]),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-form",{ref:"emailForm",attrs:{model:t.emailForm,"status-icon":"",rules:t.forgetRoles,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{type:"email",placeholder:"请输入邮箱",clearable:""},model:{value:t.emailForm.email,callback:function(e){t.$set(t.emailForm,"email",e)},expression:"emailForm.email"}},[n("el-button",{attrs:{slot:"append",loading:t.emailButtonCountingDown},on:{click:t.getEmailCode},slot:"append"},[t._v(t._s(t.emailButtonText))])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"验证码",prop:"email_code"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入验证码","auto-complete":"off",clearable:""},model:{value:t.emailForm.email_code,callback:function(e){t.$set(t.emailForm,"email_code",e)},expression:"emailForm.email_code"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.nextSecondStep}},[t._v("下一步")])],1)],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"grid-content"})])],1):t._e(),t._v(" "),t.secondStep?n("el-row",[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"grid-content"})]),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-form",{ref:"passwordForm",attrs:{model:t.passwordForm,"status-icon":"",rules:t.forgetRoles,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{type:"password","auto-complete":"off",clearable:""},model:{value:t.passwordForm.password,callback:function(e){t.$set(t.passwordForm,"password",e)},expression:"passwordForm.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"确认密码",prop:"rePassword"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{type:"password","auto-complete":"off",clearable:""},model:{value:t.passwordForm.rePassword,callback:function(e){t.$set(t.passwordForm,"rePassword",e)},expression:"passwordForm.rePassword"}})],1),t._v(" "),n("el-form-item",[n("el-button",{on:{click:t.preSecondStep}},[t._v("上一步")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.changePassword}},[t._v("修改密码")])],1)],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"grid-content"})])],1):t._e()],1)],1)},staticRenderFns:[]};var Yi=n("VU/8")(Wi,Hi,!1,function(t){n("0Tiy")},"data-v-40321cff",null).exports,ji={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"bd-home"}},[e("el-row",[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"grid-content bg-purple-dark"})])],1),this._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"grid-content bg-purple"})]),this._v(" "),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"grid-content bg-purple-light"})])],1),this._v(" "),e("el-row",[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"grid-content bg-purple"})]),this._v(" "),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"grid-content bg-purple-light"})]),this._v(" "),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"grid-content bg-purple"},[this._v("近期更新列表： 1.2018-10-30 ... 2.")])])],1)],1)},staticRenderFns:[]};var qi=n("VU/8")({name:"bd-home"},ji,!1,function(t){n("YjuF")},"data-v-d3ea8918",null).exports,Qi={name:"bd-thread-left",data:function(){return{type:"会话",search:"",pageSize:20,currentContactPage:1,currentGroupPage:1,activeNames:["chatting","queuing","closed"]}},computed:Ii()({},Object(c.c)(["userThreads","userChattingThreads","userClosedThreads","userCurrentThread","userCurrentContact","userCurrentGroup","userQueues","showAuthority"]),{filterdChattingThreads:function(){var t=this;return this.userChattingThreads.filter(function(e){return e.visitor.nickname.includes(t.search)||e.content.includes(t.search)})},filterQueues:function(){var t=this;return this.userQueues.content.filter(function(e){return e.visitor.nickname.includes(t.search)||e.content.includes(t.search)})},filterdClosedThreads:function(){var t=this;return this.userClosedThreads.filter(function(e){return e.visitor.nickname.includes(t.search)||e.content.includes(t.search)})},transformChattingThread:function(){for(var t=[{id:u.THREAD_TYPE_APPOINTED,group:!0,label:"无分组",children:[]}],e=0;e<this.filterdChattingThreads.length;e++){for(var n=this.filterdChattingThreads[e],i=!1,o=0;o<t.length;o++){var a=t[o];null===n.workGroup||void 0===n.workGroup?(t[0].children.push(n),i=!0):a.id===n.workGroup.wid&&(t[o].children.push(n),i=!0)}i||t.push({id:n.workGroup.wid,group:!0,label:n.workGroup.nickname,children:[n]})}return t},transformClosedThread:function(){for(var t=[{id:u.THREAD_TYPE_APPOINTED,group:!0,label:"无分组",children:[]}],e=0;e<this.filterdClosedThreads.length;e++){for(var n=this.filterdClosedThreads[e],i=!1,o=0;o<t.length;o++){var a=t[o];null===n.workGroup||void 0===n.workGroup?(t[0].children.push(n),i=!0):a.id===n.workGroup.wid&&(t[o].children.push(n),i=!0)}i||t.push({id:n.workGroup.wid,group:!0,label:n.workGroup.nickname,children:[n]})}return t},showChatType:function(){return!u.IS_PRODUCTION||this.showAuthority.debug},showThread:function(){return"会话"===this.type},showContacts:function(){return"同事"===this.type},showGroups:function(){return"群聊"===this.type},chattingThreadTitle:function(){return"会话中（"+this.filterdChattingThreads.length+"）"},queuingTitle:function(){return"排队中（"+this.filterQueues.length+"）"},closedThreadTitle:function(){return"会话结束（"+this.filterdClosedThreads.length+"）"}}),methods:Ii()({},Object(c.b)(["updateCurrentThread","updateContact","updateGroup","updateChatType","getThread","getQueue","acceptQueue","getGroups","getAgents"]),{workGroupTitle:function(t){return t.label+" ("+t.children.length+") "},handleCollapseChange:function(t){},handleCurrentContactChange:function(t){this.currentContactPage=t;var e={page:this.currentContactPage-1,size:20};this.getAgents(e)},handleCurrentGroupChange:function(t){this.currentGroupPage=t;var e={page:this.currentGroupPage-1,size:20};this.getGroups(e)},selectThread:function(t){this.updateCurrentThread(t)},selectContact:function(t){this.updateContact(t)},selectGroup:function(t){this.updateGroup(t)},selectQueue:function(t){},doAcceptQueue:function(t){this.acceptQueue(t.qid)},onTypeChange:function(t){var e={page:0,size:20};"同事"===t?(this.updateChatType(u.CHAT_TYPE_CONTACT),this.getAgents(e)):"群聊"===t?(this.updateChatType(u.CHAT_TYPE_GROUP),this.getGroups(e)):"会话"===t&&(this.updateChatType(u.CHAT_TYPE_THREAD),this.getThread(),this.getQueue(e))}}),filters:{time:function(t){return"string"==typeof t?moment(t).format("MM-DD HH:mm"):t}}},Ki={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-thread-left"}},[n("div",{staticClass:"thread-search"},[n("el-input",{attrs:{size:"mini",placeholder:"搜索","suffix-icon":"el-icon-search",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),t.showThread?n("div",{staticStyle:{height:"calc(100% - 100px)","overflow-y":"auto"}},[n("el-collapse",{on:{change:t.handleCollapseChange},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[n("el-collapse-item",{attrs:{name:"chatting"}},[n("template",{slot:"title"},[n("div",{staticStyle:{"margin-left":"20px"}},[t._v("\n            "+t._s(t.chattingThreadTitle)+"\n          ")])]),t._v(" "),n("el-collapse",t._l(t.transformChattingThread,function(e){return n("li",{key:e.wid},[e.group?n("el-collapse-item",{attrs:{name:e.wid}},[n("template",{slot:"title"},[n("div",{staticStyle:{"margin-left":"40px"}},[t._v("\n                  "+t._s(t.workGroupTitle(e))+"\n                ")])]),t._v(" "),t._l(e.children,function(e){return n("li",{key:e.tid,staticClass:"list-item",class:{" active":e.tid===t.userCurrentThread.tid},on:{click:function(n){t.selectThread(e)}}},[n("div",{staticClass:"list-left"},[n("img",{staticClass:"avatar",attrs:{width:"20",height:"20",alt:e.visitor.nickname,src:e.visitor.avatar}})]),t._v(" "),n("div",{staticClass:"list-right"},[n("div",{staticClass:"top"},[n("span",{staticClass:"nickname"},[t._v(t._s(e.visitor.nickname))]),t._v(" "),n("span",{staticClass:"timestamp"},[t._v("\n                      "+t._s(t._f("time")(e.timestamp))+"\n                      "),0!==e.unreadCount?n("span",{staticClass:"unreadCount"},[t._v(t._s(e.unreadCount))]):t._e()])]),t._v(" "),n("div",{staticClass:"bottom"},[n("span",{staticClass:"content"},[t._v(t._s(e.content))])])])])})],2):t._e()],1)}))],2),t._v(" "),n("el-collapse-item",{attrs:{name:"queuing"}},[n("template",{slot:"title"},[n("div",{staticStyle:{"margin-left":"20px"}},[t._v("\n            "+t._s(t.queuingTitle)+"\n          ")])]),t._v(" "),t._l(t.filterQueues,function(e){return n("li",{key:e.qid,staticClass:"list-item"},[n("div",{staticClass:"list-left"},[n("img",{staticClass:"avatar",attrs:{width:"20",height:"20",alt:e.visitor.nickname,src:e.visitor.avatar}})]),t._v(" "),n("div",{staticClass:"list-right"},[n("div",{staticClass:"top"},[n("span",{staticClass:"nickname"},[t._v(t._s(e.visitor.nickname))]),t._v(" "),n("span",{staticClass:"timestamp"},[t._v(t._s(t._f("time")(e.createdAt)))])]),t._v(" "),n("div",{staticClass:"bottom-queue"},[n("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",plain:""},on:{click:function(n){t.doAcceptQueue(e)}}},[t._v("接入")])],1)])])})],2),t._v(" "),n("el-collapse-item",{attrs:{name:"closed"}},[n("template",{slot:"title"},[n("div",{staticStyle:{"margin-left":"20px"}},[t._v("\n            "+t._s(t.closedThreadTitle)+"\n          ")])]),t._v(" "),t._l(t.transformClosedThread,function(e){return n("el-collapse",{key:e.wid,attrs:{accordion:""}},[e.group?n("el-collapse-item",{attrs:{name:e.wid}},[n("template",{slot:"title"},[n("div",{staticStyle:{"margin-left":"40px"}},[t._v("\n                  "+t._s(t.workGroupTitle(e))+"\n                ")])]),t._v(" "),t._l(e.children,function(e){return n("li",{key:e.tid,staticClass:"list-item",class:{" active":e.tid===t.userCurrentThread.tid},on:{click:function(n){t.selectThread(e)}}},[n("div",{staticClass:"list-left"},[n("img",{staticClass:"avatar",attrs:{width:"20",height:"20",alt:e.visitor.nickname,src:e.visitor.avatar}})]),t._v(" "),n("div",{staticClass:"list-right"},[n("div",{staticClass:"top"},[n("span",{staticClass:"nickname"},[t._v(t._s(e.visitor.nickname))]),t._v(" "),n("span",{staticClass:"timestamp"},[t._v("\n                    "+t._s(t._f("time")(e.timestamp))+"\n                    "),0!==e.unreadCount?n("span",{staticClass:"unreadCount"},[t._v(t._s(e.unreadCount))]):t._e()])]),t._v(" "),n("div",{staticClass:"bottom"},[n("span",{staticClass:"content"},[t._v(t._s(e.content))])])])])})],2):t._e()],1)})],2)],1)],1):t._e()])},staticRenderFns:[]};var Xi=n("VU/8")(Qi,Ki,!1,function(t){n("1EI/")},"data-v-ec43ff2c",null).exports,Ji={name:"bd-top",data:function(){return{noteDialogVisible:!1,noteContent:"",transferDialogVisible:!1,inviteDialogVisible:!1,invitedContactUserids:[]}},computed:Ii()({},Object(c.c)(["accessToken","userCurrentChatType","userCurrentThread","userCurrentContact","userCurrentGroup","userInfo","onlineAgents","showAuthority"]),{disabled:function(){return 0===this.userCurrentThread.id},contactTransferTableData:function(){for(var t=[],e=this.onlineAgents.content.length-1;e>=0;e--){var n=this.onlineAgents.content[e].uid,i=this.onlineAgents.content[e].robot;if(this.userInfo.uid!==n&&!i){var o={uid:n,realName:this.onlineAgents.content[e].realName,status:this.onlineAgents.content[e].acceptStatus};t.push(o)}}return t},contactInviteData:function(){for(var t=[],e=this.onlineAgents.content.length-1;e>=0;e--){var n=this.onlineAgents.content[e].uid,i=this.onlineAgents.content[e].robot;if(this.userInfo.uid!==n&&!i){var o={key:n,label:this.onlineAgents.content[e].realName,disabled:!1};t.push(o)}}return t}}),methods:Ii()({},Object(c.b)(["inviteRate","closeThread","setNote","getOnlineAgents"]),{showTransferChat:function(){this.transferDialogVisible=!0;this.getOnlineAgents({page:0,size:100})},isTransferButtonDisabled:function(t){return!1},doTransferChat:function(t,e){var n=this;bt(e.uid,this.userCurrentThread.tid,this.accessToken,function(t){console.log(t),200===t.status_code?(n.$message({message:"转接会话成功",type:"success"}),n.transferDialogVisible=!1):n.$message.error(t.message)},function(t){console.log(t),n.$message.error("转接会话错误")})},showNoteDialog:function(){console.log("备注"),this.noteDialogVisible=!0},doSaveNote:function(){console.log("save note");var t={uid:this.userCurrentThread.visitor.uid,value:this.noteContent};this.setNote(t),this.noteDialogVisible=!1},showInviteChat:function(){this.inviteDialogVisible=!0;this.getOnlineAgents({page:0,size:100})},doInviteChat:function(){var t=this,e=this.userCurrentThread.tid;St(this.invitedContactUserids,e,this.accessToken,function(e){console.log(e),200===e.status_code?(t.$message({message:"邀请会话成功",type:"success"}),t.inviteDialogVisible=!1):t.$message.error(e.message)},function(e){console.log(e),t.$message.error("转接会话错误")})},showInviteRate:function(){this.inviteRate(this.userCurrentThread.tid)},showCloseChat:function(){var t=this;this.$confirm("确定要关闭会话?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.closeThread(t.userCurrentThread.tid)}).catch(function(){})},addWorkorder:function(){console.log("addWorkorder")},addCrm:function(){console.log("add crm")},handleClose:function(t){t()}})},Zi={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-top"}},[n("img",{staticClass:"avatar",attrs:{width:"35",height:"35",alt:t.userCurrentThread.visitor.nickname,src:t.userCurrentThread.visitor.avatar}}),t._v(" "),n("span",{staticClass:"nickname"},[t._v(t._s(t.userCurrentThread.visitor.nickname))]),t._v(" "),n("span",{staticClass:"wrapper"},[t.showAuthority.debug?n("el-button",{attrs:{type:"warning",size:"mini",disabled:t.disabled},on:{click:function(e){t.addWorkorder()}}},[n("i",{staticClass:"iconfont icon-workorder",staticStyle:{"font-size":"10px"}}),t._v(" 工单")]):t._e(),t._v(" "),n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-sort",disabled:t.disabled},on:{click:function(e){t.showTransferChat()}}},[t._v("转接")]),t._v(" "),n("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-document",disabled:t.disabled},on:{click:function(e){t.showNoteDialog()}}},[t._v("备注")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-close",disabled:t.disabled},on:{click:function(e){t.showCloseChat()}}},[t._v("关闭")])],1),t._v(" "),n("el-dialog",{attrs:{title:"备注",visible:t.noteDialogVisible,width:"30%","before-close":t.handleClose,center:""},on:{"update:visible":function(e){t.noteDialogVisible=e}}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入备注内容"},model:{value:t.noteContent,callback:function(e){t.noteContent=e},expression:"noteContent"}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.noteDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.doSaveNote}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"转接会话给当前在线客服人员",width:"30%",visible:t.transferDialogVisible,"before-close":t.handleClose,center:""},on:{"update:visible":function(e){t.transferDialogVisible=e}}},[n("el-table",{attrs:{data:t.contactTransferTableData,"empty-text":"无客服在线"}},[n("el-table-column",{attrs:{type:"index"}}),t._v(" "),n("el-table-column",{attrs:{property:"realName",label:"客服名"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"small",disabled:t.isTransferButtonDisabled(e.row.status)},on:{click:function(n){t.doTransferChat(e.$index,e.row)}}},[t._v("\n              转接\n            ")])]}}])})],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.transferDialogVisible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),n("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"邀请其他在线客服人员加入会话",width:"30%",visible:t.inviteDialogVisible,"before-close":t.handleClose,center:""},on:{"update:visible":function(e){t.inviteDialogVisible=e}}},[n("div",{staticClass:"invite-dialog-body"},[n("el-transfer",{attrs:{titles:["当前在线客服","被邀请客服"],data:t.contactInviteData},model:{value:t.invitedContactUserids,callback:function(e){t.invitedContactUserids=e},expression:"invitedContactUserids"}})],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.inviteDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.doInviteChat()}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var to=n("VU/8")(Ji,Zi,!1,function(t){n("ODqe")},"data-v-45599447",null).exports,eo={name:"bd-message",data:function(){return{imageDialogVisible:!1,currentImageUrl:"",currentVoiceUrl:"",dialogTableVisible:!1,emojiBaseUrl:u.EMOJI_BASE_URL,electron:u.IS_ELECTRON,transformDegree:0}},computed:Ii()({},Object(c.c)(["userInfo","userCurrentThread","userCurrentContact","userCurrentGroup","messages","showAuthority"]),Object(c.d)(["emotionMap","emotionWxMap"]),{disabled:function(){return 0===this.userCurrentThread.id},show_header:function(){return!0}}),methods:Ii()({},Object(c.b)(["getMessages"]),{imageClicked:function(t){this.currentImageUrl=t,this.imageDialogVisible=!0},fileClicked:function(t){this.electron?ipcRenderer.send("open-external-url",t):window.open(t)},voiceClicked:function(t){this.currentVoiceUrl=t,window.open(t)},transformLarger:function(){console.log("transformLarger");var t=document.getElementById("currentImage");t.width=1.1*t.width,t.height=1.1*t.height},transformSmaller:function(){console.log("transformSmaller");var t=document.getElementById("currentImage");t.width=.9*t.width,t.height=.9*t.height},transformLeft:function(){this.transformDegree-=90,document.getElementById("currentImage").style.transform="rotate("+this.transformDegree+"deg)"},transformRight:function(){this.transformDegree+=90,document.getElementById("currentImage").style.transform="rotate("+this.transformDegree+"deg)"},downloadImage:function(){console.log("downloadImage:",this.currentImageUrl),ipcRenderer.send("save-image-dialog",this.currentImageUrl)},is_self:function(t){return t.user.uid===this.userInfo.uid},is_sending:function(t){return t.status===u.MESSAGE_STATUS_SENDING},is_stored:function(t){return t.status===u.MESSAGE_STATUS_STORED},is_received:function(t){return t.status===u.MESSAGE_STATUS_RECEIVED},is_error:function(t){return t.status===u.MESSAGE_STATUS_ERROR},is_read:function(t){return t.status===u.MESSAGE_STATUS_READ},is_type_text:function(t){return t.type===u.MESSAGE_TYPE_TEXT||t.type===u.MESSAGE_TYPE_NOTIFICATION_THREAD},is_type_robot:function(t){return t.type===u.MESSAGE_TYPE_ROBOT},is_type_image:function(t){return t.type===u.MESSAGE_TYPE_IMAGE},is_type_file:function(t){return t.type===u.MESSAGE_TYPE_FILE},is_type_voice:function(t){return t.type===u.MESSAGE_TYPE_VOICE},is_type_video:function(t){return t.type===u.MESSAGE_TYPE_VIDEO},is_type_shortvideo:function(t){return t.type===u.MESSAGE_TYPE_SHORTVIDEO},is_type_location:function(t){return t.type===u.MESSAGE_TYPE_LOCATION},is_type_link:function(t){return t.type===u.MESSAGE_TYPE_LINK},is_type_event:function(t){return t.type===u.MESSAGE_TYPE_EVENT},is_type_questionnaire:function(t){return t.type===u.MESSAGE_TYPE_QUESTIONNAIRE},is_type_company:function(t){return t.type===u.MESSAGE_TYPE_COMPANY},is_type_workGroup:function(t){return t.type===u.MESSAGE_TYPE_WORK_GROUP},is_type_notification:function(t){return t.type!==u.MESSAGE_TYPE_NOTIFICATION_THREAD&&t.type.startsWith(u.MESSAGE_TYPE_NOTIFICATION)},player_url:function(){return u.VOICE_PLAYER_BASE_URL+this.currentVoiceUrl},replaceFace:function(t){if(null==t||void 0===t)return t;var e=this.replaceWeChatFace(t),n=this.emotionMap,i=e.match(/\[[\u4E00-\u9FA5NoOK]+\]/g),o=e;if(i)for(var a=0;a<i.length;a++)o=o.replace(i[a],"<img height='25px' width='25px' style='margin-bottom:4px;' src='"+this.emojiBaseUrl+n[i[a]]+"'>");return o},replaceWeChatFace:function(t){if(null==t||void 0===t)return t;var e=this.emotionWxMap,n=t.match(/\/::\)|\/::~|\/::B|\/::\||\/:8-\)|\/::<|\/::\$|\/::X|\/::Z|\/::'\\(|\/::-\||\/::@|\/::P|\/::D|\/::O|\/::\\(|\/::\+|\/:--b|\/::Q|\/::T|\/:,@P|\/:,@-D|\/::d|\/:,@o|\/::g|\/:\\|-\\)|\/::!|\/::L|\/::>|\/::,@|\/:,@f|\/::-S|\/:\\?|\/:,@x|\/:,@@|\/::8|\/:,@!|\/:!!!|\/:xx|\/:bye|\/:wipe|\/:dig|\/:handclap|\/:&-\\(|\/:B-\\)|\/:<@|\/:@>|\/::-O|\/:>-\\||\/:P-\\(|\/::'\\||\/:X-\\)|\/::\\*|\/:@x|\/:8\\*|\/:pd|\/:<W>|\/:beer|\/:basketb|\/:oo|\/:coffee|\/:eat|\/:pig|\/:rose|\/:fade|\/:showlove|\/:heart|\/:break|\/:cake|\/:li|\/:bome|\/:kn|\/:footb|\/:ladybug|\/:shit|\/:moon|\/:sun|\/:gift|\/:hug|\/:strong|\/:weak|\/:share|\/:v|\/:@\\)|\/:jj|\/:@@|\/:bad|\/:lvu|\/:no|\/:ok|\/:love|\/:<L>|\/:jump|\/:shake|\/:<O>|\/:circle|\/:kotow|\/:turn|\/:skip|\/:oY|\/:#-0|\/:hiphot|\/:kiss|\/:<&|\/:&>/g),i=t;if(n)for(var o=0;o<n.length;o++)i=i.replace(n[o],"<img height='25px' width='25px' style='margin-bottom:4px;' src='"+this.emojiBaseUrl+e[n[o]]+"'>");return i},handleImageDialogClose:function(t){t()},scrollToBottom:function(){var t=this;this.$nextTick(function(){var e=t.$refs.list;null!=e&&(e.scrollTop=e.scrollHeight)})}}),mounted:function(){var t=this;Tt.$on(u.EVENT_BUS_MESSAGE_SCROLL_TO_BOTTOM,function(){var e=t;e.$nextTick(function(){var t=e.$refs.list;null!=t&&(t.scrollTop=t.scrollHeight)})})},filters:{datetime:function(t){return"string"==typeof t?moment(t).format("YYYY-MM-DD HH:mm:ss"):t}}},no={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-message"}},[n("el-dialog",{attrs:{title:"查看大图",modal:!1,visible:t.imageDialogVisible,width:"40%","before-close":t.handleImageDialogClose},on:{"update:visible":function(e){t.imageDialogVisible=e}}},[n("span",[n("img",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"currentImage",src:t.currentImageUrl,alt:"[查看大图]"}})]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.imageDialogVisible=!1}}},[t._v("关闭")])],1)]),t._v(" "),n("el-dialog",{attrs:{title:"语音播放器",modal:!1,width:"30%",visible:t.dialogTableVisible,center:""},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[n("iframe",{attrs:{src:t.player_url}})]),t._v(" "),t.disabled?t._e():n("ul",{ref:"list",staticClass:"bd-message-ul"},t._l(t.messages,function(e){return n("li",{key:e.mid},[n("p",{staticClass:"timestamp"},[n("span",[t._v(t._s(t._f("datetime")(e.createdAt)))]),n("br"),t._v(" "),t.is_type_notification(e)?n("span",[t._v(t._s(e.content))]):t._e()]),t._v(" "),t.is_type_notification(e)?t._e():n("div",{staticClass:"main",class:{self:t.is_self(e)}},[t.show_header?n("img",{staticClass:"avatar",attrs:{width:"30",height:"30",src:e.user.avatar}}):t._e(),t._v(" "),n("div",{staticClass:"nickname"},[t._v(t._s(e.user.nickname))]),t._v(" "),t.is_type_text(e)?n("div",{staticClass:"text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}}):t._e(),t._v(" "),t.is_type_robot(e)?n("div",{staticClass:"text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}}):t._e(),t._v(" "),t.is_type_questionnaire(e)?n("div",{staticClass:"text"},[n("span",[t._v(t._s(e.questionnaire.questionnaireItems[0].title))]),t._v(" "),t._l(e.questionnaire.questionnaireItems[0].questionnaireItemItems,function(e){return n("span",{key:e.id},[n("br"),t._v(" "),n("span",{staticStyle:{color:"#007bff",cursor:"pointer"}},[t._v(t._s(e.content))])])})],2):t._e(),t._v(" "),t.is_type_company(e)?n("div",{staticClass:"text"},[n("span",[t._v(t._s(e.content))]),t._v(" "),t._l(e.company.countries,function(e){return n("span",{key:e.cid},[n("br"),t._v(" "),n("span",{staticStyle:{color:"#007bff",cursor:"pointer"}},[t._v(t._s(e.name))])])})],2):t._e(),t._v(" "),t.is_type_workGroup(e)?n("div",{staticClass:"text"},[n("span",[t._v(t._s(e.content))]),t._v(" "),t._l(e.workGroups,function(e){return n("span",{key:e.wid},[n("br"),t._v(" "),n("span",{staticStyle:{color:"#007bff",cursor:"pointer"}},[t._v(t._s(e.nickname))])])})],2):t._e(),t._v(" "),t.is_type_image(e)?n("div",{staticClass:"text"},[n("img",{staticStyle:{"padding-top":"10px","padding-bottom":"10px",width:"100px",height:"100px"},attrs:{src:e.imageUrl,alt:"[图片]"},on:{click:function(n){t.imageClicked(e.imageUrl)}}})]):t._e(),t._v(" "),t.is_type_file(e)?n("div",{staticClass:"text"},[n("img",{staticStyle:{"padding-top":"10px","padding-bottom":"10px",width:"25px",height:"25px"},attrs:{src:"https://www.bytedesk.com/img/input/file.png",alt:"[文件]"},on:{click:function(n){t.fileClicked(e.fileUrl)}}}),t._v(" "),n("span",[n("a",{attrs:{href:e.fileUrl,target:"_blank"}},[t._v("查看文件")])])]):t._e(),t._v(" "),t.is_type_voice(e)?n("div",{staticClass:"text"},[n("img",{staticStyle:{"padding-top":"10px","padding-bottom":"10px",width:"25px",height:"20px"},attrs:{src:"https://www.bytedesk.com/img/input/voice_received.png",alt:"[语音]"},on:{click:function(n){t.voiceClicked(e.voiceUrl)}}})]):t._e(),t._v(" "),t.is_type_video(e)?n("div",{staticClass:"text"},[t._v(t._s(e.videoOrShortUrl))]):t._e(),t._v(" "),t.is_type_shortvideo(e)?n("div",{staticClass:"text"},[t._v(t._s(e.videoOrShortThumbUrl))]):t._e(),t._v(" "),t.is_type_location(e)?n("div",{staticClass:"text"},[t._v(t._s(e.label))]):t._e(),t._v(" "),t.is_type_link(e)?n("div",{staticClass:"text"},[t._v(t._s(e.title))]):t._e(),t._v(" "),t.is_type_event(e)?n("div",{staticClass:"text"},[t._v(t._s(e.content))]):t._e(),t._v(" "),t.is_self(e)?n("div",{staticClass:"status"},[t.is_sending(e)?n("i",{staticClass:"el-icon-loading",staticStyle:{"font-size":"10px"}}):t._e(),t._v(" "),t.is_stored(e)?n("i",{staticClass:"fa fa-times-circle",staticStyle:{"font-size":"10px"}}):t._e(),t._v(" "),t.is_received(e)?n("i",{staticStyle:{"font-size":"10px"}},[t._v("已收到")]):t._e(),t._v(" "),t.is_read(e)?n("i",{staticStyle:{"font-size":"10px"}},[t._v("已读")]):t._e(),t._v(" "),t.is_error(e)?n("i",{staticClass:"iconfont icon-error",staticStyle:{"font-size":"10px"}}):t._e()]):t._e()])])}))],1)},staticRenderFns:[]};var io=n("VU/8")(eo,no,!1,function(t){n("sPYx")},"data-v-b3d12ab0",null).exports,oo={name:"bd-input",data:function(){return{show_emoji:!1,inputContent:"",previewContent:"",blockReason:"",upload_headers:{"X-CSRF-TOKEN":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json",Authorization:"Bearer "},upload_data:{file_name:"test.png",username:""},upload_name:"file",uploadImageServerUrl:u.UPLOAD_IMAGE_URL,uploadFileServerUrl:u.UPLOAD_FILE_URL,uploadedImageList:[],uploadFileType:"",inputTipVisible:!1,messageDialogVisible:!1,searchMessage:"",blockDialogVisible:!1,mediaStreamConstraints:{audio:!0,video:!0},videoOfferSdpConstraints:{offerToReceiveAudio:!0,offerToReceiveVideo:!0},audioOfferSdpConstraints:{offerToReceiveAudio:!0,offerToReceiveVideo:!1},rtcStartCallTimestamp:null,isRtcInitiator:!1,isRtcStarted:!1,rtcDialogVisible:!1,rtcPeerConnection:null,rtcLocalVideo:null,rtcRemoteVideo:null,rtcLocalStream:null,rtcRemoteStream:null,rtcIceCandidate:null}},components:{BdMessage:io},computed:Ii()({},Object(c.c)(["userInfo","userThreads","userCurrentThread","userCurrentContact","userCurrentGroup","userCurrentChatType","showAuthority","allCuws"]),Object(c.d)(["emojis"]),{showEmoji:function(){return!this.disabled&&this.show_emoji},showInputTip:function(){return!this.disabled&&this.inputContent.length>0&&this.inputTips.length>0},inputTips:function(){for(var t=[],e=0;e<this.allCuws.length;e++)for(var n=this.allCuws[e],i=0;i<n.cuwChildren.length;i++)for(var o=n.cuwChildren[i],a=0;a<o.cuwChildren.length;a++){var r=o.cuwChildren[a];this.inputContent.length>0&&-1!==r.name.indexOf(this.inputContent)&&t.push(r.name)}return t},disabled:function(){return 0===this.userCurrentThread.id},sendButtonDisabled:function(){return this.disabled||0===this.inputContent.trim().length},prePageButtonDisabled:function(){return this.userCurrentThread.first},nextPageButtonDisabled:function(){return this.userCurrentThread.last},showCaptureFunction:function(){return u.IS_ELECTRON&&this.showAuthority.debug}}),methods:Ii()({},Object(c.b)(["updateCurrentThread","inviteRate","sendTextMessage","sendImageMessage","sendFileMessage","addBlock","getMessages","sendOtherMessage","sendPreviewMessage","sendIceCandidateMessage","sendSessionDescriptionMessage","sendThreadTextMessageSync","sendThreadImageMessageSync"]),{switchEmoji:function(){this.disabled||(this.show_emoji=!this.show_emoji)},emotionUrl:function(t){return u.EMOJI_BASE_URL+t},emotionClicked:function(t){this.inputContent+=t,this.show_emoji=!1},inputTipClicked:function(t){this.inputContent=t+" "},handleRemove:function(t,e){console.log(t,e);for(var n=0;n<this.uploadedImageList.length;n++)this.uploadedImageList[n].url===t.url&&this.uploadedImageList.splice(n,1)},handlePreview:function(t){console.log(t)},handleExceed:function(t,e){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},beforeRemove:function(t,e){return this.$confirm("确定移除 "+t.name+"？")},handleImageUploadSuccess:function(t,e){if(console.log("upload image success result:",t," file:",e),200===t.status_code){var n=t.data;this.sendThreadImageMessageSync(n)}else this.$message.error("上传图片错误，请稍后重试...")},beforeImageUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,n=t.size/1024/1024<2;e||this.$message.error("上传头像图片只能是 jpg 或 png 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!");var i=moment(new Date).format("YYYYMMDDHHmmss");return"image/jpeg"===t.type?this.upload_data.file_name=i+".jpg":"image/png"===t.type&&(this.upload_data.file_name=i+".png"),e&&n},beforeFileUpload:function(t){return this.upload_data.file_name=t.name,this.uploadFileType=t.type,t.size/1024/1024<2},handleFileUploadSuccess:function(t,e){if(console.log("upload file success result:",t," file:",e),200===t.status_code){var n=t.data;if("image/jpeg"===this.uploadFileType.type||"image/png"===this.uploadFileType.type)this.sendImageMessage(n);else{var i={fileUrl:n,format:this.uploadFileType};this.sendFileMessage(i)}}else this.$message.error("上传文件错误，请稍后重试...")},showInviteRate:function(){this.inviteRate(this.userCurrentThread.tid)},showCaptureDialog:function(){console.log("show capture")},showPhoneDialog:function(){console.log("show phone")},showBlockDialog:function(){this.blockDialogVisible=!0},doBlock:function(){if(this.blockReason.trim().length>0){var t={uid:this.userCurrentThread.visitor.uid,type:"默认类型",note:this.blockReason};this.addBlock(t),this.blockDialogVisible=!1}else this.$message.error("拉黑理由不能为空")},showRtcDialog:function(){this.disabled||(this.rtcDialogVisible=!0,this.isRtcInitiator=!0)},handleRtcDialogClose:function(t){var e=this;this.isRtcStarted?this.$confirm("确认关闭？").then(function(n){e.hangUpCall(),t()}).catch(function(n){e.hangUpCall(),t()}):(this.isRtcInitiator=!1,this.rtcDialogVisible=!1,this.isRtcStarted=!1)},closeRtcDialog:function(){var t=this;this.isRtcStarted?this.$confirm("确认关闭？").then(function(e){t.hangUpCall()}).catch(function(e){t.hangUpCall()}):(this.isRtcInitiator=!1,this.rtcDialogVisible=!1,this.isRtcStarted=!1)},startInviteVideoCall:function(){this.isRtcInitiator=!0,this.sendInviteMessage(),this.initLocalStream()},startAudioCall:function(){},acceptVideoCall:function(){this.sendAcceptMessage(),this.initLocalStream()},rejectVideoCall:function(){this.sendRejectMessage()},initLocalStream:function(){var t=this;this.rtcLocalVideo=document.getElementById("localVideo"),this.rtcLocalVideo.addEventListener("loadedmetadata",function(t){var e=t.target;console.log("本地视频窗口 "+e.id+" videoWidth: "+e.videoWidth+"px, videoHeight: "+e.videoHeight+"px.")}),this.rtcRemoteVideo=document.getElementById("remoteVideo"),this.rtcRemoteVideo.addEventListener("loadedmetadata",function(t){var e=t.target;console.log("远程视频窗口 "+e.id+" videoWidth: "+e.videoWidth+"px, videoHeight: "+e.videoHeight+"px.")}),this.rtcRemoteVideo.addEventListener("onresize",function(t){var e=t.target;console.log("接通远程视频 remote resize "+e.id+" videoWidth: "+e.videoWidth+"px, videoHeight: "+e.videoHeight+"px.")}),navigator.mediaDevices.getUserMedia(this.mediaStreamConstraints).then(function(e){t.rtcLocalStream=e,t.rtcLocalVideo.srcObject=e,t.createPeerConnection(),t.rtcPeerConnection.addStream(e)}).catch(function(t){console.log("getUserMedia() error: "+t)})},createPeerConnection:function(){try{var t=this;this.rtcPeerConnection=new RTCPeerConnection(null),this.rtcPeerConnection.addEventListener("onicecandidate",function(e){console.log("icecandidate event: ",e),t.isRtcStarted=!0,null!==e.candidate&&void 0!==e.candidate&&t.sendCandidateMessage(e.candidate)}),this.rtcPeerConnection.iceconnectionstatechange=function(t){console.log("iceconnectionstatechange: ",t)},this.rtcPeerConnection.onaddstream=function(e){console.log("Remote stream added."),t.rtcRemoteStream=e.stream,t.rtcRemoteVideo.srcObject=e.stream},this.rtcPeerConnection.onremovestream=function(t){console.log("Remote stream removed. Event: ",t)},console.log("Created RTCPeerConnnection"),this.sendReadyMessage()}catch(t){console.log("Failed to create PeerConnection, exception: "+t.message)}},createRtcOffer:function(t){var e=this;this.rtcPeerConnection.createOffer(t).then(function(t){e.rtcPeerConnection.setLocalDescription(t).then(function(){console.log("offer set localDescription success")},function(t){console.log("offer set localDescription error: ",t)}),e.sendOfferMessage(t)},function(t){console.log("createOffer error: ",t)})},createRtcAnswer:function(){var t=this;this.rtcPeerConnection.createAnswer().then(function(e){t.rtcPeerConnection.setLocalDescription(e).then(function(){console.log("answer set localDescription success")},function(t){console.log("answer set localDescription error: ",t)}),t.sendAnswerMessage(e)},function(t){console.log(t)})},hangUpCall:function(){console.log("hangUpCall"),null!==this.rtcPeerConnection&&void 0!==this.rtcPeerConnection&&(console.log("do hangUpCall"),this.rtcPeerConnection.close(),this.rtcPeerConnection=null,this.rtcLocalStream.getAudioTracks()[0].stop(),this.rtcLocalStream.getVideoTracks()[0].stop(),this.rtcDialogVisible=!1),this.isRtcStarted=!1,this.sendCloseMessage()},sendInviteMessage:function(){var t={type:u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_INVITE,content:"视频会话邀请"};this.sendOtherMessage(t)},sendCandidateMessage:function(t){var e={type:u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_CANDIDATE,content:t};this.sendIceCandidateMessage(e)},sendOfferMessage:function(t){console.log("send offer sessionDescription");var e={type:u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_OFFER_VIDEO,content:t};this.sendSessionDescriptionMessage(e)},sendAnswerMessage:function(t){console.log("send answer sessionDescription:",t);var e={type:u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_ANSWER,content:t};this.sendSessionDescriptionMessage(e)},sendAcceptMessage:function(){console.log("send accept rtc");var t={type:u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_ACCEPT,content:"接受视频会话"};this.sendOtherMessage(t)},sendRejectMessage:function(){console.log("send reject rtc");var t={type:u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_REJECT,content:"拒绝视频会话"};this.sendOtherMessage(t)},sendReadyMessage:function(){console.log("send ready rtc");var t={type:u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_READY,content:"视频就绪"};this.sendOtherMessage(t)},sendBusyMessage:function(){console.log("send busy rtc");var t={type:u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_BUSY,content:"对方忙"};this.sendOtherMessage(t)},sendCloseMessage:function(){console.log("send close rtc");var t={type:u.MESSAGE_TYPE_NOTIFICATION_WEBRTC_CLOSE,content:"关闭视频会话"};this.sendOtherMessage(t)},showHistoryMessages:function(){this.messageDialogVisible=!0},onInputChange:function(t){if(!this.disabled){var e=t.trim();e.length>0&&this.sendPreviewMessage(e)}},onKeyUp:function(t){13===t.keyCode&&this.inputContent.trim().length>0&&this.sendMessage()},sendMessage:function(){if(!this.disabled){this.show_emoji=!1;var t=this.inputContent.trim();t.length>0&&(this.sendThreadTextMessageSync(t),this.inputContent="")}},handleSearch:function(){console.log("searchMessage:",this.searchMessage)},prePage:function(){},nextPage:function(){this.getMessages(20)}}),directives:{focus:{inserted:function(t){t.focus()}}},mounted:function(){var t=this;Tt.$on(u.EVENT_BUS_SELECT_CUW,function(e){t.disabled||(t.inputContent+=e)}),Tt.$on(u.EVENT_BUS_MESSAGE_PREVIEW,function(e){e.thread.tid===t.userCurrentThread.tid&&(t.inputTipVisible=!0,e.content.trim().length>0?t.previewContent="对方正在输入:"+e.content:t.previewContent="",setTimeout(function(){this.inputTipVisible=!1},5e3))}),Tt.$on(u.EVENT_BUS_MESSAGE_WEBRTC_INVITE,function(e){t.userInfo.uid!==e.user.uid?console.log("对方：event webrtc invite"):console.log("自己：event webrtc invite"),t.isRtcInitiator||(t.rtcDialogVisible=!0)}),Tt.$on(u.EVENT_BUS_MESSAGE_WEBRTC_CANCEL,function(e){t.userInfo.uid!==e.user.uid?console.log("对方：event webrtc cancel"):console.log("自己：event webrtc cancel"),t.rtcDialogVisible=!1}),Tt.$on(u.EVENT_BUS_MESSAGE_WEBRTC_OFFER_VIDEO,function(e){if(t.userInfo.uid!==e.user.uid?console.log("对方：event webrtc offer video"):console.log("自己：event webrtc offer video"),!t.isRtcInitiator){var n=e.sessionDescription;t.rtcPeerConnection.setRemoteDescription(new RTCSessionDescription(n)),t.createRtcAnswer()}}),Tt.$on(u.EVENT_BUS_MESSAGE_WEBRTC_OFFER_AUDIO,function(e){if(t.userInfo.uid!==e.user.uid?console.log("对方：event webrtc offer audio"):console.log("自己：event webrtc offer audio"),!t.isRtcInitiator){var n=e.sessionDescription;null!=n&&(t.rtcPeerConnection.setRemoteDescription(new RTCSessionDescription(n)),t.createRtcAnswer())}}),Tt.$on(u.EVENT_BUS_MESSAGE_WEBRTC_ANSWER,function(e){if(t.userInfo.uid!==e.user.uid?console.log("对方：event webrtc answer"):console.log("自己：event webrtc answer"),t.isRtcInitiator){var n=e.sessionDescription;null!=n&&t.rtcPeerConnection.setRemoteDescription(new RTCSessionDescription(n))}}),Tt.$on(u.EVENT_BUS_MESSAGE_WEBRTC_CANDIDATE,function(e){if(t.userInfo.uid!==e.user.uid){console.log("对方：event webrtc candidate");var n=e.candidate;null!=n&&t.rtcPeerConnection.addIceCandidate(n).then(function(){console.log("addIceCandidate success")}).catch(function(t){console.log("addIceCandidate:",t)})}else console.log("自己：event webrtc candidate")}),Tt.$on(u.EVENT_BUS_MESSAGE_WEBRTC_ACCEPT,function(e){t.userInfo.uid!==e.user.uid?console.log("对方：event webrtc accept"):console.log("自己：event webrtc accept"),t.isRtcInitiator}),Tt.$on(u.EVENT_BUS_MESSAGE_WEBRTC_REJECT,function(e){t.userInfo.uid!==e.user.uid?console.log("对方：event webrtc reject"):console.log("自己：event webrtc reject"),t.hangUpCall(),t.isRtcInitiator=!1}),Tt.$on(u.EVENT_BUS_MESSAGE_WEBRTC_READY,function(e){t.userInfo.uid!==e.user.uid?(console.log("对方：event webrtc ready"),t.isRtcInitiator&&t.createRtcOffer(t.videoOfferSdpConstraints)):console.log("自己：event webrtc ready")}),Tt.$on(u.EVENT_BUS_MESSAGE_WEBRTC_BUSY,function(e){t.userInfo.uid!==e.user.uid?console.log("对方：event webrtc busy"):console.log("自己：event webrtc busy"),t.hangUpCall(),t.isRtcInitiator=!1}),Tt.$on(u.EVENT_BUS_MESSAGE_WEBRTC_CLOSE,function(e){t.userInfo.uid!==e.user.uid?console.log("对方：event webrtc close"):console.log("自己：event webrtc close"),t.hangUpCall(),t.isRtcInitiator=!1})}},ao={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-input"}},[n("div",{attrs:{id:"bd-toolbar"}},[n("li",{staticClass:"iconfont icon-emoji",attrs:{id:"bd-emoji"},on:{click:t.switchEmoji}}),t._v(" "),n("transition",{attrs:{name:"showbox"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showEmoji,expression:"showEmoji"}],staticClass:"bd-emoji-box"},t._l(t.emojis,function(e){return n("li",{key:e.file},[n("img",{attrs:{src:t.emotionUrl(e.file),data:e.title},on:{click:function(n){t.emotionClicked(e.title)}}})])}))]),t._v(" "),n("transition",{attrs:{name:"showbox"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showInputTip,expression:"showInputTip"}],staticClass:"bd-input-tip"},[n("ul",t._l(t.inputTips,function(e){return n("li",{key:e,on:{click:function(n){t.inputTipClicked(e)}}},[t._v(t._s(e))])}))])]),t._v(" "),n("el-upload",{staticClass:"bd-upload-image",attrs:{"on-preview":t.handlePreview,"on-remove":t.handleRemove,"before-remove":t.beforeRemove,"on-exceed":t.handleExceed,"file-list":t.uploadedImageList,data:t.upload_data,name:t.upload_name,action:t.uploadImageServerUrl,"show-file-list":!1,"on-success":t.handleImageUploadSuccess,"before-upload":t.beforeImageUpload,disabled:t.disabled}},[n("li",{staticClass:"iconfont icon-image"})]),t._v(" "),n("el-upload",{staticClass:"bd-upload-file",attrs:{"on-preview":t.handlePreview,"on-remove":t.handleRemove,"before-remove":t.beforeRemove,"on-exceed":t.handleExceed,"file-list":t.uploadedImageList,data:t.upload_data,name:t.upload_name,action:t.uploadFileServerUrl,"show-file-list":!1,"on-success":t.handleFileUploadSuccess,"before-upload":t.beforeFileUpload,disabled:t.disabled}},[n("li",{staticClass:"iconfont icon-file"})]),t._v(" "),n("li",{staticClass:"iconfont icon-rate",attrs:{id:"bd-rate",disabled:t.disabled},on:{click:t.showInviteRate}}),t._v(" "),t.showCaptureFunction?n("li",{staticClass:"iconfont icon-jietu",attrs:{id:"bd-jietu",disabled:t.disabled},on:{click:t.showCaptureDialog}}):t._e(),t._v(" "),t.showAuthority.debug?n("li",{staticClass:"iconfont icon-video",attrs:{id:"bd-video",disabled:t.disabled},on:{click:t.showRtcDialog}}):t._e(),t._v(" "),t.showAuthority.debug?n("li",{staticClass:"iconfont icon-phone",attrs:{id:"bd-phone",disabled:t.disabled},on:{click:t.showPhoneDialog}}):t._e(),t._v(" "),t.showAuthority.debug?n("li",{staticClass:"iconfont icon-block",attrs:{id:"bd-block",disabled:t.disabled},on:{click:t.showBlockDialog}}):t._e(),t._v(" "),t.inputTipVisible?n("li",{attrs:{id:"bd-tip"}},[t._v(t._s(t.previewContent))]):t._e(),t._v(" "),n("el-button",{staticStyle:{float:"right","margin-top":"3px","margin-right":"15px"},attrs:{size:"mini",type:"text",disabled:t.disabled},on:{click:t.showHistoryMessages}},[t._v("历史消息")])],1),t._v(" "),n("div",{attrs:{id:"bd-inputbox"}},[n("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},on:{input:t.onInputChange},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onKeyUp(e):null}},model:{value:t.inputContent,callback:function(e){t.inputContent=e},expression:"inputContent"}}),t._v(" "),n("el-button",{staticClass:"sendbutton",attrs:{disabled:t.sendButtonDisabled},on:{click:t.sendMessage}},[t._v("发 送")])],1),t._v(" "),n("el-dialog",{attrs:{title:"拉入黑名单",visible:t.blockDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.blockDialogVisible=e}}},[n("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入拉黑理由"},model:{value:t.blockReason,callback:function(e){t.blockReason=e},expression:"blockReason"}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.blockDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.doBlock}},[t._v("拉 黑")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"提示",visible:t.rtcDialogVisible,width:"40%","before-close":t.handleRtcDialogClose,center:""},on:{"update:visible":function(e){t.rtcDialogVisible=e}}},[n("div",{attrs:{id:"videos"}},[n("video",{staticStyle:{width:"320px",height:"240px"},attrs:{id:"localVideo",autoplay:"",muted:"",playsinline:""},domProps:{muted:!0}}),t._v(" "),n("video",{staticStyle:{width:"320px",height:"240px"},attrs:{id:"remoteVideo",autoplay:"",playsinline:""}})]),t._v(" "),n("div",{staticStyle:{"text-align":"center"},attrs:{id:"videoButtons"}},[t.isRtcInitiator&&!t.isRtcStarted?n("el-button",{on:{click:t.startInviteVideoCall}},[t._v("邀请视频会话")]):t._e(),t._v(" "),t.isRtcStarted?n("el-button",{on:{click:t.hangUpCall}},[t._v("结束会话")]):t._e(),t._v(" "),t.isRtcInitiator||t.isRtcStarted?t._e():n("el-button",{on:{click:t.acceptVideoCall}},[t._v("接受视频会话")]),t._v(" "),t.isRtcInitiator||t.isRtcStarted?t._e():n("el-button",{on:{click:t.rejectVideoCall}},[t._v("拒绝视频会话")])],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.closeRtcDialog}},[t._v("关闭")])],1)]),t._v(" "),n("el-dialog",{attrs:{title:"历史聊天记录",visible:t.messageDialogVisible,width:"50%",center:""},on:{"update:visible":function(e){t.messageDialogVisible=e}}},[n("bd-message"),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.messageDialogVisible=!1}}},[t._v("关闭")])],1)],1)],1)},staticRenderFns:[]};var ro={name:"bd-thread-middle",components:{BdTop:to,BdMessage:io,BdInput:n("VU/8")(oo,ao,!1,function(t){n("e9Ws")},"data-v-1dd3642c",null).exports},data:function(){return{}}},so={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"bd-thread-middle"}},[e("bd-top"),this._v(" "),e("bd-message"),this._v(" "),e("bd-input")],1)},staticRenderFns:[]};var lo=n("VU/8")(ro,so,!1,function(t){n("9Cmc")},"data-v-3130c22a",null).exports,co={name:"bd-cuw",data:function(){return{isEdit:!1,addCuwDialogVisible:!1,currentSelectedNote:{id:0,name:"",content:"",type:"",categoryId:0,cuwChildren:[]},form:{id:0,name:"",content:"",categoryId:"",cuwChildren:[]},rules:{name:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}],categoryId:[{required:!0,message:"请至少选择一个分组",trigger:"change"}]},emptyText:"暂无数据",filterCUW:"",defaultProps:{children:"cuwChildren",label:"name"}}},computed:Ii()({},Object(c.c)(["allCuws"]),{editButtonDisabled:function(){for(var t=0;t<this.allCuws[0].cuwChildren.length;t++){var e=this.allCuws[0].cuwChildren[t];if(e.id===this.currentSelectedNote.id)return!1;for(var n=0;n<e.cuwChildren.length;n++){if(e.cuwChildren[n].id===this.currentSelectedNote.id)return!1}}return!0},deleteButtonDisabled:function(){for(var t=0;t<this.allCuws[0].cuwChildren.length;t++){var e=this.allCuws[0].cuwChildren[t];if(e.id===this.currentSelectedNote.id)return e.cuwChildren.length>0;for(var n=0;n<e.cuwChildren.length;n++){if(e.cuwChildren[n].id===this.currentSelectedNote.id)return!1}}return!0}}),watch:{filterCUW:function(t){this.$refs.treeCUW.filter(t)}},methods:Ii()({},Object(c.b)(["createCategory","updateCategory","deleteCategory","cuwCreate","cuwUpdate","cuwDelete"]),{filterCUWNode:function(t,e){return!t||-1!==e.name.indexOf(t)},handleCUWNodeClick:function(t){0!==t.id&&-1!==t.id&&-2!==t.id?(this.currentSelectedNote.id=t.id,this.currentSelectedNote.name=t.name,this.currentSelectedNote.type=t.type,t.type===u.CATEGORY_TYPE_CUW_MINE?this.currentSelectedNote.cuwChildren=t.cuwChildren:this.currentSelectedNote.content=t.content,null!==t.content&&void 0!==t.content&&Tt.$emit(u.EVENT_BUS_SELECT_CUW,t.content)):this.currentSelectedNote.id=0},addCategory:function(){var t=this;this.$prompt("请输入分组","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var n=e.value;if(console.log(n),null!=n&&n.length>0){var i={parent_id:0,name:n,type:u.CATEGORY_TYPE_CUW_MINE};t.createCategory(i)}}).catch(function(){})},addCUW:function(){this.isEdit=!1,this.addCuwDialogVisible=!0},doAddCuw:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;if(t.addCuwDialogVisible=!1,t.isEdit){var n={id:t.form.id,name:t.form.name,content:t.form.content};t.cuwUpdate(n),t.currentSelectedNote.id=0}else{var i={categoryId:t.form.categoryId,name:t.form.name,content:t.form.content};t.cuwCreate(i)}})},editCUW:function(){var t=this;this.isEdit=!0,this.form.id=this.currentSelectedNote.id,this.form.name=this.currentSelectedNote.name,this.currentSelectedNote.type===u.CATEGORY_TYPE_CUW_MINE?this.$prompt("编辑分组","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.form.name}).then(function(e){var n=e.value;if(null!=n&&n.length>0){var i={category_id:t.form.id,name:n};t.updateCategory(i),t.currentSelectedNote.id=0}}).catch(function(){}):(this.form.categoryId=this.currentSelectedNote.categoryId,this.form.content=this.currentSelectedNote.content,this.addCuwDialogVisible=!0)},deleteCUW:function(){var t=this;this.currentSelectedNote.cuwChildren.length>0?this.$message({message:"请首先删除子常用语",type:"warning"}):this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.currentSelectedNote.type===u.CATEGORY_TYPE_CUW_MINE?t.deleteCategory(t.currentSelectedNote.id):t.cuwDelete(t.currentSelectedNote.id),t.currentSelectedNote.id=0}).catch(function(){})}}),created:function(){},mounted:function(){}},uo={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-cuw"}},[n("el-input",{attrs:{size:"mini",placeholder:"搜索","suffix-icon":"el-icon-search"},model:{value:t.filterCUW,callback:function(e){t.filterCUW=e},expression:"filterCUW"}}),t._v(" "),n("el-tree",{ref:"treeCUW",staticClass:"filter-tree",attrs:{"highlight-current":!0,data:t.allCuws,props:t.defaultProps,"default-expand-all":"","filter-node-method":t.filterCUWNode},on:{"node-click":t.handleCUWNodeClick}}),t._v(" "),n("div",{staticStyle:{"margin-top":"15px",float:"left"}},[n("el-dropdown",{staticStyle:{"margin-right":"5px",float:"left"}},[n("el-button",{attrs:{type:"success",size:"mini"}},[t._v("\n        添加"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(e){return t.addCategory(e)}}},[t._v("分组")]),t._v(" "),n("el-dropdown-item",{nativeOn:{click:function(e){return t.addCUW(e)}}},[t._v("常用语")])],1)],1),t._v(" "),n("el-button",{staticStyle:{"margin-right":"-5px",float:"left"},attrs:{type:"primary",size:"mini",disabled:t.editButtonDisabled},on:{click:function(e){t.editCUW()}}},[t._v("编辑")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{type:"danger",size:"mini",disabled:t.deleteButtonDisabled},on:{click:function(e){t.deleteCUW()}}},[t._v("删除")])],1),t._v(" "),n("el-dialog",{attrs:{title:"添加常用语",visible:t.addCuwDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.addCuwDialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"标题",prop:"name"}},[n("el-input",{attrs:{placeholder:"标题"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"内容",prop:"content"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:20}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),t.isEdit?t._e():n("el-form-item",{attrs:{label:"所属分组",prop:"categoryId"}},[0===t.allCuws[0].cuwChildren.length?n("span",[t._v("请首先创建至少一个分组")]):t._e(),t._v(" "),n("el-radio-group",{model:{value:t.form.categoryId,callback:function(e){t.$set(t.form,"categoryId",e)},expression:"form.categoryId"}},t._l(t.allCuws[0].cuwChildren,function(e){return e.id>0?n("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))]):t._e()}))],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.addCuwDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.doAddCuw()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var po=n("VU/8")(co,uo,!1,function(t){n("mv98")},"data-v-54add2fc",null).exports,mo={name:"bd-info",data:function(){return{tags:[],inputVisible:!1,inputValue:""}},computed:Ii()({},Object(c.c)(["userCurrentThread","fingerPrints"]),{disabled:function(){return 0===this.userCurrentThread.id}}),methods:Ii()({},Object(c.b)(["fingerPrint","userTag"]),{handleTagDelete:function(t){},showTagInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){this.inputValue}})},fo={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-info"}},[n("el-table",{staticClass:"bd-info-table",attrs:{size:"mini",data:t.fingerPrints}},[n("el-table-column",{attrs:{prop:"name",label:"参数"}}),t._v(" "),n("el-table-column",{attrs:{prop:"value",label:"值"}})],1),t._v(" "),t._l(t.tags,function(e){return n("el-tag",{key:e.id,staticClass:"bd-user-tags",attrs:{closable:!0,"close-transition":!1},on:{close:function(n){t.handleTagDelete(e.id)}}},[t._v("\n      "+t._s(e.name)+"\n  ")])}),t._v(" "),t.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"bd-input-new-tag",attrs:{size:"mini",placeholder:"回车输入"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputConfirm(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):t._e()],2)},staticRenderFns:[]};var _o={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-support"}},[this._v("\n  内部知识库\n")])},staticRenderFns:[]};var ho={name:"bd-thread-right",components:{BdCuw:po,BdInfo:n("VU/8")(mo,fo,!1,function(t){n("gbzW")},"data-v-3f2986d3",null).exports,BdSupport:n("VU/8")({name:"bd-support"},_o,!1,function(t){n("y2K1")},"data-v-ce46642c",null).exports},data:function(){return{activeName:"info"}},computed:Ii()({},Object(c.c)(["userCurrentThread","showAuthority"]),{username:function(){return this.userCurrentThread.visitor.username}}),methods:Ii()({},Object(c.b)(["getCuws","fingerPrint","userTag"]),{handleClick:function(t,e){"cuw"===t.name||t.name}}),mounted:function(){this.getCuws()}},go={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-thread-right"}},[n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"用户信息",name:"info"}},[n("bd-info")],1),t._v(" "),n("el-tab-pane",{attrs:{label:"常用语",name:"cuw"}},[n("bd-cuw")],1),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{attrs:{label:"知识库",name:"support"}},[n("bd-support")],1):t._e()],1)],1)},staticRenderFns:[]};var vo={name:"bd-thread",components:{BdLeft:Xi,BdMiddle:lo,BdRight:n("VU/8")(ho,go,!1,function(t){n("sc2Y")},"data-v-572b5edc",null).exports}},Eo={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"bd-thread"}},[e("el-row",[e("el-col",{attrs:{span:5,id:"left-col"}},[e("bd-left")],1),this._v(" "),e("el-col",{attrs:{span:13,id:"middle-col"}},[e("bd-middle")],1),this._v(" "),e("el-col",{attrs:{span:6,id:"right-col"}},[e("bd-right")],1)],1)],1)},staticRenderFns:[]};var To=n("VU/8")(vo,Eo,!1,function(t){n("qpsY")},"data-v-47351fc4",null).exports,bo={name:"bd-queuing",data:function(){return{pageSize:20,currentPage:1,dialogVisible:!1,isEdit:!1}},computed:Ii()({},Object(c.c)(["userQueues"])),methods:Ii()({},Object(c.b)(["getQueue"]),{handleSizeChange:function(t){console.log(t),this.pageSize=t;var e={page:this.currentPage-1,size:this.pageSize};this.getQueue(e)},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={page:this.currentPage-1,size:this.pageSize};this.getQueue(e)},handleUrlClick:function(t){window.open(t)},handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)}})},So={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-queue"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""}},[t._v("帮助文档")]),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.userQueues.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.userQueues.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.nickname",label:"访客昵称"}}),t._v(" "),n("el-table-column",{attrs:{label:"等待时长"}}),t._v(" "),n("el-table-column",{attrs:{prop:"workGroup.nickname",label:"工作组"}}),t._v(" "),n("el-table-column",{attrs:{prop:"joined_at",label:"进入时间"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.client",label:"来源"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("接入")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.userQueues.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var Co=n("VU/8")(bo,So,!1,function(t){n("IKDF")},"data-v-536d3cc6",null).exports,yo={name:"bd-browsing",data:function(){return{pageSize:20,currentPage:1,dialogVisible:!1,isEdit:!1}},computed:Ii()({},Object(c.c)(["userBrowses","accessToken"])),methods:Ii()({},Object(c.b)(["getBrowse"]),{refresh:function(){this.getBrowse({page:0,size:20})},timeInterval:function(t){var e=moment().diff(t,"YYYY-MM-DD HH:mm:ss"),n=moment.duration(e);return Math.floor(n.asHours())+"小时"+moment.utc(e).format("mm")+"分钟"},getOs:function(t){for(var e=t.visitor.fingerPrint2s,n=0;n<e.length;n++){var i=t.visitor.fingerPrint2s[n];if("os-name"===i.key)return i.value}},getBrowser:function(t){for(var e=t.visitor.fingerPrint2s,n=0;n<e.length;n++){var i=t.visitor.fingerPrint2s[n];if("browser-name"===i.key)return i.value}},handleSizeChange:function(t){console.log(t),this.pageSize=t;var e={page:this.currentPage-1,size:this.pageSize};this.getBrowse(e)},handleCurrentChange:function(t){this.currentPage=t;var e={page:this.currentPage-1,size:this.pageSize};this.getBrowse(e)},handleUrlClick:function(t){window.open(t)},invite:function(t,e){var n,i,o,a,r=this;n=e.bid,i=this.accessToken,o=function(t){console.log("invite:",t),r.$message.success("邀请会话成功")},a=function(t){console.log(t),r.$message.error("邀请会话错误")},axios.post("/api/browse/invite?access_token="+i,{bid:n,client:u.HTTP_CLIENT}).then(function(t){o(t.data)}).catch(function(t){a(t)})},handleDelete:function(t,e){console.log(t,e)}})},Io={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-browse"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-refresh",size:"mini",circle:""},on:{click:t.refresh}}),t._v(" "),n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""}},[t._v("帮助文档")]),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",small:"","current-page":t.currentPage,"page-size":t.pageSize,total:t.userBrowses.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.userBrowses.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.nickname",label:"访客昵称",width:"140"}}),t._v(" "),n("el-table-column",{attrs:{prop:"url",label:"当前页面网址"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.url?n("span",{staticStyle:{cursor:"pointer",color:"#3a8ee6"},on:{click:function(n){t.handleUrlClick(e.row.url.url)}}},[t._v(t._s(e.row.url.url))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"当前页面标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.url?n("span",{staticStyle:{cursor:"pointer",color:"#3a8ee6"},on:{click:function(n){t.handleUrlClick(e.row.url.url)}}},[t._v(t._s(e.row.url.title))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"停留时长",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.timeInterval(e.row.createdAt)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"进入时间",width:"140"}}),t._v(" "),n("el-table-column",{attrs:{prop:"referrer",label:"操作系统",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.getOs(e.row)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"referrer",label:"浏览器",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.getBrowser(e.row)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){t.invite(e.$index,e.row)}}},[t._v("邀请")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.userBrowses.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var wo=n("VU/8")(yo,Io,!1,function(t){n("A5R5")},"data-v-2744593a",null).exports,Ao={name:"bd-queuing",data:function(){return{pageSize:20,currentPage:1,dialogVisible:!1,isEdit:!1}},computed:Ii()({},Object(c.c)(["userQueues"])),methods:Ii()({},Object(c.b)(["getQueue"]),{handleSizeChange:function(t){console.log(t),this.pageSize=t;var e={page:this.currentPage-1,size:this.pageSize};this.getQueue(e)},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={page:this.currentPage-1,size:this.pageSize};this.getQueue(e)},handleUrlClick:function(t){window.open(t)},handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)}})},ko={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-app"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""}},[t._v("帮助文档")]),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.userQueues.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.userQueues.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.nickname",label:"访客昵称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"joined_at",label:"上线时间"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.client",label:"来源"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("接入")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.userQueues.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var Ro={name:"bd-visitor",data:function(){return{activeName:"browse"}},components:{BdQueue:Co,BdBrowse:wo,BdApp:n("VU/8")(Ao,ko,!1,function(t){n("ksHO")},"data-v-3976cfb5",null).exports},computed:Ii()({},Object(c.c)(["showAuthority"])),methods:Ii()({},Object(c.b)(["getQueue","getBrowse"]),{handleClick:function(t,e){if("queue"===t.name){this.getQueue({page:0,size:20})}else if("browse"===t.name){this.getBrowse({page:0,size:20})}else t.name}})},No={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-visitor"}},[n("el-tabs",{staticStyle:{height:"100%"},attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"排队访客",name:"queue"}},[n("bd-queue")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"网站在线",name:"browse"}},[n("bd-browse")],1),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"APP在线",name:"app"}},[n("bd-app")],1):t._e()],1)],1)},staticRenderFns:[]};var Oo=n("VU/8")(Ro,No,!1,function(t){n("cF37")},"data-v-e62946ee",null).exports,xo={name:"bd-message",props:["viewThreadTid"],data:function(){return{imageDialogVisible:!1,currentImageUrl:"",currentVoiceUrl:"",dialogTableVisible:!1,currentPage:0,result:{first:!0,last:!0,totalElements:""},messages:[],emojiBaseUrl:u.EMOJI_BASE_URL}},computed:Ii()({},Object(c.c)(["userInfo","accessToken"]),Object(c.d)(["emotionMap"]),{show_header:function(){return!0},prePageButtonDisabled:function(){return this.result.first},nextPageButtonDisabled:function(){return this.result.last}}),watch:{viewThreadTid:function(t,e){console.log("newThreadTid:",t),this.currentPage=0,this.result={first:!0,last:!0,totalElements:""},this.messages=[],this.httpFetch()}},methods:Ii()({},Object(c.b)(["getMessages"]),{imageClicked:function(t){console.log("image clicked:",t),this.currentImageUrl=t,this.imageDialogVisible=!0},voiceClicked:function(t){console.log("voice clicked:",t),this.currentVoiceUrl=t,this.dialogTableVisible=!0},is_self:function(t){return!t.user.visitor},is_sending:function(t){return t.status===u.MESSAGE_STATUS_SENDING},is_stored:function(t){return t.status===u.MESSAGE_STATUS_STORED},is_received:function(t){return t.status===u.MESSAGE_STATUS_RECEIVED},is_error:function(t){return t.status===u.MESSAGE_STATUS_ERROR},is_read:function(t){return t.status===u.MESSAGE_STATUS_READ},is_type_text:function(t){return t.type===u.MESSAGE_TYPE_TEXT||t.type===u.MESSAGE_TYPE_NOTIFICATION_THREAD},is_type_robot:function(t){return t.type===u.MESSAGE_TYPE_ROBOT},is_type_image:function(t){return t.type===u.MESSAGE_TYPE_IMAGE},is_type_file:function(t){return t.type===u.MESSAGE_TYPE_FILE},is_type_voice:function(t){return t.type===u.MESSAGE_TYPE_VOICE},is_type_video:function(t){return t.type===u.MESSAGE_TYPE_VIDEO},is_type_shortvideo:function(t){return t.type===u.MESSAGE_TYPE_SHORTVIDEO},is_type_location:function(t){return t.type===u.MESSAGE_TYPE_LOCATION},is_type_link:function(t){return t.type===u.MESSAGE_TYPE_LINK},is_type_event:function(t){return t.type===u.MESSAGE_TYPE_EVENT},is_type_questionnaire:function(t){return t.type===u.MESSAGE_TYPE_QUESTIONNAIRE},is_type_company:function(t){return t.type===u.MESSAGE_TYPE_COMPANY},is_type_workGroup:function(t){return t.type===u.MESSAGE_TYPE_WORK_GROUP},is_type_notification:function(t){return t.type!==u.MESSAGE_TYPE_NOTIFICATION_THREAD&&t.type.startsWith(u.MESSAGE_TYPE_NOTIFICATION)},player_url:function(){return u.VOICE_PLAYER_BASE_URL+this.currentVoiceUrl},replaceFace:function(t){var e=this.emotionMap,n=t.match(/\[[\u4E00-\u9FA5NoOK]+\]/g),i=t;if(n)for(var o=0;o<n.length;o++)i=i.replace(n[o],"<img height='25px' width='25px' style='margin-top:5px;' src='"+this.emojiBaseUrl+e[n[o]]+"'>");return i},handleImageDialogClose:function(t){t()},scrollToBottom:function(){var t=this;this.$nextTick(function(){var e=t.$refs.list;null!=e&&(e.scrollTop=e.scrollHeight)})},prePage:function(){this.currentPage-=1,this.httpFetch()},nextPage:function(){this.currentPage+=1,this.httpFetch()},httpFetch:function(){var t,e,n,i,o,a=this;t=this.viewThreadTid,e=this.currentPage,n=this.accessToken,i=function(t){console.log(t),a.result=t.data,t.data.content.forEach(function(t){a.messages.unshift(t)})},o=function(t){console.log(t)},axios.get("/api/messages/thread?access_token="+n,{params:{tid:t,page:e,size:100,client:u.HTTP_CLIENT}}).then(function(t){i(t.data)}).catch(function(t){o(t)})}}),created:function(){console.log("created:",this.viewThreadTid),this.httpFetch()},mounted:function(){var t=this;Tt.$on(u.EVENT_BUS_MESSAGE_SCROLL_TO_BOTTOM,function(){var e=t;e.$nextTick(function(){var t=e.$refs.list;null!=t&&(t.scrollTop=t.scrollHeight)})})},filters:{datetime:function(t){return"string"==typeof t?moment(t).format("YYYY-MM-DD HH:mm:ss"):t}}},Uo={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-message"}},[n("el-dialog",{attrs:{title:"查看大图",modal:!1,visible:t.imageDialogVisible,width:"30%","before-close":t.handleImageDialogClose},on:{"update:visible":function(e){t.imageDialogVisible=e}}},[n("span",[n("img",{staticStyle:{height:"100%",width:"100%"},attrs:{src:t.currentImageUrl,alt:"[查看大图]"}})]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.imageDialogVisible=!1}}},[t._v("确 定")])],1)]),t._v(" "),n("el-dialog",{attrs:{title:"语音播放器",modal:!1,width:"30%",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[n("iframe",{attrs:{src:t.player_url}})]),t._v(" "),n("ul",{ref:"list",staticClass:"bd-message-ul"},t._l(t.messages,function(e){return n("li",{key:e.mid},[n("p",{staticClass:"timestamp"},[n("span",[t._v(t._s(t._f("datetime")(e.createdAt)))]),n("br"),t._v(" "),t.is_type_notification(e)?n("span",[t._v(t._s(e.content))]):t._e()]),t._v(" "),t.is_type_notification(e)?t._e():n("div",{staticClass:"main",class:{self:t.is_self(e)}},[t.show_header?n("img",{staticClass:"avatar",attrs:{width:"30",height:"30",src:e.user.avatar}}):t._e(),t._v(" "),n("div",{staticClass:"name"},[t._v(t._s(e.user.name))]),t._v(" "),t.is_type_text(e)?n("div",{staticClass:"text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}}):t._e(),t._v(" "),t.is_type_robot(e)?n("div",{staticClass:"text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}}):t._e(),t._v(" "),t.is_type_questionnaire(e)?n("div",{staticClass:"text"},[n("span",[t._v(t._s(e.questionnaire.questionnaireItems[0].title))]),t._v(" "),t._l(e.questionnaire.questionnaireItems[0].questionnaireItemItems,function(e){return n("span",{key:e.id},[n("br"),t._v(" "),n("span",{staticStyle:{color:"#007bff",cursor:"pointer"},on:{click:function(n){t.chooseQuestionnaire(e.qid)}}},[t._v(t._s(e.content))])])})],2):t._e(),t._v(" "),t.is_type_company(e)?n("div",{staticClass:"text"},[n("span",[t._v(t._s(e.content))]),t._v(" "),t._l(e.company.countries,function(i){return n("span",{key:i.cid},[n("br"),t._v(" "),n("span",{staticStyle:{color:"#007bff",cursor:"pointer"},on:{click:function(n){t.chooseCountry(e.company.cid,i.cid)}}},[t._v(t._s(i.name))])])})],2):t._e(),t._v(" "),t.is_type_workGroup(e)?n("div",{staticClass:"text"},[n("span",[t._v(t._s(e.content))]),t._v(" "),t._l(e.workGroups,function(e){return n("span",{key:e.wid},[n("br"),t._v(" "),n("span",{staticStyle:{color:"#007bff",cursor:"pointer"},on:{click:function(n){t.chooseWorkGroup(e.wid)}}},[t._v(t._s(e.nickname))])])})],2):t._e(),t._v(" "),t.is_type_image(e)?n("div",{staticClass:"text"},[n("img",{staticStyle:{"padding-top":"10px","padding-bottom":"10px",width:"100px",height:"100px"},attrs:{src:e.imageUrl,alt:"[图片]"},on:{click:function(n){t.imageClicked(e.imageUrl)}}})]):t._e(),t._v(" "),t.is_type_file(e)?n("div",{staticClass:"text"},[n("img",{staticStyle:{"padding-top":"10px","padding-bottom":"10px",width:"25px",height:"25px"},attrs:{src:"https://www.bytedesk.com/img/input/file.png",alt:"[文件]"},on:{click:function(n){t.fileClicked(e.fileUrl)}}}),t._v(" "),n("span",[n("a",{attrs:{href:e.fileUrl,target:"_blank"}},[t._v("查看文件")])])]):t._e(),t._v(" "),t.is_type_voice(e)?n("div",{staticClass:"text"},[n("img",{staticStyle:{"padding-top":"10px","padding-bottom":"10px",width:"25px",height:"20px"},attrs:{src:"https://www.bytedesk.com/img/input/voice_received.png",alt:"[语音]"},on:{click:function(n){t.voiceClicked(e.voiceUrl)}}})]):t._e(),t._v(" "),t.is_type_video(e)?n("div",{staticClass:"text"},[t._v(t._s(e.videoOrShortUrl))]):t._e(),t._v(" "),t.is_type_shortvideo(e)?n("div",{staticClass:"text"},[t._v(t._s(e.videoOrShortThumbUrl))]):t._e(),t._v(" "),t.is_type_location(e)?n("div",{staticClass:"text"},[t._v(t._s(e.label))]):t._e(),t._v(" "),t.is_type_link(e)?n("div",{staticClass:"text"},[t._v(t._s(e.title))]):t._e(),t._v(" "),t.is_type_event(e)?n("div",{staticClass:"text"},[t._v(t._s(e.content))]):t._e(),t._v(" "),t.is_self(e)?n("div",{staticClass:"status"},[t.is_sending(e)?n("i",{staticClass:"el-icon-loading",staticStyle:{"font-size":"10px"}}):t._e(),t._v(" "),t.is_stored(e)?n("i",{staticClass:"fa fa-times-circle",staticStyle:{"font-size":"10px"}}):t._e(),t._v(" "),t.is_received(e)?n("i",{staticStyle:{"font-size":"10px"}},[t._v("已收到")]):t._e(),t._v(" "),t.is_read(e)?n("i",{staticStyle:{"font-size":"10px"}},[t._v("已读")]):t._e(),t._v(" "),t.is_error(e)?n("i",{staticClass:"iconfont icon-error",staticStyle:{"font-size":"10px"}}):t._e()]):t._e()])])})),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:8,offset:9}},[n("el-button",{attrs:{size:"mini",disabled:t.prePageButtonDisabled},on:{click:t.prePage}},[t._v("上一页")]),t._v(" "),n("el-button",{attrs:{size:"mini",disabled:t.nextPageButtonDisabled},on:{click:t.nextPage}},[t._v("下一页")]),t._v(" "),n("br"),n("br"),t._v(" "),n("span",{staticStyle:{"margin-left":"40px"}},[t._v("消息总条数: "+t._s(this.result.totalElements))])],1)],1)],1)},staticRenderFns:[]};var Po=n("VU/8")(xo,Uo,!1,function(t){n("+5Q6")},"data-v-14163581",null).exports,Do={name:"bd-thread",data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]},createdAtInterval:["",""],nickname:"",pageSize:20,currentPage:1,dialogVisible:!1,isEdit:!1,currentWorkGroup:"全部工作组",currentAgent:"全部客服",currentClient:"全部来源",currentClientCommand:"",messageDialogVisible:!1,viewThreadTid:"",electron:u.IS_ELECTRON}},components:{CmMessage:Po},computed:Ii()({},Object(c.c)(["historyThreads","userInfo","agents","workGroups","filterWorkGroups","filterWorkGroupMembers","showAuthority"])),methods:Ii()({},Object(c.b)(["getHistoryThread","filterHistoryThread"]),{timeInterval:function(t,e){return moment.utc(moment(e,"YYYY-MM-DD HH:mm:ss").diff(moment(t,"YYYY-MM-DD HH:mm:ss"))).format("HH:mm:ss")},formatClient:function(t){return t===u.CLIENT_WEB?"网站":t===u.CLIENT_WAP?"手机网站":t===u.CLIENT_ANDROID?"安卓App":t===u.CLIENT_IOS?"苹果App":t===u.CLIENT_WECHAT_MP?"公众号":t===u.CLIENT_WECHAT_MINI?"小程序":void 0},gotoHelpdoc:function(){var t=u.HELP_BASE_URL+"201809042103521";this.electron?ipcRenderer.send("open-external-url",t):window.open(t)},handleWorkGroupCommand:function(t){console.log(t),this.currentWorkGroup="all"===t?"全部工作组":t},handleAgentCommand:function(t){console.log(t),this.currentAgent="all"===t?"全部客服":t},handleClientCommand:function(t){console.log(t),this.currentClientCommand=t,"all"===t?this.currentClient="全部来源":"web"===t?this.currentClient="网站":"android"===t?this.currentClient="安卓":"ios"===t?this.currentClient="苹果":"mp"===t?this.currentClient="公众号":"mini"===t&&(this.currentClient="小程序")},handleQuery:function(){if(""!==this.createdAtInterval[0]||""!==this.createdAtInterval[1]||""!==this.nickname||20!==this.pageSize||1!==this.currentPage||"全部工作组"!==this.currentWorkGroup||"全部客服"!==this.currentAgent||"全部来源"!==this.currentClient){console.log(this.createdAtInterval[0],this.createdAtInterval[1],this.nickname,this.pageSize,this.currentPage,this.currentWorkGroup,this.currentAgent,this.currentClient),this.showAuthority.admin||(console.log("not admin"),this.currentAgent=this.userInfo.realName),null===this.createdAtInterval&&(this.createdAtInterval=["",""]);var t={page:this.currentPage-1,size:this.pageSize,nickname:this.nickname,createdAtStart:moment(this.createdAtInterval[0]).format("YYYY-MM-DD HH:mm:ss"),createdAtEnd:moment(this.createdAtInterval[1]).format("YYYY-MM-DD HH:mm:ss"),workGroupNickname:"全部工作组"===this.currentWorkGroup?"all":this.currentWorkGroup,agentRealName:"全部客服"===this.currentAgent?"all":this.currentAgent,client:this.currentClientCommand};this.filterHistoryThread(t)}else{this.getHistoryThread({page:0,size:20})}},handleExport:function(){console.log("export")},handleSizeChange:function(t){console.log(t),this.pageSize=t;var e={page:this.currentPage-1,size:this.pageSize};this.getHistoryThread(e)},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={page:this.currentPage-1,size:this.pageSize};this.getHistoryThread(e)},handleView:function(t,e){this.viewThreadTid=e.tid,this.messageDialogVisible=!0},handleDelete:function(t,e){console.log(t,e)}}),created:function(){},mounted:function(){}},Mo={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-thread"}},[n("el-button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-input",{staticStyle:{width:"155px","margin-right":"10px"},attrs:{size:"mini",placeholder:"访客昵称",clearable:""},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),t._v(" "),n("span",{staticStyle:{"font-size":"12px"}},[t._v("进入时间：")]),t._v(" "),n("el-date-picker",{staticStyle:{width:"345px"},attrs:{size:"mini",type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.createdAtInterval,callback:function(e){t.createdAtInterval=e},expression:"createdAtInterval"}}),t._v(" "),n("el-dropdown",{on:{command:t.handleWorkGroupCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentWorkGroup)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部工作组")]),t._v(" "),t._l(t.filterWorkGroups,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.nickname}},[t._v(t._s(e.nickname))])})],2)],1),t._v(" "),t.showAuthority.admin?n("el-dropdown",{on:{command:t.handleAgentCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentAgent)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部客服")]),t._v(" "),t._l(t.filterWorkGroupMembers,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.realName}},[t._v(t._s(e.realName))])})],2)],1):t._e(),t._v(" "),n("el-dropdown",{on:{command:t.handleClientCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentClient)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部来源")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"web"}},[t._v("网站")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"android"}},[t._v("安卓")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"ios"}},[t._v("苹果")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mp"}},[t._v("公众号")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mini"}},[t._v("小程序")])],1)],1),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),t.showAuthority.debug?n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-download"},on:{click:t.handleExport}},[t._v("导出")]):t._e(),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",small:"","current-page":t.currentPage,"page-size":t.pageSize,total:t.historyThreads.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.historyThreads.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.nickname",label:"访客昵称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"进入时间"}}),t._v(" "),n("el-table-column",{attrs:{prop:"startedAt",label:"接入时间"}}),t._v(" "),n("el-table-column",{attrs:{label:"等待时间(时:分:秒)"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.timeInterval(e.row.createdAt,e.row.startedAt)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"agents",label:"客服真名"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.agents,function(e){return n("el-tag",{key:e.id},[t._v(t._s(e.realName))])})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"autoClose",label:"超时关闭"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.autoClose?n("span",[t._v("是")]):t._e(),t._v(" "),e.row.autoClose?t._e():n("span",[t._v("否")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"workGroup.nickname",label:"工作组"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.workGroup?n("span",[t._v(t._s(e.row.workGroup.nickname))]):t._e(),t._v(" "),e.row.workGroup?t._e():n("span",[t._v("指定坐席")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.client",label:"来源",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.formatClient(e.row.visitor.client)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleView(e.$index,e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.historyThreads.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"历史聊天记录",visible:t.messageDialogVisible,width:"50%",center:""},on:{"update:visible":function(e){t.messageDialogVisible=e}}},[n("cm-message",{attrs:{viewThreadTid:t.viewThreadTid}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.messageDialogVisible=!1}}},[t._v("关闭")])],1)],1)],1)},staticRenderFns:[]};var Vo=n("VU/8")(Do,Mo,!1,function(t){n("QTVx")},"data-v-9d4a80ee",null).exports,Go={name:"bd-rate",data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]},createdAtInterval:["",""],nickname:"",pageSize:20,currentPage:1,dialogVisible:!1,isEdit:!1,currentWorkGroup:"全部工作组",currentAgent:"全部客服",currentClient:"全部来源",currentClientCommand:"",messageDialogVisible:!1,viewThreadTid:"",electron:u.IS_ELECTRON}},components:{CmMessage:Po},computed:Ii()({},Object(c.c)(["rates","userInfo","agents","workGroups","filterWorkGroups","filterWorkGroupMembers","showAuthority"])),methods:Ii()({},Object(c.b)(["getRates","filterRate"]),{timeInterval:function(t,e){return moment(t,"YYYY-MM-DD HH:mm:ss").diff(e,"YYYY-MM-DD HH:mm:ss")},formatClient:function(t){return t===u.CLIENT_WEB?"网站":t===u.CLIENT_WAP?"手机网站":t===u.CLIENT_ANDROID?"安卓App":t===u.CLIENT_IOS?"苹果App":t===u.CLIENT_WECHAT_MP?"公众号":t===u.CLIENT_WECHAT_MINI?"小程序":void 0},gotoHelpdoc:function(){var t=u.HELP_BASE_URL+"201809042103521";this.electron?ipcRenderer.send("open-external-url",t):window.open(t)},handleWorkGroupCommand:function(t){console.log(t),this.currentWorkGroup="all"===t?"全部工作组":t},handleAgentCommand:function(t){console.log(t),this.currentAgent="all"===t?"全部客服":t},handleClientCommand:function(t){console.log(t),this.currentClientCommand=t,"all"===t?this.currentClient="全部来源":"web"===t?this.currentClient="网站":"android"===t?this.currentClient="安卓":"ios"===t?this.currentClient="苹果":"mp"===t?this.currentClient="公众号":"mini"===t&&(this.currentClient="小程序")},handleQuery:function(){if(""!==this.createdAtInterval[0]||""!==this.createdAtInterval[1]||""!==this.nickname||20!==this.pageSize||1!==this.currentPage||"全部工作组"!==this.currentWorkGroup||"全部客服"!==this.currentAgent||"全部来源"!==this.currentClient){this.showAuthority.admin?console.log("admin"):(console.log("not admin"),this.currentAgent=this.userInfo.realName),null===this.createdAtInterval&&(this.createdAtInterval=["",""]);var t={page:this.currentPage-1,size:this.pageSize,nickname:this.nickname,createdAtStart:moment(this.createdAtInterval[0]).format("YYYY-MM-DD HH:mm:ss"),createdAtEnd:moment(this.createdAtInterval[1]).format("YYYY-MM-DD HH:mm:ss"),workGroupNickname:"全部工作组"===this.currentWorkGroup?"all":this.currentWorkGroup,agentRealName:"全部客服"===this.currentAgent?"all":this.currentAgent,client:this.currentClientCommand};console.log("query",t),this.filterRate(t)}else{this.getRates({page:0,size:20})}},handleExport:function(){console.log("export")},handleSizeChange:function(t){console.log(t),this.pageSize=t;var e={page:this.currentPage-1,size:this.pageSize};this.getRates(e)},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={page:this.currentPage-1,size:this.pageSize};this.getRates(e)},handleView:function(t,e){console.log(t,e),this.viewThreadTid=e.thread.tid,this.messageDialogVisible=!0},handleDelete:function(t,e){console.log(t,e)}}),created:function(){},mounted:function(){}},Lo={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-rate"}},[n("el-button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-input",{staticStyle:{width:"155px","margin-right":"10px"},attrs:{size:"mini",placeholder:"访客昵称",clearable:""},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),t._v(" "),n("span",{staticStyle:{"font-size":"12px"}},[t._v("进入时间：")]),t._v(" "),n("el-date-picker",{staticStyle:{width:"345px"},attrs:{size:"mini",type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.createdAtInterval,callback:function(e){t.createdAtInterval=e},expression:"createdAtInterval"}}),t._v(" "),n("el-dropdown",{on:{command:t.handleWorkGroupCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentWorkGroup)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部工作组")]),t._v(" "),t._l(t.filterWorkGroups,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.nickname}},[t._v(t._s(e.nickname))])})],2)],1),t._v(" "),t.showAuthority.admin?n("el-dropdown",{on:{command:t.handleAgentCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentAgent)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部客服")]),t._v(" "),t._l(t.filterWorkGroupMembers,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.realName}},[t._v(t._s(e.realName))])})],2)],1):t._e(),t._v(" "),n("el-dropdown",{on:{command:t.handleClientCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentClient)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部来源")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"web"}},[t._v("网站")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"android"}},[t._v("安卓")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"ios"}},[t._v("苹果")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mp"}},[t._v("公众号")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mini"}},[t._v("小程序")])],1)],1),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),t.showAuthority.debug?n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-download"},on:{click:t.handleExport}},[t._v("导出")]):t._e(),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",small:"","current-page":t.currentPage,"page-size":t.pageSize,total:t.rates.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.rates.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.nickname",label:"访客昵称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"score",label:"评分",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"note",label:"附言"}}),t._v(" "),n("el-table-column",{attrs:{prop:"invite",label:"邀评"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.invite?n("span",[t._v("是")]):t._e(),t._v(" "),e.row.invite?t._e():n("span",[t._v("否")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"auto",label:"系统评价"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.auto?n("span",[t._v("是")]):t._e(),t._v(" "),e.row.auto?t._e():n("span",[t._v("否")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"时间",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"thread.agents",label:"客服真名"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.thread.agents,function(e){return n("el-tag",{key:e.id},[t._v(t._s(e.realName))])})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"thread.workGroup.nickname",label:"工作组"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.client",label:"来源",width:"80",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.formatClient(e.row.visitor.client)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleView(e.$index,e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.rates.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"历史聊天记录",visible:t.messageDialogVisible,width:"50%",center:""},on:{"update:visible":function(e){t.messageDialogVisible=e}}},[n("cm-message",{attrs:{viewThreadTid:t.viewThreadTid}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.messageDialogVisible=!1}}},[t._v("关闭")])],1)],1)],1)},staticRenderFns:[]};var Bo=n("VU/8")(Go,Lo,!1,function(t){n("R5hJ")},"data-v-9d2c4874",null).exports,zo={name:"bd-leave-msg",data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]},createdAtInterval:["",""],nickname:"",pageSize:20,currentPage:1,dialogVisible:!1,isEdit:!1,currentWorkGroup:"全部工作组",currentAgent:"全部客服",currentClient:"全部来源",currentClientCommand:"",noteDialogVisible:!1,noteForm:{lid:"",replied:!1,reply:""},electron:u.IS_ELECTRON}},computed:Ii()({},Object(c.c)(["leaveMessages","userInfo","agents","workGroups","filterWorkGroups","filterWorkGroupMembers","showAuthority"])),methods:Ii()({},Object(c.b)(["getLeaveMessages","replyLeaveMessage","filterLeaveMessage"]),{timeInterval:function(t,e){return moment(t,"YYYY-MM-DD HH:mm:ss").diff(e,"YYYY-MM-DD HH:mm:ss")},formatClient:function(t){return t===u.CLIENT_WEB?"网站":t===u.CLIENT_WAP?"手机网站":t===u.CLIENT_ANDROID?"安卓App":t===u.CLIENT_IOS?"苹果App":t===u.CLIENT_WECHAT_MP?"公众号":t===u.CLIENT_WECHAT_MINI?"小程序":void 0},gotoHelpdoc:function(){var t=u.HELP_BASE_URL+"201809042103521";this.electron?ipcRenderer.send("open-external-url",t):window.open(t)},handleWorkGroupCommand:function(t){console.log(t),this.currentWorkGroup="all"===t?"全部工作组":t},handleAgentCommand:function(t){console.log(t),this.currentAgent="all"===t?"全部客服":t},handleClientCommand:function(t){console.log(t),this.currentClientCommand=t,"all"===t?this.currentClient="全部来源":"web"===t?this.currentClient="网站":"android"===t?this.currentClient="安卓":"ios"===t?this.currentClient="苹果":"mp"===t?this.currentClient="公众号":"mini"===t&&(this.currentClient="小程序")},handleQuery:function(){if(""!==this.createdAtInterval[0]||""!==this.createdAtInterval[1]||""!==this.nickname||20!==this.pageSize||1!==this.currentPage||"全部工作组"!==this.currentWorkGroup||"全部客服"!==this.currentAgent||"全部来源"!==this.currentClient){this.showAuthority.admin?console.log("admin"):(console.log("not admin"),this.currentAgent=this.userInfo.realName),null===this.createdAtInterval&&(this.createdAtInterval=["",""]);var t={page:this.currentPage-1,size:this.pageSize,nickname:this.nickname,createdAtStart:moment(this.createdAtInterval[0]).format("YYYY-MM-DD HH:mm:ss"),createdAtEnd:moment(this.createdAtInterval[1]).format("YYYY-MM-DD HH:mm:ss"),workGroupNickname:"全部工作组"===this.currentWorkGroup?"all":this.currentWorkGroup,agentRealName:"全部客服"===this.currentAgent?"all":this.currentAgent,client:this.currentClientCommand};console.log("query",t),this.filterLeaveMessage(t)}else{this.getLeaveMessages({page:0,size:20})}},handleExport:function(){console.log("export")},handleSizeChange:function(t){console.log(t),this.pageSize=t;var e={page:this.currentPage-1,size:this.pageSize};this.getLeaveMessages(e)},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={page:this.currentPage-1,size:this.pageSize};this.getLeaveMessages(e)},leaveMessage:function(){this.replyLeaveMessage(this.noteForm),this.noteDialogVisible=!1},handleEdit:function(t,e){this.noteForm.lid=e.lid,this.noteForm.replied=e.replied,this.noteForm.reply=e.reply,this.noteDialogVisible=!0},handleDelete:function(t,e){}}),created:function(){},mounted:function(){}},Fo={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-leave-msg"}},[n("el-button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-input",{staticStyle:{width:"155px","margin-right":"10px"},attrs:{size:"mini",placeholder:"访客昵称",clearable:""},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),t._v(" "),n("span",{staticStyle:{"font-size":"12px"}},[t._v("进入时间：")]),t._v(" "),n("el-date-picker",{staticStyle:{width:"345px"},attrs:{size:"mini",type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.createdAtInterval,callback:function(e){t.createdAtInterval=e},expression:"createdAtInterval"}}),t._v(" "),n("el-dropdown",{on:{command:t.handleWorkGroupCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentWorkGroup)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部工作组")]),t._v(" "),t._l(t.filterWorkGroups,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.nickname}},[t._v(t._s(e.nickname))])})],2)],1),t._v(" "),t.showAuthority.admin?n("el-dropdown",{on:{command:t.handleAgentCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentAgent)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部客服")]),t._v(" "),t._l(t.filterWorkGroupMembers,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.realName}},[t._v(t._s(e.realName))])})],2)],1):t._e(),t._v(" "),n("el-dropdown",{on:{command:t.handleClientCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentClient)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部来源")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"web"}},[t._v("网站")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"android"}},[t._v("安卓")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"ios"}},[t._v("苹果")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mp"}},[t._v("公众号")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mini"}},[t._v("小程序")])],1)],1),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),t.showAuthority.debug?n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-download"},on:{click:t.handleExport}},[t._v("导出")]):t._e(),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",small:"","current-page":t.currentPage,"page-size":t.pageSize,total:t.leaveMessages.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.leaveMessages.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.nickname",label:"访客昵称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"mobile",label:"手机"}}),t._v(" "),n("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),t._v(" "),n("el-table-column",{attrs:{prop:"content",label:"留言"}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"时间"}}),t._v(" "),n("el-table-column",{attrs:{prop:"replied",label:"是否回复"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.replied?n("span",[t._v("是")]):t._e(),t._v(" "),e.row.replied?t._e():n("span",[t._v("否")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"reply",label:"回复内容"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.client",label:"来源",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.formatClient(e.row.visitor.client)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("标记")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.leaveMessages.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"提示",visible:t.noteDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.noteDialogVisible=e}}},[n("span",[t._v("仅作为备注使用, 您需要主动联系回复")]),t._v(" "),n("el-form",{ref:"noteForm",staticStyle:{"margin-top":"20px"},attrs:{model:t.noteForm,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"标记回复"}},[n("el-radio-group",{model:{value:t.noteForm.replied,callback:function(e){t.$set(t.noteForm,"replied",e)},expression:"noteForm.replied"}},[n("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"回复备注"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.noteForm.reply,callback:function(e){t.$set(t.noteForm,"reply",e)},expression:"noteForm.reply"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.noteDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.leaveMessage()}}},[t._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var $o=n("VU/8")(zo,Fo,!1,function(t){n("iD6w")},"data-v-1b3442be",null).exports,Wo={name:"bd-message",data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]},createdAtInterval:["",""],nickname:"",pageSize:20,currentPage:1,dialogVisible:!1,isEdit:!1,currentWorkGroup:"全部工作组",currentAgent:"全部客服",currentClient:"全部来源",currentClientCommand:"",electron:u.IS_ELECTRON}},computed:Ii()({},Object(c.c)(["historyMessages","agents","workGroups","filterWorkGroups","filterWorkGroupMembers","showAuthority"])),methods:Ii()({},Object(c.b)(["getHistoryMessages","filterMessage"]),{timeInterval:function(t,e){return moment(t,"YYYY-MM-DD HH:mm:ss").diff(e,"YYYY-MM-DD HH:mm:ss")},formatClient:function(t){return t===u.CLIENT_WEB?"电脑网站":t===u.CLIENT_WAP?"手机网站":t===u.CLIENT_ANDROID?"安卓App":t===u.CLIENT_IOS?"苹果App":t===u.CLIENT_WECHAT_MP?"公众号":t===u.CLIENT_WECHAT_MINI?"小程序":void 0},gotoHelpdoc:function(){var t=u.HELP_BASE_URL+"201809042103521";this.electron?ipcRenderer.send("open-external-url",t):window.open(t)},handleWorkGroupCommand:function(t){console.log(t),this.currentWorkGroup="all"===t?"全部工作组":t},handleAgentCommand:function(t){console.log(t),this.currentAgent="all"===t?"全部客服":t},handleClientCommand:function(t){console.log(t),this.currentClientCommand=t,"all"===t?this.currentClient="全部来源":"web"===t?this.currentClient="网站":"android"===t?this.currentClient="安卓":"ios"===t?this.currentClient="苹果":"mp"===t?this.currentClient="公众号":"mini"===t&&(this.currentClient="小程序")},handleQuery:function(){null===this.createdAtInterval&&(this.createdAtInterval=["",""]);var t={page:this.currentPage-1,size:this.pageSize,nickname:this.nickname,createdAtStart:moment(this.createdAtInterval[0]).format("YYYY-MM-DD HH:mm:ss"),createdAtEnd:moment(this.createdAtInterval[1]).format("YYYY-MM-DD HH:mm:ss"),workGroupNickname:"全部工作组"===this.currentWorkGroup?"all":this.currentWorkGroup,agentRealName:"全部客服"===this.currentAgent?"all":this.currentAgent,client:this.currentClientCommand};console.log("query",t),this.filterMessage(t)},handleExport:function(){console.log("export")},handleSizeChange:function(t){console.log(t),this.pageSize=t;var e={page:this.currentPage-1,size:this.pageSize};this.getHistoryMessages(e)},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={page:this.currentPage-1,size:this.pageSize};this.getHistoryMessages(e)},handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)}}),created:function(){},mounted:function(){}},Ho={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-message"}},[n("el-button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-input",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{size:"mini",placeholder:"昵称",clearable:""},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),t._v(" "),n("el-input",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{size:"mini",placeholder:"内容",clearable:""},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),t._v(" "),n("span",{staticStyle:{"font-size":"12px"}},[t._v("进入时间：")]),t._v(" "),n("el-date-picker",{staticStyle:{width:"345px"},attrs:{size:"mini",type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.createdAtInterval,callback:function(e){t.createdAtInterval=e},expression:"createdAtInterval"}}),t._v(" "),n("el-dropdown",{on:{command:t.handleWorkGroupCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentWorkGroup)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部工作组")]),t._v(" "),t._l(t.filterWorkGroups,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.nickname}},[t._v(t._s(e.nickname))])})],2)],1),t._v(" "),t.showAuthority.admin?n("el-dropdown",{on:{command:t.handleAgentCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentAgent)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部客服")]),t._v(" "),t._l(t.filterWorkGroupMembers,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.realName}},[t._v(t._s(e.realName))])})],2)],1):t._e(),t._v(" "),n("el-dropdown",{on:{command:t.handleClientCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentClient)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部来源")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"web"}},[t._v("网站")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"android"}},[t._v("安卓")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"ios"}},[t._v("苹果")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mp"}},[t._v("公众号")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mini"}},[t._v("小程序")])],1)],1),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),t.showAuthority.debug?n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-download"},on:{click:t.handleExport}},[t._v("导出")]):t._e(),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",small:"","current-page":t.currentPage,"page-size":t.pageSize,total:t.historyMessages.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.historyMessages.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"user.nickname",label:"昵称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"content",label:"内容"}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"时间"}}),t._v(" "),n("el-table-column",{attrs:{prop:"workGroup.nickname",label:"工作组"}}),t._v(" "),n("el-table-column",{attrs:{prop:"user.client",label:"来源",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.formatClient(e.row.user.client)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.historyMessages.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var Yo=n("VU/8")(Wo,Ho,!1,function(t){n("IXGT")},"data-v-10e92624",null).exports,jo={name:"bd-status",data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]},createdAtInterval:["",""],pageSize:20,currentPage:1,dialogVisible:!1,isEdit:!1,currentAgent:"全部客服",currentClient:"全部来源",currentClientCommand:"",electron:u.IS_ELECTRON}},computed:Ii()({},Object(c.c)(["statuses","agents","workGroups","filterWorkGroups","filterWorkGroupMembers","showAuthority"])),methods:Ii()({},Object(c.b)(["getHistoryStatus","filterStatus"]),{timeInterval:function(t,e){return moment(t,"YYYY-MM-DD HH:mm:ss").diff(e,"YYYY-MM-DD HH:mm:ss")},gotoHelpdoc:function(){var t=u.HELP_BASE_URL+"201809042103521";this.electron?ipcRenderer.send("open-external-url",t):window.open(t)},handleAgentCommand:function(t){console.log(t),this.currentAgent="all"===t?"全部客服":t},handleClientCommand:function(t){console.log(t),this.currentClientCommand=t,"all"===t?this.currentClient="全部来源":"web"===t?this.currentClient="网站":"android"===t?this.currentClient="安卓":"ios"===t?this.currentClient="苹果":"mp"===t?this.currentClient="公众号":"mini"===t&&(this.currentClient="小程序")},handleQuery:function(){null===this.createdAtInterval&&(this.createdAtInterval=["",""]);var t={page:this.currentPage-1,size:this.pageSize,createdAtStart:moment(this.createdAtInterval[0]).format("YYYY-MM-DD HH:mm:ss"),createdAtEnd:moment(this.createdAtInterval[1]).format("YYYY-MM-DD HH:mm:ss"),agentRealName:"全部客服"===this.currentAgent?"all":this.currentAgent,client:this.currentClientCommand};console.log("query",t),this.filterStatus(t)},handleExport:function(){console.log("export")},handleSizeChange:function(t){console.log(t),this.pageSize=t;var e={page:this.currentPage-1,size:this.pageSize};this.getHistoryStatus(e)},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={page:this.currentPage-1,size:this.pageSize};this.getHistoryStatus(e)},handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)}}),created:function(){},mounted:function(){}},qo={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-status"}},[n("el-button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("span",{staticStyle:{"font-size":"12px"}},[t._v("时间：")]),t._v(" "),n("el-date-picker",{staticStyle:{width:"345px"},attrs:{size:"mini",type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.createdAtInterval,callback:function(e){t.createdAtInterval=e},expression:"createdAtInterval"}}),t._v(" "),t.showAuthority.admin?n("el-dropdown",{on:{command:t.handleAgentCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentAgent)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部客服")]),t._v(" "),t._l(t.filterWorkGroupMembers,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.realName}},[t._v(t._s(e.realName))])})],2)],1):t._e(),t._v(" "),n("el-dropdown",{on:{command:t.handleClientCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentClient)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部来源")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"web"}},[t._v("网站")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"android"}},[t._v("安卓")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"ios"}},[t._v("苹果")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mp"}},[t._v("公众号")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mini"}},[t._v("小程序")])],1)],1),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),t.showAuthority.debug?n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-download"},on:{click:t.handleExport}},[t._v("导出")]):t._e(),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",small:"","current-page":t.currentPage,"page-size":t.pageSize,total:t.statuses.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.statuses.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"user.realName",label:"客服真名"}}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"时间",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"client",label:"来源",width:"80"}})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.statuses.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var Qo=n("VU/8")(jo,qo,!1,function(t){n("a2dB")},"data-v-49f7d31e",null).exports,Ko={name:"bd-queue",data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]},createdAtInterval:["",""],nickname:"",pageSize:20,currentPage:1,dialogVisible:!1,isEdit:!1,currentWorkGroup:"全部工作组",currentAgent:"全部客服",currentClient:"全部来源",currentClientCommand:"",electron:u.IS_ELECTRON}},computed:Ii()({},Object(c.c)(["historyThreads","agents","workGroups","filterWorkGroups","filterWorkGroupMembers","showAuthority"])),methods:Ii()({},Object(c.b)(["getHistoryThread","filterHistoryThread"]),{timeInterval:function(t,e){return moment(t,"YYYY-MM-DD HH:mm:ss").diff(e,"YYYY-MM-DD HH:mm:ss")},formatClient:function(t){return t===u.CLIENT_WEB?"电脑网站":t===u.CLIENT_WAP?"手机网站":t===u.CLIENT_ANDROID?"安卓App":t===u.CLIENT_IOS?"苹果App":t===u.CLIENT_WECHAT_MP?"公众号":t===u.CLIENT_WECHAT_MINI?"小程序":void 0},gotoHelpdoc:function(){var t=u.HELP_BASE_URL+"201809042103521";this.electron?ipcRenderer.send("open-external-url",t):window.open(t)},handleWorkGroupCommand:function(t){console.log(t),this.currentWorkGroup="all"===t?"全部工作组":t},handleAgentCommand:function(t){console.log(t),this.currentAgent="all"===t?"全部客服":t},handleClientCommand:function(t){console.log(t),this.currentClientCommand=t,"all"===t?this.currentClient="全部来源":"web"===t?this.currentClient="网站":"android"===t?this.currentClient="安卓":"ios"===t?this.currentClient="苹果":"mp"===t?this.currentClient="公众号":"mini"===t&&(this.currentClient="小程序")},handleQuery:function(){null===this.createdAtInterval&&(this.createdAtInterval=["",""]);var t={page:this.currentPage-1,size:this.pageSize,nickname:this.nickname,createdAtStart:moment(this.createdAtInterval[0]).format("YYYY-MM-DD HH:mm:ss"),createdAtEnd:moment(this.createdAtInterval[1]).format("YYYY-MM-DD HH:mm:ss"),workGroupNickname:"全部工作组"===this.currentWorkGroup?"all":this.currentWorkGroup,agentRealName:"全部客服"===this.currentAgent?"all":this.currentAgent,client:this.currentClientCommand};console.log("query",t),this.filterHistoryThread(t)},handleExport:function(){console.log("export")},handleSizeChange:function(t){console.log(t),this.pageSize=t;var e={page:this.currentPage-1,size:this.pageSize};this.getHistoryThread(e)},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={page:this.currentPage-1,size:this.pageSize};this.getHistoryThread(e)},handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)}}),created:function(){},mounted:function(){}},Xo={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-queue"}},[n("el-button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-input",{staticStyle:{width:"155px","margin-right":"10px"},attrs:{size:"mini",placeholder:"访客昵称",clearable:""},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),t._v(" "),n("span",{staticStyle:{"font-size":"12px"}},[t._v("进入时间：")]),t._v(" "),n("el-date-picker",{staticStyle:{width:"345px"},attrs:{size:"mini",type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.createdAtInterval,callback:function(e){t.createdAtInterval=e},expression:"createdAtInterval"}}),t._v(" "),n("el-dropdown",{on:{command:t.handleWorkGroupCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentWorkGroup)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部工作组")]),t._v(" "),t._l(t.filterWorkGroups,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.nickname}},[t._v(t._s(e.nickname))])})],2)],1),t._v(" "),t.showAuthority.admin?n("el-dropdown",{on:{command:t.handleAgentCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentAgent)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部客服")]),t._v(" "),t._l(t.filterWorkGroupMembers,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.realName}},[t._v(t._s(e.realName))])})],2)],1):t._e(),t._v(" "),n("el-dropdown",{on:{command:t.handleClientCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentClient)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部来源")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"web"}},[t._v("网站")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"android"}},[t._v("安卓")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"ios"}},[t._v("苹果")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mp"}},[t._v("公众号")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mini"}},[t._v("小程序")])],1)],1),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),t.showAuthority.debug?n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-download"},on:{click:t.handleExport}},[t._v("导出")]):t._e(),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",small:"","current-page":t.currentPage,"page-size":t.pageSize,total:t.historyThreads.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.historyThreads.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"进入时间"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.client",label:"来源",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.formatClient(e.row.visitor.client)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.historyThreads.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var Jo=n("VU/8")(Ko,Xo,!1,function(t){n("Bnup")},"data-v-0c148e29",null).exports,Zo={name:"bd-browse",data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]},createdAtInterval:["",""],nickname:"",pageSize:20,currentPage:1,dialogVisible:!1,isEdit:!1,currentWorkGroup:"全部工作组",currentAgent:"全部客服",currentClient:"全部来源",currentClientCommand:"",electron:u.IS_ELECTRON}},computed:Ii()({},Object(c.c)(["historyThreads","agents","workGroups","filterWorkGroups","filterWorkGroupMembers","showAuthority"])),methods:Ii()({},Object(c.b)(["getHistoryThread","filterHistoryThread"]),{timeInterval:function(t,e){return moment(t,"YYYY-MM-DD HH:mm:ss").diff(e,"YYYY-MM-DD HH:mm:ss")},gotoHelpdoc:function(){var t=u.HELP_BASE_URL+"201809042103521";this.electron?ipcRenderer.send("open-external-url",t):window.open(t)},handleWorkGroupCommand:function(t){console.log(t),this.currentWorkGroup="all"===t?"全部工作组":t},handleAgentCommand:function(t){console.log(t),this.currentAgent="all"===t?"全部客服":t},handleClientCommand:function(t){console.log(t),this.currentClientCommand=t,"all"===t?this.currentClient="全部来源":"web"===t?this.currentClient="网站":"android"===t?this.currentClient="安卓":"ios"===t?this.currentClient="苹果":"mp"===t?this.currentClient="公众号":"mini"===t&&(this.currentClient="小程序")},handleQuery:function(){null===this.createdAtInterval&&(this.createdAtInterval=["",""]);var t={page:this.currentPage-1,size:this.pageSize,nickname:this.nickname,createdAtStart:moment(this.createdAtInterval[0]).format("YYYY-MM-DD HH:mm:ss"),createdAtEnd:moment(this.createdAtInterval[1]).format("YYYY-MM-DD HH:mm:ss"),workGroupNickname:"全部工作组"===this.currentWorkGroup?"all":this.currentWorkGroup,agentRealName:"全部客服"===this.currentAgent?"all":this.currentAgent,client:this.currentClientCommand};console.log("query",t),this.filterHistoryThread(t)},handleExport:function(){console.log("export")},handleSizeChange:function(t){console.log(t),this.pageSize=t;var e={page:this.currentPage-1,size:this.pageSize};this.getHistoryThread(e)},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={page:this.currentPage-1,size:this.pageSize};this.getHistoryThread(e)},handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)}}),created:function(){},mounted:function(){}},ta={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-browse"}},[n("el-button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-input",{staticStyle:{width:"155px","margin-right":"10px"},attrs:{size:"mini",placeholder:"访客昵称",clearable:""},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),t._v(" "),n("span",{staticStyle:{"font-size":"12px"}},[t._v("进入时间：")]),t._v(" "),n("el-date-picker",{staticStyle:{width:"345px"},attrs:{size:"mini",type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.createdAtInterval,callback:function(e){t.createdAtInterval=e},expression:"createdAtInterval"}}),t._v(" "),n("el-dropdown",{on:{command:t.handleWorkGroupCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentWorkGroup)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部工作组")]),t._v(" "),t._l(t.filterWorkGroups,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.nickname}},[t._v(t._s(e.nickname))])})],2)],1),t._v(" "),t.showAuthority.admin?n("el-dropdown",{on:{command:t.handleAgentCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentAgent)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部客服")]),t._v(" "),t._l(t.filterWorkGroupMembers,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.realName}},[t._v(t._s(e.realName))])})],2)],1):t._e(),t._v(" "),n("el-dropdown",{on:{command:t.handleClientCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentClient)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部来源")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"web"}},[t._v("网站")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"android"}},[t._v("安卓")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"ios"}},[t._v("苹果")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mp"}},[t._v("公众号")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mini"}},[t._v("小程序")])],1)],1),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),t.showAuthority.debug?n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-download"},on:{click:t.handleExport}},[t._v("导出")]):t._e(),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",small:"","current-page":t.currentPage,"page-size":t.pageSize,total:t.historyThreads.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.historyThreads.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.client",label:"来源",width:"80"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.historyThreads.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var ea=n("VU/8")(Zo,ta,!1,function(t){n("JYyo")},"data-v-c5c86848",null).exports,na={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-visitor"}},[this._v("\n  所有访客账号\n")])},staticRenderFns:[]};var ia=n("VU/8")({name:"bd-visitor"},na,!1,function(t){n("WQai")},"data-v-cccc4386",null).exports,oa={name:"bd-block",data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]},createdAtInterval:["",""],nickname:"",pageSize:20,currentPage:1,dialogVisible:!1,isEdit:!1,currentWorkGroup:"全部工作组",currentAgent:"全部客服",currentClient:"全部来源",currentClientCommand:"",electron:u.IS_ELECTRON}},computed:Ii()({},Object(c.c)(["historyThreads","agents","workGroups","filterWorkGroups","filterWorkGroupMembers","showAuthority"])),methods:Ii()({},Object(c.b)(["getHistoryThread","filterHistoryThread"]),{timeInterval:function(t,e){return moment(t,"YYYY-MM-DD HH:mm:ss").diff(e,"YYYY-MM-DD HH:mm:ss")},formatClient:function(t){return t===u.CLIENT_WEB?"电脑网站":t===u.CLIENT_WAP?"手机网站":t===u.CLIENT_ANDROID?"安卓App":t===u.CLIENT_IOS?"苹果App":t===u.CLIENT_WECHAT_MP?"公众号":t===u.CLIENT_WECHAT_MINI?"小程序":void 0},gotoHelpdoc:function(){var t=u.HELP_BASE_URL+"201809042103521";this.electron?ipcRenderer.send("open-external-url",t):window.open(t)},handleWorkGroupCommand:function(t){console.log(t),this.currentWorkGroup="all"===t?"全部工作组":t},handleAgentCommand:function(t){console.log(t),this.currentAgent="all"===t?"全部客服":t},handleClientCommand:function(t){console.log(t),this.currentClientCommand=t,"all"===t?this.currentClient="全部来源":"web"===t?this.currentClient="网站":"android"===t?this.currentClient="安卓":"ios"===t?this.currentClient="苹果":"mp"===t?this.currentClient="公众号":"mini"===t&&(this.currentClient="小程序")},handleQuery:function(){null===this.createdAtInterval&&(this.createdAtInterval=["",""]);var t={page:this.currentPage-1,size:this.pageSize,nickname:this.nickname,createdAtStart:moment(this.createdAtInterval[0]).format("YYYY-MM-DD HH:mm:ss"),createdAtEnd:moment(this.createdAtInterval[1]).format("YYYY-MM-DD HH:mm:ss"),workGroupNickname:"全部工作组"===this.currentWorkGroup?"all":this.currentWorkGroup,agentRealName:"全部客服"===this.currentAgent?"all":this.currentAgent,client:this.currentClientCommand};console.log("query",t),this.filterHistoryThread(t)},handleExport:function(){console.log("export")},handleSizeChange:function(t){console.log(t),this.pageSize=t;var e={page:this.currentPage-1,size:this.pageSize};this.getHistoryThread(e)},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={page:this.currentPage-1,size:this.pageSize};this.getHistoryThread(e)},handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)}}),created:function(){},mounted:function(){}},aa={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-block"}},[n("el-button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-input",{staticStyle:{width:"155px","margin-right":"10px"},attrs:{size:"mini",placeholder:"访客昵称",clearable:""},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),t._v(" "),n("span",{staticStyle:{"font-size":"12px"}},[t._v("进入时间：")]),t._v(" "),n("el-date-picker",{staticStyle:{width:"345px"},attrs:{size:"mini",type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.createdAtInterval,callback:function(e){t.createdAtInterval=e},expression:"createdAtInterval"}}),t._v(" "),n("el-dropdown",{on:{command:t.handleWorkGroupCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentWorkGroup)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部工作组")]),t._v(" "),t._l(t.filterWorkGroups,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.nickname}},[t._v(t._s(e.nickname))])})],2)],1),t._v(" "),t.showAuthority.admin?n("el-dropdown",{on:{command:t.handleAgentCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentAgent)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部客服")]),t._v(" "),t._l(t.filterWorkGroupMembers,function(e){return n("el-dropdown-item",{key:e.id,attrs:{command:e.realName}},[t._v(t._s(e.realName))])})],2)],1):t._e(),t._v(" "),n("el-dropdown",{on:{command:t.handleClientCommand}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v("\n      "+t._s(t.currentClient)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部来源")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"web"}},[t._v("网站")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"android"}},[t._v("安卓")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"ios"}},[t._v("苹果")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mp"}},[t._v("公众号")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"mini"}},[t._v("小程序")])],1)],1),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),t.showAuthority.debug?n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-download"},on:{click:t.handleExport}},[t._v("导出")]):t._e(),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",small:"","current-page":t.currentPage,"page-size":t.pageSize,total:t.historyThreads.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.historyThreads.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"进入时间"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.historyThreads.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var ra={name:"bd-history",components:{BdThread:Vo,BdRate:Bo,BdLeaveMsg:$o,BdMessage:Yo,BdStatus:Qo,BdQueue:Jo,BdBrowse:ea,BdVisitor:ia,BdBlock:n("VU/8")(oa,aa,!1,function(t){n("Jwgl")},"data-v-c395283c",null).exports},data:function(){return{activeName:"thread"}},computed:Ii()({},Object(c.c)(["showAuthority"])),methods:Ii()({},Object(c.b)(["getHistoryThread","getRates","getHistoryMessages","getLeaveMessages","getHistoryStatus"]),{handleClick:function(t,e){var n={page:0,size:20};"thread"===t.name?this.getHistoryThread(n):"rate"===t.name?this.getRates(n):"message"===t.name?this.getHistoryMessages(n):"leavemsg"===t.name?this.getLeaveMessages(n):"status"===t.name?this.getHistoryStatus(n):"queue"===t.name||"browse"===t.name||t.name},handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)}}),created:function(){},mounted:function(){}},sa={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-history"}},[n("el-tabs",{staticStyle:{height:"100%"},attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"会话",name:"thread"}},[n("bd-thread")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"满意度",name:"rate"}},[n("bd-rate")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"留言",name:"leavemsg"}},[n("bd-leave-msg")],1),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"消息",name:"message"}},[n("bd-message")],1):t._e(),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"黑名单",name:"block"}},[n("bd-block")],1):t._e()],1)],1)},staticRenderFns:[]};var la=n("VU/8")(ra,sa,!1,function(t){n("5Cqg")},"data-v-aa0b7daa",null).exports,ca={name:"bd-monitor",data:function(){return{}},computed:Ii()({},Object(c.c)(["monitors"])),methods:{handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)}}},ua={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-monitor"}},[n("el-button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""}},[t._v("帮助文档")]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.monitors.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.nickname",label:"昵称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.visitor.client))]),t._v(" "),n("span",[t._v(t._s(e.row.visitor.nickname))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"workGroup.nickname",label:"工作组",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"content",label:"最后消息内容",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"timestamp",label:"最后消息时间",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"timestamp",label:"消息条数",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"进入时间",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var da=n("VU/8")(ca,ua,!1,function(t){n("lk0g")},"data-v-0bb3ec3c",null).exports,pa={name:"bd-checked",data:function(){return{}},computed:Ii()({},Object(c.c)(["qualities"])),methods:{handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)}},created:function(){},mounted:function(){}},ma={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-checked"}},[n("el-button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""}},[t._v("帮助文档")]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.qualities.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.nickname",label:"昵称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.visitor.client))]),t._v(" "),n("span",[t._v(t._s(e.row.visitor.nickname))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"workGroup.nickname",label:"工作组",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"content",label:"最后消息内容",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"timestamp",label:"最后消息时间",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"timestamp",label:"消息条数",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"进入时间",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var fa=n("VU/8")(pa,ma,!1,function(t){n("F1Wm")},"data-v-5e64ce8c",null).exports,_a={name:"bd-unchecked",data:function(){return{}},computed:Ii()({},Object(c.c)(["qualities"])),methods:{handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)}},created:function(){},mounted:function(){}},ha={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-unchecked"}},[n("el-button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""}},[t._v("帮助文档")]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.qualities.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitor.nickname",label:"昵称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.visitor.client))]),t._v(" "),n("span",[t._v(t._s(e.row.visitor.nickname))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"workGroup.nickname",label:"工作组",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"content",label:"最后消息内容",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"timestamp",label:"最后消息时间",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"进入时间",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var ga={name:"bd-quality",components:{BdChecked:fa,BdUnchecked:n("VU/8")(_a,ha,!1,function(t){n("9Fyy")},"data-v-1ab5b24b",null).exports},data:function(){return{}}},va={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"bd-quality"}},[e("el-tabs",{staticStyle:{height:"100%"},attrs:{type:"card"}},[e("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"已质检"}},[e("bd-checked")],1),this._v(" "),e("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"未质检"}},[e("bd-unchecked")],1)],1)],1)},staticRenderFns:[]};var Ea={name:"bd-chat",components:{BdThread:To,BdVisitor:Oo,BdHistory:la,BdMonitor:da,BdQuality:n("VU/8")(ga,va,!1,function(t){n("6aEi")},"data-v-0a4c0256",null).exports},data:function(){return{activeName:"thread"}},computed:Ii()({},Object(c.c)(["showAuthority"])),methods:Ii()({},Object(c.b)(["getCuws","getThread","getQueue","getBrowse","getHistoryThread","getMonitor","getQuality","getWorkGroups","getAllWorkGroups","getWorkGroupMembers","getRoles","changeCurrentMainView"]),{handleClick:function(t,e){var n={page:0,size:20};"thread"===t.name?(this.getThread(),this.getCuws(),this.getQueue(n)):"visitor"===t.name?this.getBrowse(n):"history"===t.name?(this.getHistoryThread(n),this.getAllWorkGroups(),this.getWorkGroupMembers()):"monitor"===t.name?this.getMonitor(n):"quality"===t.name&&this.getQuality(n)}}),created:function(){Tt.$on(u.EVENT_BUS_MESSAGE_HISTORY,function(t){console.log("add message history tab")})},mounted:function(){this.changeCurrentMainView("chat")}},Ta={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-chat"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t.showAuthority.thread?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"当前会话",name:"thread"}},[n("bd-thread")],1):t._e(),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"在线访客",name:"visitor"}},[n("bd-visitor")],1):t._e(),t._v(" "),t.showAuthority.history?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"历史记录",name:"history"}},[n("bd-history")],1):t._e(),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"会话监控",name:"monitor"}},[n("bd-monitor")],1):t._e(),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"质量检查",name:"quality"}},[n("bd-quality")],1):t._e()],1)],1)},staticRenderFns:[]};var ba=n("VU/8")(Ea,Ta,!1,function(t){n("O42R")},"data-v-181c587f",null).exports,Sa={name:"bd-qa",data:function(){return{currentCategory:{id:0,name:"",children:[]},loading:!1,pageSize:20,currentPage:1,isEdit:!1,inputVisible:!1,inputValue:"",addQaDialogVisible:!1,setRobotNameDialogVisible:!1,relatedIndex:0,filterText:"",defaultProps:{children:"children",label:"name"},form:{aid:"",question:"",answer:"",relateds:[],categories:[]},relateds:[],rules:{question:[{required:!0,message:"请输入标准问题",trigger:"blur"}],answer:[{required:!0,message:"请输入标准答案",trigger:"blur"}],categories:[{type:"array",required:!0,message:"请至少选择一个类别",trigger:"change"}]},formRobot:{robotName:""}}},computed:Ii()({},Object(c.c)(["robotCategories","robotAnswers"])),watch:{filterText:function(t){this.$refs.cateTree.filter(t)}},methods:Ii()({},Object(c.b)(["getCategories","createCategory","updateCategory","deleteCategory","getRobotAnswers","createRobotAnswer","updateRobotAnswer","deleteRobotAnswer"]),{filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},gotoHelpdoc:function(){window.open(u.HELP_BASE_URL+"201809042103521")},rateTotal:function(t){return t.rateHelpful+t.rateUseless},handleNodeClick:function(t){this.currentCategory.id=t.id,this.currentCategory.name=t.name,this.currentCategory.children=t.children;var e={categoryId:this.currentCategory.id,page:0,size:20};this.getRobotAnswers(e)},handleSizeChange:function(t){console.log(t),this.pageSize=t},handleCurrentChange:function(t){console.log(t),this.currentPage=t},addQa:function(){this.isEdit=!1,this.form.aid="",this.form.question="",this.form.answer="",this.relateds=[{id:0,question:""}],this.form.categories=[],this.addQaDialogVisible=!0},addCategory:function(){var t=this;this.$prompt("请输入类别","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var n=e.value;if(console.log(n),null!=n&&n.length>0){var i={parent_id:t.currentCategory.id,name:n,type:u.CATEGORY_TYPE_ROBOT};t.createCategory(i)}}).catch(function(){})},editCategory:function(){var t=this;0===this.currentCategory.id?this.$message.error("请选择要编辑的类别"):this.$prompt("编辑类别","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.currentCategory.name}).then(function(e){var n=e.value;if(null!=n&&n.length>0){var i={category_id:t.currentCategory.id,name:n};t.updateCategory(i)}else t.$message.error("不能为空")}).catch(function(){})},removeCategory:function(){var t=this;0!==this.currentCategory.id?this.currentCategory.children.length>0?this.$message.error("请首先删除子分类"):this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteCategory(t.currentCategory.id),t.currentCategory.id=0}).catch(function(){}):this.$message.error("不允许删除")},transformRelated:function(){for(var t=[],e=0;e<this.relateds.length;e++){var n=this.relateds[e];t.push(n.question)}this.form.relateds=t},addAnswer:function(){var t=this;this.transformRelated(),this.$refs.form.validate(function(e){if(!e)return!1;t.addQaDialogVisible=!1,t.isEdit?t.updateRobotAnswer(t.form):t.createRobotAnswer(t.form)})},addRelated:function(){this.relatedIndex++,this.relateds.push({id:this.relatedIndex,question:""})},removeRelated:function(t){for(var e=0;e<this.relateds.length;e++){this.relateds[e].id===t&&this.relateds.splice(e,1)}},handleEdit:function(t,e){this.isEdit=!0,this.form.aid=e.aid,this.form.question=e.question,this.form.answer=e.answer,this.addQaDialogVisible=!0;for(var n=0;n<e.categories.length;n++){var i=e.categories[n];this.form.categories.push(i.id)}e.relateds.length>0&&(this.relateds=[]);for(var o=0;o<e.relateds.length;o++){var a=e.relateds[o];this.relateds.push({id:o,question:a.question})}},handleDelete:function(t,e){var n=this;this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteRobotAnswer(e.aid)}).catch(function(){})}}),created:function(){}},Ca={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-qa"}},[n("el-row",[n("el-col",{attrs:{span:4,id:"left-col"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"15px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left","margin-bottom":"15px"},attrs:{size:"mini",type:"success"},on:{click:t.addQa}},[t._v("添加问答")]),t._v(" "),n("el-input",{attrs:{size:"mini",placeholder:"搜索类别"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),n("el-tree",{ref:"cateTree",staticClass:"filter-tree",attrs:{data:t.robotCategories,props:t.defaultProps,"filter-node-method":t.filterNode},on:{"node-click":t.handleNodeClick}}),t._v(" "),n("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.addCategory}},[t._v("添加")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.editCategory}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:t.removeCategory}},[t._v("删除")])],1),t._v(" "),n("el-col",{attrs:{span:20,id:"right-col"}},[n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.robotAnswers.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","text-align":"left"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.robotAnswers.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"相似问题"}},t._l(e.row.relateds,function(i,o){return n("span",{key:i.id},[t._v("\n                  "+t._s(i.question)+" "),o<e.row.relateds.length-1?n("span",[t._v(",")]):t._e()])}))],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"question",label:"问题"}}),t._v(" "),n("el-table-column",{attrs:{prop:"answer",label:"答案"}}),t._v(" "),n("el-table-column",{attrs:{prop:"welcome",label:"欢迎语",width:"100",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.welcome?n("span",[t._v("是")]):t._e(),t._v(" "),e.row.welcome?t._e():n("span",[t._v("否")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"recommend",label:"右边栏推荐",width:"120",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.recommend?n("span",[t._v("是")]):t._e(),t._v(" "),e.row.recommend?t._e():n("span",[t._v("否")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"queryCount",label:"请求次数",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"rateHelpful",label:"有帮助/总数",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.rateHelpful)+"/"+t._s(t.rateTotal(e.row)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.robotAnswers.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"添加问答",visible:t.addQaDialogVisible,width:"40%",center:""},on:{"update:visible":function(e){t.addQaDialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"标准问题",prop:"question"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"标准问题"},model:{value:t.form.question,callback:function(e){t.$set(t.form,"question",e)},expression:"form.question"}})],1),t._v(" "),t._l(t.relateds,function(e,i){return n("el-form-item",{key:e.id,attrs:{label:"相似问法"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"相似问法"},model:{value:e.question,callback:function(n){t.$set(e,"question",n)},expression:"related.question"}}),t._v(" "),i>0?n("el-button",{on:{click:function(n){n.preventDefault(),t.removeRelated(e.id)}}},[t._v("删除")]):t._e(),t._v(" "),0===i?n("el-button",{on:{click:function(e){e.preventDefault(),t.addRelated()}}},[t._v("添加")]):t._e()],1)}),t._v(" "),n("el-form-item",{attrs:{label:"标准答案",prop:"answer"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{type:"textarea",autosize:{minRows:10,maxRows:20}},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"所属分类",prop:"categories"}},[n("el-checkbox-group",{model:{value:t.form.categories,callback:function(e){t.$set(t.form,"categories",e)},expression:"form.categories"}},t._l(t.robotCategories,function(e){return e.id>0?n("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))]):t._e()}))],1)],2),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.addQaDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addAnswer()}}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"添加问答",visible:t.setRobotNameDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.setRobotNameDialogVisible=e}}},[n("el-form",{ref:"formRobot",attrs:{model:t.formRobot,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"机器人昵称",prop:"robotName"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"机器人昵称"},model:{value:t.form.robotName,callback:function(e){t.$set(t.form,"robotName",e)},expression:"form.robotName"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.setRobotNameDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.setRobotNameDialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var ya=n("VU/8")(Sa,Ca,!1,function(t){n("OxZE")},"data-v-22ad7ec8",null).exports,Ia={name:"bd-synonym",data:function(){return{pageSize:20,currentPage:1,isEdit:!1,dialogVisible:!1,synonymIndex:0,tableData:[],form:{sid:"",standard:"",synonyms:[{id:0,synonym:""}]},mySynonyms:[{id:0,synonym:""}],rules:{standard:[{required:!0,message:"请输入标准词",trigger:"blur"}],synonym:[{required:!0,message:"请输入相似词",trigger:"blur"}]}}},computed:Ii()({},Object(c.c)(["robotSynonyms"])),methods:Ii()({},Object(c.b)(["createRobotSynonym","updateRobotSynonym","deleteRobotSynonym"]),{handleSizeChange:function(t){console.log(t),this.pageSize=t},handleCurrentChange:function(t){console.log(t),this.currentPage=t},addSynonyms:function(){this.synonymIndex++,this.mySynonyms.push({id:this.synonymIndex,synonym:""})},removeSynonym:function(t){for(var e=0;e<this.mySynonyms.length;e++){this.mySynonyms[e].id===t&&this.mySynonyms.splice(e,1)}},transformSynonyms:function(){for(var t=[],e=0;e<this.mySynonyms.length;e++){var n=this.mySynonyms[e];t.push(n.synonym)}this.form.synonyms=t},addSynonym:function(){this.isEdit=!1,this.form.sid="",this.form.standard="",this.mySynonyms=[{id:0,synonym:""}],this.dialogVisible=!0},doAddSynonym:function(){var t=this;this.transformSynonyms(),this.$refs.form.validate(function(e){if(!e)return!1;t.dialogVisible=!1,t.isEdit?t.updateRobotSynonym(t.form):t.createRobotSynonym(t.form)})},handleEdit:function(t,e){console.log(t,e),this.isEdit=!0,this.mySynonyms=[],this.form.sid=e.sid,this.form.standard=e.standard;for(var n=0;n<e.synonyms.length;n++){var i=e.synonyms[n];this.synonymIndex=n,this.mySynonyms.push({id:n,synonym:i.standard})}this.dialogVisible=!0},handleDelete:function(t,e){var n=this;console.log(t,e),this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteRobotSynonym(e.sid)}).catch(function(){})}})},wa={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-synonym"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"success"},on:{click:t.addSynonym}},[t._v("添加相似词")]),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.robotSynonyms.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.robotSynonyms.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"standard",label:"词语"}}),t._v(" "),n("el-table-column",{attrs:{prop:"synonyms",label:"相似词"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.synonyms,function(i,o){return n("span",{key:i.id},[t._v("\n          "+t._s(i.standard)+" "),o<e.row.synonyms.length-1?n("span",[t._v(",")]):t._e()])})}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.robotSynonyms.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"添加相似词",visible:t.dialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"标准词",prop:"standard"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:t.form.standard,callback:function(e){t.$set(t.form,"standard",e)},expression:"form.standard"}})],1),t._v(" "),t._l(t.mySynonyms,function(e,i){return n("el-form-item",{key:e.id,attrs:{label:"相似词"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:e.synonym,callback:function(n){t.$set(e,"synonym",n)},expression:"synonym.synonym"}}),t._v(" "),i>0?n("el-button",{on:{click:function(n){n.preventDefault(),t.removeSynonym(e.id)}}},[t._v("删除")]):t._e(),t._v(" "),0===i?n("el-button",{on:{click:function(e){e.preventDefault(),t.addSynonyms()}}},[t._v("添加")]):t._e()],1)})],2),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.doAddSynonym()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Aa={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-stat"}},[this._v("\n  问题/答案、未匹配、有帮助/无帮助\n")])},staticRenderFns:[]};var ka={name:"bd-robot",components:{BdQa:ya,BdSynonym:n("VU/8")(Ia,wa,!1,function(t){n("wnAD")},"data-v-26d1550f",null).exports,BdStat:n("VU/8")({name:"bd-stat"},Aa,!1,function(t){n("DNK6")},"data-v-a7bbf46e",null).exports},data:function(){return{activeName:"qa",loading:!0}},computed:Ii()({},Object(c.c)(["showAuthority"])),methods:Ii()({},Object(c.b)(["getCategories","getRobotAnswers","getRobotSynonyms","changeCurrentMainView"]),{handleClick:function(t,e){if("qa"===t.name){this.getCategories();this.getRobotAnswers({categoryId:0,page:0,size:20})}else if("synonym"===t.name){this.getRobotSynonyms({page:0,size:20})}else t.name}}),created:function(){this.getCategories();this.getRobotAnswers({categoryId:0,page:0,size:20})},mounted:function(){this.changeCurrentMainView("robot")}},Ra={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-robot"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"常见问题",name:"qa"}},[n("bd-qa")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"相似词",name:"synonym"}},[n("bd-synonym")],1),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"问题统计",name:"stat"}},[n("bd-stat")],1):t._e()],1)],1)},staticRenderFns:[]};var Na=n("VU/8")(ka,Ra,!1,function(t){n("QpaG")},"data-v-ecabc9be",null).exports,Oa={name:"bd-chart",data:function(){return{chart:""}},props:{id:{type:String},title:{type:String},width:{type:String,default:"100%"},height:{type:String,default:"400px"},totalThreadCounts:{type:Array},totalQueueCounts:{type:Array},option:{type:Object,default:function(){return{title:{text:this.title},tooltip:{trigger:"axis"},legend:{data:["接待人次","排队人次","消息条数"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},xAxis:{type:"category",boundaryGap:!1,data:["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"]},yAxis:{type:"value"},series:[{name:"接待人次",type:"line",data:this.totalThreadCounts},{name:"排队人次",type:"line",data:this.totalQueueCounts},{name:"消息条数",type:"line",data:this.totalQueueCounts}]}}}},watch:{option:{handler:function(t,e){this.chart?t?this.chart.setOption(t):this.chart.setOption(e):this.init()},deep:!0}},computed:{style:function(){return{height:this.height,width:this.width}}},methods:{init:function(){this.chart=this.$echarts.init(document.getElementById(this.id)),this.chart.setOption(this.option),window.addEventListener("resize",this.chart.resize)}},mounted:function(){this.init()}},xa={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticStyle:{"margin-top":"10px"},style:this.style,attrs:{id:this.id}})},staticRenderFns:[]},Ua={name:"bd-all",data:function(){return{loading:!1,pageSize:20,currentPage:1,type:"1",title:"24小时在线服务趋势图",filterDate:"",filterRealName:"",filterDatePickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]}}},components:{BdChart:n("VU/8")(Oa,xa,!1,null,null,null).exports},computed:Ii()({},Object(c.c)(["statistic","totalThreadCounts","totalQueueCounts"])),methods:Ii()({},Object(c.b)(["getStatisticDetails","filterStatisticDetail"]),{handleQuery:function(){if(console.log("filter:",this.filterDate,this.filterRealName),""===this.filterDate&&""===this.filterRealName){this.getStatisticDetails({page:0,size:20})}else{var t={page:0,size:20,date:moment(this.filterDate).format("YYYY-MM-DD"),realName:this.filterRealName};this.filterStatisticDetail(t)}},handleSizeChange:function(t){this.pageSize=t,this.loading=!0;var e={page:this.currentPage-1,size:this.pageSize};this.getStatisticDetails(e)},onTypeChanged:function(t){console.log(t),1===t?this.title="24小时在线服务趋势图":2===t?this.title="一周在线服务趋势图":3===t&&(this.title="一月在线服务趋势图")},handleCurrentChange:function(t){this.currentPage=t,this.loading=!0;var e={page:this.currentPage-1,size:this.pageSize};this.getStatisticDetails(e)},handleViewDetail:function(t){console.log("view detail:",t),Tt.$emit(u.EVENT_BUS_STATISTIC_DETAIL,t)}})},Pa={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-all"}},[n("el-row",{staticClass:"bd-sum",attrs:{gutter:12}},[n("el-col",{attrs:{span:4}},[n("el-card",{staticClass:"bd-card",attrs:{shadow:"hover"}},[n("p",[t._v("在线客服数")]),t._v(" "),n("p",{staticClass:"bd-number"},[t._v(t._s(t.statistic.online_agent_count))]),t._v(" "),n("p",{staticClass:"bd-link-detail",on:{click:function(e){t.handleViewDetail(1)}}},[t._v("查看详情")])])],1),t._v(" "),n("el-col",{attrs:{span:4}},[n("el-card",{staticClass:"bd-card",attrs:{shadow:"hover"}},[n("p",[t._v("当前会话数")]),t._v(" "),n("p",{staticClass:"bd-number"},[t._v(t._s(t.statistic.current_thread_count))]),t._v(" "),n("p",{staticClass:"bd-link-detail",on:{click:function(e){t.handleViewDetail(2)}}},[t._v("查看详情")])])],1),t._v(" "),n("el-col",{attrs:{span:4}},[n("el-card",{staticClass:"bd-card",attrs:{shadow:"hover"}},[n("p",[t._v("当前排队数")]),t._v(" "),n("p",{staticClass:"bd-number"},[t._v(t._s(t.statistic.current_queue_count))]),t._v(" "),n("p",{staticClass:"bd-link-detail",on:{click:function(e){t.handleViewDetail(3)}}},[t._v("查看详情")])])],1),t._v(" "),n("el-col",{attrs:{span:4}},[n("el-card",{staticClass:"bd-card",attrs:{shadow:"hover"}},[n("p",[t._v("放弃排队数")]),t._v(" "),n("p",{staticClass:"bd-number"},[t._v(t._s(t.statistic.today_leave_queue_count))]),t._v(" "),n("p",{staticClass:"bd-link-detail",on:{click:function(e){t.handleViewDetail(4)}}},[t._v("查看详情")])])],1),t._v(" "),n("el-col",{attrs:{span:4}},[n("el-card",{staticClass:"bd-card",attrs:{shadow:"hover"}},[n("p",[t._v("今日会话总量")]),t._v(" "),n("p",{staticClass:"bd-number"},[t._v(t._s(t.statistic.today_total_thread_count))]),t._v(" "),n("p",{staticClass:"bd-link-detail",on:{click:function(e){t.handleViewDetail(5)}}},[t._v("查看详情")])])],1),t._v(" "),n("el-col",{attrs:{span:4}},[n("el-card",{staticClass:"bd-card",attrs:{shadow:"hover"}},[n("p",[t._v("今日排队总量")]),t._v(" "),n("p",{staticClass:"bd-number"},[t._v(t._s(t.statistic.today_total_queue_count))]),t._v(" "),n("p",{staticClass:"bd-link-detail",on:{click:function(e){t.handleViewDetail(6)}}},[t._v("查看详情")])])],1)],1),t._v(" "),n("div",{staticClass:"bd-charts"},[n("el-radio-group",{attrs:{size:"mini"},on:{change:t.onTypeChanged},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[n("el-radio-button",{attrs:{label:1}},[t._v("24小时")]),t._v(" "),n("el-radio-button",{attrs:{label:2}},[t._v("一周")]),t._v(" "),n("el-radio-button",{attrs:{label:3}},[t._v("一月")])],1),t._v(" "),n("bd-chart",{attrs:{id:"charts",title:t.title,totalThreadCounts:t.totalThreadCounts,totalQueueCounts:t.totalQueueCounts}})],1)],1)},staticRenderFns:[]};var Da=n("VU/8")(Ua,Pa,!1,function(t){n("OoIy")},"data-v-27da0478",null).exports,Ma={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-rate"}},[this._v("\n  满意度详情\n")])},staticRenderFns:[]};var Va=n("VU/8")({name:"bd-rate"},Ma,!1,function(t){n("szx3")},"data-v-2718c4cb",null).exports,Ga={name:"bd-statistic-thread",data:function(){return{filterDate:"",filterRealName:"",filterDatePickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]}}},computed:Ii()({},Object(c.c)(["statisticThreads"])),methods:{handleQuery:function(){},handleExport:function(){}}},La={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-statistic-thread"}},[n("div",{staticStyle:{float:"left"}},[n("el-date-picker",{staticStyle:{width:"155px","margin-right":"10px"},attrs:{size:"mini",align:"right",type:"date",placeholder:"选择日期","picker-options":t.filterDatePickerOptions},model:{value:t.filterDate,callback:function(e){t.filterDate=e},expression:"filterDate"}}),t._v(" "),n("el-input",{staticStyle:{width:"155px","margin-right":"10px"},attrs:{size:"mini",placeholder:"客服真名",clearable:""},model:{value:t.filterRealName,callback:function(e){t.filterRealName=e},expression:"filterRealName"}}),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-download"},on:{click:t.handleExport}},[t._v("导出")])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.statisticThreads.content}},[n("el-table-column",{attrs:{type:"index",width:"40"}}),t._v(" "),n("el-table-column",{attrs:{prop:"date",label:"日期",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.date)+" "+t._s(e.row.hour)+"点")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"user.realName",label:"客服真名",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"totalMessageCount",label:"总消息数",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"visitorMessageCount",label:"访客消息数",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"agentMessageCount",label:"客服消息数",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"agentWordCount",label:"客服字数",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"acceptRateLt1m",label:"1分钟接通率",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"acceptRateLt3m",label:"3分钟接通率",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"acceptRateLt5m",label:"5分钟接通率",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"acceptRateGt5m",label:"超时接通率",sortable:""}})],1)],1)},staticRenderFns:[]};var Ba=n("VU/8")(Ga,La,!1,function(t){n("d/iS")},"data-v-5da4a6d3",null).exports,za={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-static-ticket"}},[this._v("\n  工单分析\n")])},staticRenderFns:[]};var Fa=n("VU/8")({name:"bd-static-ticket"},za,!1,function(t){n("hEA6")},"data-v-67bd0494",null).exports,$a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-statistic-agent"}},[this._v("\n  坐席分析\n")])},staticRenderFns:[]};var Wa={name:"bd-statistic",components:{BdAll:Da,BdAgent:n("VU/8")({name:"bd-statistic-agent"},$a,!1,function(t){n("/Qwz")},"data-v-e5943864",null).exports,BdRate:Va,BdThread:Ba,BdTicket:Fa},data:function(){return{activeName:"all",tabIndex:1,editableTabs:[]}},computed:Ii()({},Object(c.c)(["showAuthority"])),methods:Ii()({},Object(c.b)(["getStatistics","getStatisticThread","getStatisticRate","changeCurrentMainView"]),{handleClick:function(t,e){var n={page:0,size:20};"all"===t.name?this.getStatistics():"thread"===t.name?this.getStatisticThread(n):"rate"===t.name?this.getStatisticRate(n):t.name},handleTabsEdit:function(t,e){if("remove"===e){var n=this.editableTabs,i="all";i===t&&n.forEach(function(e,o){if(e.name===t){var a=n[o+1]||n[o-1];a&&(i=a.name)}}),this.activeName="all",this.editableTabs=n.filter(function(e){return e.name!==t})}}}),mounted:function(){var t=this;this.getStatistics(),this.changeCurrentMainView("statistic"),Tt.$on(u.EVENT_BUS_STATISTIC_DETAIL,function(e){console.log("on statisitc detail:",e),t.editableTabs.push({title:"数据详情TODO"+t.tabIndex,name:""+t.tabIndex,value:e}),t.activeName=""+t.tabIndex,t.tabIndex++})}},Ha={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-statistic"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick,edit:t.handleTabsEdit},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"数据总览",name:"all"}},[n("bd-all")],1),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"会话分析",name:"thread"}},[n("bd-thread")],1):t._e(),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"满意度分析",name:"rate"}},[n("bd-rate")],1):t._e(),t._v(" "),t._l(t.editableTabs,function(t){return n("el-tab-pane",{key:t.name,staticStyle:{height:"100%"},attrs:{closable:"",label:t.title,name:t.name}})})],2)],1)},staticRenderFns:[]};var Ya=n("VU/8")(Wa,Ha,!1,function(t){n("oCSg")},"data-v-0e822222",null).exports,ja={name:"bd-all",data:function(){return{currentCategoryId:0,currentPage:1,filterText:"",defaultProps:{children:"children",label:"name"}}},computed:Ii()({},Object(c.c)(["supportCategories","supportArticles"])),watch:{filterText:function(t){this.$refs.cateTree.filter(t)}},methods:Ii()({},Object(c.b)(["getCategories","createCategory","deleteCategory","getSupportArticles","createSupportArticle","updateSupportArticle","deleteSupportArticle"]),{gotoHelpdoc:function(){window.open(u.HELP_BASE_URL+"201810252124471")},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},handleNodeClick:function(t){console.log(t),this.currentCategoryId=t.id;var e={categoryId:this.currentCategoryId,page:0,size:20};this.getSupportArticles(e)},handleNodeContextMenuClick:function(t,e,n){console.log(t,e,n)},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={categoryId:this.currentCategoryId,page:this.currentPage-1,size:20};this.getSupportArticles(e)},addArticles:function(){console.log("settings")},addCategory:function(){var t=this;this.$prompt("请输入类别","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var n=e.value;if(console.log(n),null!=n&&n.length>0){var i={parent_id:t.currentCategoryId,name:n};t.createCategory(i)}}).catch(function(){})},editCategory:function(){},deleteCategory:function(){},handleView:function(t,e){},handleEdit:function(t,e){Tt.$emit(u.EVENT_BUS_SUPPORT_EDIT_ARTICLE,e)},handleDelete:function(t,e){var n=this;console.log(t,e),this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteSupportArticle(e.id)}).catch(function(){})}}),created:function(){}},qa={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-all"}},[n("el-row",[n("el-col",{attrs:{span:4,id:"left-col"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"15px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left","margin-bottom":"15px"},attrs:{size:"mini",type:"success"},on:{click:t.addArticles}},[t._v("添加问题分类")]),t._v(" "),n("el-input",{attrs:{size:"mini",placeholder:"搜索问题分类"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),n("el-tree",{ref:"cateTree",staticClass:"filter-tree",attrs:{"default-expand-all":"",data:t.supportCategories,props:t.defaultProps,"filter-node-method":t.filterNode},on:{"node-click":t.handleNodeClick}}),t._v(" "),n("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.addCategory}},[t._v("添加")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.editCategory}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:t.deleteCategory}},[t._v("删除")])],1),t._v(" "),n("el-col",{attrs:{span:20,id:"right-col"}},[n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,total:t.supportArticles.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","text-align":"left"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.supportArticles.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"内容"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"图片"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"手机"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"邮箱"}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"反馈时间"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){t.handleView(e.$index,e.row)}}},[t._v("预览")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,total:t.supportArticles.totalElements},on:{"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var Qa=n("VU/8")(ja,qa,!1,function(t){n("jNd/")},"data-v-3116ad8a",null).exports,Ka={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-feedback-code"}},[this._v("\n  代码\n")])},staticRenderFns:[]};var Xa=n("VU/8")({name:"bd-feedback-code"},Ka,!1,function(t){n("Bh/j")},"data-v-220b6518",null).exports,Ja={name:"bd-record",data:function(){return{currentCategoryId:0,currentPage:1,filterText:"",defaultProps:{children:"children",label:"name"}}},computed:Ii()({},Object(c.c)(["supportCategories","supportArticles"])),watch:{filterText:function(t){this.$refs.cateTree.filter(t)}},methods:Ii()({},Object(c.b)(["getCategories","createCategory","deleteCategory","getSupportArticles","createSupportArticle","updateSupportArticle","deleteSupportArticle"]),{gotoHelpdoc:function(){window.open("http://localhost:8000/support?uid=201808221551193")},gotoArticle:function(t){window.open("http://localhost:8000/support/article?aid="+t)},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},handleNodeClick:function(t){console.log(t),this.currentCategoryId=t.id;var e={categoryId:this.currentCategoryId,page:0,size:20};this.getSupportArticles(e)},handleNodeContextMenuClick:function(t,e,n){console.log(t,e,n)},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={categoryId:this.currentCategoryId,page:this.currentPage-1,size:20};this.getSupportArticles(e)},addArticles:function(){console.log("settings")},editCategory:function(){},addCategory:function(){var t=this;this.$prompt("请输入类别","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var n=e.value;if(console.log(n),null!=n&&n.length>0){var i={parent_id:t.currentCategoryId,name:n};t.createCategory(i)}}).catch(function(){})},handleView:function(t,e){this.gotoArticle(e.aid)},handleEdit:function(t,e){Tt.$emit(u.EVENT_BUS_SUPPORT_EDIT_ARTICLE,e)},handleDelete:function(t,e){var n=this;console.log(t,e),this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteSupportArticle(e.id)}).catch(function(){})}}),created:function(){}},Za={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-record"}},[n("el-button",{staticStyle:{float:"left"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""}},[t._v("帮助文档")]),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,total:t.supportArticles.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","text-align":"left"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.supportArticles.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"内容"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"图片"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"手机"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"邮箱"}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"反馈时间",width:"150",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,total:t.supportArticles.totalElements},on:{"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var tr={name:"bd-feedback",components:{BdAll:Qa,BdCode:Xa,BdRecord:n("VU/8")(Ja,Za,!1,function(t){n("/r6s")},"data-v-2dada7f5",null).exports},data:function(){return{activeName:"all"}},computed:Ii()({},Object(c.c)([])),methods:Ii()({},Object(c.b)(["changeCurrentMainView"])),created:function(){},mounted:function(){this.changeCurrentMainView("feedback")}},er={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-feedback"}},[n("el-tabs",{staticStyle:{height:"100%"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"意见反馈",name:"all"}},[n("bd-all")],1)],1)],1)},staticRenderFns:[]};var nr=n("VU/8")(tr,er,!1,function(t){n("MwHW")},"data-v-2c779c55",null).exports,ir=1e3,or={name:"bd-all",data:function(){return{currentCategory:{id:0,name:"",children:[]},loading:!1,pageSize:20,currentPage:1,filterText:"",defaultProps:{children:"children",label:"name"},helpUrl:u.HELP_URL,electron:u.IS_ELECTRON}},computed:Ii()({},Object(c.c)(["supportCategories","supportArticles"])),watch:{filterText:function(t){this.$refs.cateTree.filter(t)}},methods:Ii()({},Object(c.b)(["getCategories","createCategory","updateCategory","deleteCategory","getSupportArticles","createSupportArticle","updateSupportArticle","deleteSupportArticle"]),{gotoHelpdoc:function(){this.electron?ipcRenderer.send("open-external-url",this.helpUrl):window.open(this.helpUrl)},gotoArticle:function(t){var e=u.HELP_BASE_URL+t;this.electron?ipcRenderer.send("open-external-url",e):window.open(e)},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},rateTotal:function(t){return t.rateHelpful+t.rateUseless},handleNodeClick:function(t){this.currentCategory.id=t.id,this.currentCategory.name=t.name,this.currentCategory.children=t.children;var e={categoryId:this.currentCategory.id,page:0,size:20};this.getSupportArticles(e)},append:function(t){var e={id:ir++,label:"testtest",children:[]};t.children||this.$set(t,"children",[]),t.children.push(e)},remove:function(t,e){var n=t.parent,i=n.data.children||n.data,o=i.findIndex(function(t){return t.id===e.id});i.splice(o,1)},handleSizeChange:function(t){console.log(t),this.pageSize=t;var e={categoryId:this.currentCategory.id,page:this.currentPage-1,size:this.pageSize};this.getSupportArticles(e)},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={categoryId:this.currentCategory.id,page:this.currentPage-1,size:this.pageSize};this.getSupportArticles(e)},addArticle:function(){Tt.$emit(u.EVENT_BUS_SUPPORT_NEW_ARTICLE)},addCategory:function(){var t=this;this.$prompt("请输入类别","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var n=e.value;if(console.log(n),null!=n&&n.length>0){var i={parent_id:t.currentCategory.id,name:n,type:u.CATEGORY_TYPE_SUPPORT};t.createCategory(i)}}).catch(function(){})},editCategory:function(){var t=this;0===this.currentCategory.id?this.$message.error("请选择要编辑的类别"):this.$prompt("编辑类别","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.currentCategory.name}).then(function(e){var n=e.value;if(console.log(n),null!=n&&n.length>0){var i={category_id:t.currentCategory.id,name:n};t.updateCategory(i)}else t.$message.error("不能为空")}).catch(function(){})},removeCategory:function(){var t=this;0!==this.currentCategory.id?this.currentCategory.children.length>0?this.$message.error("请首先删除子分类"):this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteCategory(t.currentCategory.id),t.currentCategory.id=0}).catch(function(){}):this.$message.error("不允许删除")},handleView:function(t,e){this.gotoArticle(e.aid)},handleEdit:function(t,e){Tt.$emit(u.EVENT_BUS_SUPPORT_EDIT_ARTICLE,e)},handleDelete:function(t,e){var n=this;console.log(t,e),this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteSupportArticle(e.id)}).catch(function(){})}}),created:function(){}},ar={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-all"}},[n("el-row",[n("el-col",{attrs:{span:4,id:"left-col"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"15px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left","margin-bottom":"15px"},attrs:{size:"mini",type:"success"},on:{click:t.addArticle}},[t._v("添加文章")]),t._v(" "),n("el-input",{attrs:{size:"mini",placeholder:"搜索分类"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),n("el-tree",{ref:"cateTree",staticClass:"filter-tree",attrs:{"default-expand-all":"",data:t.supportCategories,props:t.defaultProps,"filter-node-method":t.filterNode},on:{"node-click":t.handleNodeClick}}),t._v(" "),n("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.addCategory}},[t._v("添加")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.editCategory}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:t.removeCategory}},[t._v("删除")])],1),t._v(" "),n("el-col",{attrs:{span:20,id:"right-col"}},[n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.supportArticles.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","text-align":"left"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.supportArticles.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),n("el-table-column",{attrs:{prop:"recommend",label:"首页推荐",width:"100",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.recommend?n("span",[t._v("是")]):t._e(),t._v(" "),e.row.recommend?t._e():n("span",[t._v("否")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"readCount",label:"阅读数目",width:"100",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"rateHelpful",label:"有帮助/总数",width:"120",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.rateHelpful)+"/"+t._s(t.rateTotal(e.row)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"创建时间",width:"150",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"updatedAt",label:"更新时间",width:"150",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){t.handleView(e.$index,e.row)}}},[t._v("预览")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.supportArticles.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var rr=n("VU/8")(or,ar,!1,function(t){n("bsQx")},"data-v-610e85a8",null).exports,sr=n("yPE/"),lr=n.n(sr),cr={name:"bd-quill-editor",props:{value:{type:String,default:""}},data:function(){return{editor:null,toolbarOptions:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image","video"],["clean"]]}},methods:{update:function(){this.$emit("change",this.editor.getText()?this.editor.root.innerHTML:"")}},mounted:function(){var t=this;this.editor=new lr.a(this.$refs.editor,{modules:{toolbar:this.toolbarOptions},theme:"snow",formats:["bold","underline","header","italic"]}),this.editor.root.innerHTML=this.value,this.editor.on("text-change",function(e,n,i){t.update()})}},ur={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"bd-quill-editor"}},[e("div",{ref:"editor"},[e("p",[this._v("Hello World!")])])])},staticRenderFns:[]};var dr=n("VU/8")(cr,ur,!1,function(t){n("Hh+g")},"data-v-7a0e2097",null).exports,pr={name:"bd-new",components:{BdQuillEditor:dr},data:function(){return{form:{title:"",content:"",recommend:!1,published:!1,markdown:!1,summary:"",categories:[]},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}],categories:[{type:"array",required:!0,message:"请至少选择一个类别",trigger:"change"}]}}},computed:Ii()({},Object(c.c)(["supportCategories","supportArticles"]),{editor:function(){return this.$refs.myTextEditor.quill}}),methods:Ii()({},Object(c.b)(["getCategories","createCategory","deleteCategory","getSupportArticles","createSupportArticle","updateSupportArticle","deleteSupportArticle"]),{onEditorChange:function(t){this.form.content=t},onEditorBlur:function(t){},onEditorFocus:function(t){},onEditorReady:function(t){},saveArticle:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return t.$message.error("缺少必填字段"),!1;t.createSupportArticle(t.form)})}}),created:function(){var t=this;Tt.$on(u.EVENT_BUS_SUPPORT_NEW_ARTICLE_SUCCESS,function(e){t.$message({message:"创建成功",type:"success"})}),Tt.$on(u.EVENT_BUS_SUPPORT_NEW_ARTICLE_ERROR,function(e){t.$message.error("创建失败")})}},mr={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-new"}},[n("el-form",{ref:"form",staticStyle:{width:"80%"},attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{staticStyle:{width:"450px",float:"left"},attrs:{placeholder:"标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"推荐首页",prop:"recommend"}},[n("el-radio-group",{staticStyle:{float:"left","margin-top":"13px"},model:{value:t.form.recommend,callback:function(e){t.$set(t.form,"recommend",e)},expression:"form.recommend"}},[n("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"所属分类",prop:"categories"}},[n("el-checkbox-group",{staticStyle:{float:"left"},model:{value:t.form.categories,callback:function(e){t.$set(t.form,"categories",e)},expression:"form.categories"}},t._l(t.supportCategories,function(e){return e.id>0?n("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))]):t._e()}))],1),t._v(" "),n("el-form-item",{attrs:{label:"立即发布",prop:"published"}},[n("el-radio-group",{staticStyle:{float:"left","margin-top":"13px"},model:{value:t.form.published,callback:function(e){t.$set(t.form,"published",e)},expression:"form.published"}},[n("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"概要"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:10}},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"编辑器"}},[n("el-radio-group",{staticStyle:{float:"left","margin-top":"13px"},model:{value:t.form.markdown,callback:function(e){t.$set(t.form,"markdown",e)},expression:"form.markdown"}},[n("el-radio",{attrs:{label:!1}},[t._v("HTML")]),t._v(" "),n("el-radio",{attrs:{label:!0}},[t._v("MarkDown")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"内容",prop:"content"}},[t.form.markdown?t._e():n("bd-quill-editor",{staticStyle:{height:"400px"},attrs:{value:t.form.content},on:{change:t.onEditorChange}}),t._v(" "),t.form.markdown?n("mavon-editor",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}):t._e()],1),t._v(" "),n("el-form-item",{staticStyle:{"margin-top":"60px",float:"left"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.saveArticle}},[t._v("立即创建")])],1)],1)],1)},staticRenderFns:[]};var fr=n("VU/8")(pr,mr,!1,function(t){n("TgUw")},"data-v-718e570c",null).exports,_r={name:"bd-edit",components:{BdQuillEditor:dr},props:["article"],data:function(){return{rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}],categories:[{type:"array",required:!0,message:"请至少选择一个类别",trigger:"change"}]}}},computed:Ii()({},Object(c.c)(["supportCategories","supportArticles"]),{editor:function(){return this.$refs.myTextEditor.quill}}),methods:Ii()({},Object(c.b)(["getCategories","createCategory","deleteCategory","getSupportArticles","createSupportArticle","updateSupportArticle","deleteSupportArticle"]),{onEditorChange:function(t){this.article.content=t},onEditorBlur:function(t){},onEditorFocus:function(t){},onEditorReady:function(t){},saveArticle:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return t.$message.error("缺少必填字段"),!1;t.updateSupportArticle(t.article)})}}),created:function(){var t=this;Tt.$on(u.EVENT_BUS_SUPPORT_UPDATE_ARTICLE_SUCCESS,function(e){t.$message({message:"保存成功",type:"success"})}),Tt.$on(u.EVENT_BUS_SUPPORT_UPDATE_ARTICLE_ERROR,function(e){t.$message.error("保存失败")})}},hr={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-edit"}},[n("el-form",{ref:"form",staticStyle:{width:"80%"},attrs:{model:t.article,rules:t.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{staticStyle:{width:"450px",float:"left"},attrs:{placeholder:"标题"},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"推荐首页",prop:"recommend"}},[n("el-radio-group",{staticStyle:{float:"left","margin-top":"13px"},model:{value:t.article.recommend,callback:function(e){t.$set(t.article,"recommend",e)},expression:"article.recommend"}},[n("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"所属分类",prop:"categories"}},[n("el-checkbox-group",{staticStyle:{float:"left"},model:{value:t.article.categories,callback:function(e){t.$set(t.article,"categories",e)},expression:"article.categories"}},t._l(t.supportCategories,function(e){return e.id>0?n("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))]):t._e()}))],1),t._v(" "),n("el-form-item",{attrs:{label:"立即发布",prop:"published"}},[n("el-radio-group",{staticStyle:{float:"left","margin-top":"13px"},model:{value:t.article.published,callback:function(e){t.$set(t.article,"published",e)},expression:"article.published"}},[n("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"概要"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:10}},model:{value:t.article.summary,callback:function(e){t.$set(t.article,"summary",e)},expression:"article.summary"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"编辑器"}},[n("el-radio-group",{staticStyle:{float:"left","margin-top":"13px"},model:{value:t.article.markdown,callback:function(e){t.$set(t.article,"markdown",e)},expression:"article.markdown"}},[n("el-radio",{attrs:{label:!1}},[t._v("HTML")]),t._v(" "),n("el-radio",{attrs:{label:!0}},[t._v("MarkDown")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"内容",prop:"content"}},[t.article.markdown?t._e():n("bd-quill-editor",{staticStyle:{height:"400px"},attrs:{value:t.article.content},on:{change:t.onEditorChange}}),t._v(" "),t.article.markdown?n("mavon-editor",{model:{value:t.article.content,callback:function(e){t.$set(t.article,"content",e)},expression:"article.content"}}):t._e()],1),t._v(" "),n("el-form-item",{staticStyle:{"margin-top":"60px",float:"left"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.saveArticle}},[t._v("立即保存")])],1)],1)],1)},staticRenderFns:[]};var gr={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-statistic"}},[this._v("\n  阅读、对话框点击、点赞等统计\n")])},staticRenderFns:[]};var vr={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-knowledge"}},[this._v("\n  知识库\n")])},staticRenderFns:[]};var Er={name:"bd-support",components:{BdAll:rr,BdNew:fr,BdEdit:n("VU/8")(_r,hr,!1,function(t){n("tf6n")},"data-v-6fa63f74",null).exports,BdStatistic:n("VU/8")({name:"bd-statistic"},gr,!1,function(t){n("l+Ea")},"data-v-2c7cb26b",null).exports,BdKnowledge:n("VU/8")({name:"bd-knowledge"},vr,!1,function(t){n("qrgt")},"data-v-35f6ec72",null).exports},data:function(){return{activeName:"all",tabIndex:1,editableTabs:[]}},computed:Ii()({},Object(c.c)(["supportCategories","supportArticles","showAuthority"])),methods:Ii()({},Object(c.b)(["getCategories","createCategory","deleteCategory","getSupportArticles","createSupportArticle","updateSupportArticle","deleteSupportArticle","changeCurrentMainView"]),{handleClick:function(t,e){if("all"===t.name){this.getCategories();this.getSupportArticles({categoryId:0,page:0,size:20})}},handleTabsEdit:function(t,e){if("remove"===e){var n=this.editableTabs,i="all";i===t&&n.forEach(function(e,o){if(e.name===t){var a=n[o+1]||n[o-1];a&&(i=a.name)}}),this.activeName="all",this.editableTabs=n.filter(function(e){return e.name!==t})}}}),created:function(){this.getCategories();this.getSupportArticles({categoryId:0,page:0,size:20})},mounted:function(){var t=this;this.changeCurrentMainView("support"),Tt.$on(u.EVENT_BUS_SUPPORT_NEW_ARTICLE,function(e){t.editableTabs.push({title:"创建新文章"+t.tabIndex,name:""+t.tabIndex,edit:!1}),t.activeName=""+t.tabIndex,t.tabIndex++}),Tt.$on(u.EVENT_BUS_SUPPORT_EDIT_ARTICLE,function(e){for(var n=[],i=0;i<e.categories.length;i++){var o=e.categories[i];n.push(o.id)}var a={id:e.id,title:e.title,content:e.content,recommend:e.recommend,markdown:e.markdown,published:e.published,summary:e.summary,categories:n};t.editableTabs.push({title:"编辑文章"+t.tabIndex,name:""+t.tabIndex,edit:!0,article:a}),t.activeName=""+t.tabIndex,t.tabIndex++})}},Tr={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-support"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick,edit:t.handleTabsEdit},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"外部帮助中心",name:"all"}},[n("bd-all")],1),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"内部知识库",name:"knowledge"}},[n("bd-knowledge")],1):t._e(),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"统计数据",name:"statistic"}},[n("bd-statistic")],1):t._e(),t._v(" "),t._l(t.editableTabs,function(e){return n("el-tab-pane",{key:e.name,staticStyle:{height:"100%"},attrs:{closable:"",label:e.title,name:e.name}},[e.edit?t._e():n("bd-new"),t._v(" "),e.edit?n("bd-edit",{attrs:{article:e.article}}):t._e()],1)})],2)],1)},staticRenderFns:[]};var br=n("VU/8")(Er,Tr,!1,function(t){n("szfx")},"data-v-a3e95f9a",null).exports,Sr={name:"bd-all",data:function(){return{filterText:"",data:[{label:"工单概况"},{label:"全部工单(0)"},{label:"我的工单(0)"},{label:"待处理工单(0)"},{label:"待分配工单(0)"},{label:"关注的工单(0)"},{label:"已关闭的工单(0)"}],defaultProps:{children:"children",label:"label"}}},watch:{filterText:function(t){}},methods:{handleNodeClick:function(t){console.log(t)},gotoHelpdoc:function(){window.open(u.HELP_BASE_URL+"201809042103521")},createTicket:function(){Tt.$emit(u.EVENT_BUS_SUPPORT_NEW_TICKET)}}},Cr={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-all"}},[n("el-row",[n("el-col",{attrs:{span:4,id:"left-col"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"15px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left","margin-bottom":"15px"},attrs:{size:"mini",type:"success"},on:{click:t.createTicket}},[t._v("创建工单")]),t._v(" "),n("el-tree",{staticClass:"filter-tree",attrs:{data:t.data,props:t.defaultProps},on:{"node-click":t.handleNodeClick}})],1),t._v(" "),n("el-col",{attrs:{span:20,id:"right-col"}})],1)],1)},staticRenderFns:[]};var yr={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-ticket-email"}},[this._v("\n  邮件通知模板\n")])},staticRenderFns:[]};var Ir={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-ticket-sms"}},[this._v("\n  短信通知\n")])},staticRenderFns:[]};var wr={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-ticket-feedback"}},[this._v("\n  意见反馈\n")])},staticRenderFns:[]};var Ar={name:"bd-ticket-new",data:function(){return{form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},upload_headers:{"X-CSRF-TOKEN":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json",Authorization:"Bearer "},upload_data:{file_name:"test.png",username:""},upload_name:"file"}},computed:{uploadImageServerUrl:function(){return u.UPLOAD_IMAGE_URL}},methods:{handleImageUploadSuccess:function(t,e){console.log("upload image success result:",t," file:",e)},beforeImageUpload:function(t){},onSubmit:function(){console.log("submit!")}}},kr={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-ticket-new"}},[n("el-form",{ref:"form",attrs:{id:"bd-ticket-form",model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"类型"}},[n("el-radio-group",{model:{value:t.form.resource,callback:function(e){t.$set(t.form,"resource",e)},expression:"form.resource"}},[n("el-radio",{attrs:{label:"工作组"}}),t._v(" "),n("el-radio",{attrs:{label:"指定人"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"等级"}},[n("el-radio-group",{model:{value:t.form.resource,callback:function(e){t.$set(t.form,"resource",e)},expression:"form.resource"}},[n("el-radio",{attrs:{label:"高"}}),t._v(" "),n("el-radio",{attrs:{label:"中"}}),t._v(" "),n("el-radio",{attrs:{label:"底"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"附件"}},[n("el-upload",{staticClass:"upload-demo",attrs:{data:t.upload_data,name:t.upload_name,action:t.uploadImageServerUrl,"on-success":t.handleImageUploadSuccess,"before-upload":t.beforeImageUpload}},[n("el-button",{attrs:{size:"small",type:"primary",disabled:!0}},[t._v("点击上传")])],1)],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")]),t._v(" "),n("el-button",[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var Rr={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-ticket-edit"}},[this._v("\n  编辑工单\n")])},staticRenderFns:[]};var Nr={name:"bd-ticket",components:{BdAll:n("VU/8")(Sr,Cr,!1,function(t){n("38LJ")},"data-v-80d4d550",null).exports,BdEmail:n("VU/8")({name:"bd-ticket-email"},yr,!1,function(t){n("1Zfq")},"data-v-50d1f827",null).exports,BdSms:n("VU/8")({name:"bd-ticket-sms"},Ir,!1,function(t){n("Bmmi")},"data-v-2019e85e",null).exports,BdFeedback:n("VU/8")({name:"bd-ticket-feedback"},wr,!1,function(t){n("8xrX")},"data-v-90fb6df4",null).exports,BdNew:n("VU/8")(Ar,kr,!1,function(t){n("ZKXY")},"data-v-c3c2268a",null).exports,BdEdit:n("VU/8")({name:"bd-ticket-edit"},Rr,!1,function(t){n("jCew")},"data-v-470052e3",null).exports},data:function(){return{activeName:"all",tabIndex:1,editableTabs:[]}},computed:Ii()({},Object(c.c)(["showAuthority"])),methods:Ii()({},Object(c.b)([]),{handleClick:function(t,e){},handleTabsEdit:function(t,e){if("remove"===e){var n=this.editableTabs,i="all";i===t&&n.forEach(function(e,o){if(e.name===t){var a=n[o+1]||n[o-1];a&&(i=a.name)}}),this.activeName="all",this.editableTabs=n.filter(function(e){return e.name!==t})}}}),mounted:function(){var t=this;Tt.$on(u.EVENT_BUS_SUPPORT_NEW_TICKET,function(e){t.editableTabs.push({title:"创建新工单"+t.tabIndex,name:""+t.tabIndex,edit:!1}),t.activeName=""+t.tabIndex,t.tabIndex++}),Tt.$on(u.EVENT_BUS_SUPPORT_EDIT_TICKET,function(t){})}},Or={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-ticket"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick,edit:t.handleTabsEdit},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"工单系统",name:"all"}},[n("bd-all")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"邮件模板",name:"email"}},[n("bd-email")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"短信模板",name:"sms"}},[n("bd-sms")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"意见反馈",name:"feedback"}},[n("bd-feedback")],1),t._v(" "),t._l(t.editableTabs,function(e){return n("el-tab-pane",{key:e.name,staticStyle:{height:"100%"},attrs:{closable:"",label:e.title,name:e.name}},[e.edit?t._e():n("bd-new"),t._v(" "),e.edit?n("bd-edit",{attrs:{article:e.article}}):t._e()],1)})],2)],1)},staticRenderFns:[]};var xr=n("VU/8")(Nr,Or,!1,function(t){n("eWUn")},"data-v-097638ac",null).exports,Ur={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-all"}},[this._v("\n  呼叫中心\n")])},staticRenderFns:[]};var Pr={name:"bd-callcenter",components:{BdAll:n("VU/8")({name:"bd-all"},Ur,!1,function(t){n("nC55")},"data-v-6b8d61c6",null).exports},data:function(){return{activeName:"all"}},methods:{handleClick:function(t,e){}}},Dr={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-callcenter"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"呼叫中心",name:"all"}},[n("bd-all")],1)],1)],1)},staticRenderFns:[]};var Mr=n("VU/8")(Pr,Dr,!1,function(t){n("8X5D")},"data-v-719dd833",null).exports,Vr={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-all"}},[this._v("\n  客户管理\n")])},staticRenderFns:[]};var Gr={name:"bd-crm",components:{BdAll:n("VU/8")({name:"bd-all"},Vr,!1,function(t){n("POmt")},"data-v-5857174d",null).exports},data:function(){return{activeName:"all"}},methods:Ii()({},Object(c.b)(["changeCurrentMainView"]),{handleClick:function(t,e){}}),mounted:function(){this.changeCurrentMainView("crm")}},Lr={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-crm"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"客户管理",name:"all"}},[n("bd-all")],1)],1)],1)},staticRenderFns:[]};var Br=n("VU/8")(Gr,Lr,!1,function(t){n("v1BW")},"data-v-7838b24d",null).exports,zr={name:"bd-all",data:function(){return{pageSize:20,isEdit:!1,dialogVisible:!1,currentPage:1,filterText:"",defaultProps:{children:"children",label:"name"},form:{name:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},computed:Ii()({},Object(c.c)(["supportCategories","supportArticles"]),{dialogTitle:function(){return this.isEdit?"更新":"创建"}}),watch:{filterText:function(t){this.$refs.cateTree.filter(t)}},methods:Ii()({},Object(c.b)([]),{gotoHelpdoc:function(){window.open(u.HELP_BASE_URL+"201810060958081")},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},handleNodeClick:function(t){console.log(t)},handleNodeContextMenuClick:function(t,e,n){console.log(t,e,n)},handleCurrentChange:function(t){console.log(t),this.currentPage=t},addQuestionnaire:function(){Tt.$emit(u.EVENT_BUS_NEW_QUESTIONNAIRE,"")},doAddQuestionnaire:function(){},handleView:function(t,e){},handleEdit:function(t,e){Tt.$emit(u.EVENT_BUS_SUPPORT_EDIT_ARTICLE,e)},handleDelete:function(t,e){console.log(t,e),this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){})}}),created:function(){}},Fr={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-all"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"15px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left","margin-bottom":"15px"},attrs:{size:"mini",type:"success"},on:{click:t.addQuestionnaire}},[t._v("创建问卷")]),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.supportArticles.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","text-align":"left"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.supportArticles.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"内容"}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"创建时间",width:"150",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){t.handleView(e.$index,e.row)}}},[t._v("预览")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.supportArticles.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"创建问卷",visible:t.dialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"问卷名称",prop:"name"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.doAddQuestionnaire}},[t._v(t._s(t.dialogTitle))])],1)],1)],1)},staticRenderFns:[]};var $r={name:"bd-new-questionnaire",data:function(){return{form:{name:"",topics:[]},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},methods:{doAddQuestionnaire:function(){console.log("save questionnaire")},changeTopic:function(t){},removeTopic:function(t){var e=this.form.topics.indexOf(t);-1!==e&&this.form.topics.splice(e,1)},addTopic:function(){this.form.topics.push({value:"",key:Date.now()})}}},Wr={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-new-questionnaire"}},[n("el-form",{ref:"form",staticStyle:{width:"600px","margin-top":"50px"},attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"问卷名称",prop:"name"}},[n("el-input",{staticStyle:{width:"300px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),t._l(t.form.topics,function(e,i){return n("el-form-item",{key:e.key,attrs:{label:"题目"+i,prop:"topics."+i+".value",rules:{required:!0,message:"题目不能为空",trigger:"blur"}}},[n("el-input",{staticStyle:{width:"300px"},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"topic.value"}}),t._v(" "),n("el-button",{on:{click:function(n){n.preventDefault(),t.removeTopic(e)}}},[t._v("删除")])],1)}),t._v(" "),n("el-form-item",[n("el-dropdown",[n("el-button",{attrs:{type:"success"}},[t._v("\n          添加题目"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(e){t.changeTopic(1)}}},[t._v("单选")]),t._v(" "),n("el-dropdown-item",{nativeOn:{click:function(e){t.changeTopic(2)}}},[t._v("多选")]),t._v(" "),n("el-dropdown-item",{nativeOn:{click:function(e){t.changeTopic(3)}}},[t._v("单行文本")]),t._v(" "),n("el-dropdown-item",{nativeOn:{click:function(e){t.changeTopic(4)}}},[t._v("多行文本")])],1)],1),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.doAddQuestionnaire}},[t._v("保存")]),t._v(" "),n("el-button",[t._v("预览")])],1)],2)],1)},staticRenderFns:[]};var Hr={name:"bd-wenjuan",components:{BdAll:n("VU/8")(zr,Fr,!1,function(t){n("RNpa")},"data-v-21f22486",null).exports,BdNew:n("VU/8")($r,Wr,!1,function(t){n("BcgP")},"data-v-48c78b6e",null).exports},data:function(){return{activeName:"all",tabIndex:1,editableTabs:[]}},methods:{handleClick:function(t,e){},handleTabsEdit:function(t,e){if("remove"===e){var n=this.editableTabs,i="all";i===t&&n.forEach(function(e,o){if(e.name===t){var a=n[o+1]||n[o-1];a&&(i=a.name)}}),this.activeName="all",this.editableTabs=n.filter(function(e){return e.name!==t})}}},mounted:function(){var t=this;Tt.$on(u.EVENT_BUS_NEW_QUESTIONNAIRE,function(e){console.log("new questionnaire"),t.editableTabs.push({title:"创建问卷"+t.tabIndex,name:""+t.tabIndex}),t.activeName=""+t.tabIndex,t.tabIndex++})}},Yr={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-wenjuan"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick,edit:t.handleTabsEdit},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"调查问卷",name:"all"}},[n("bd-all")],1),t._v(" "),t._l(t.editableTabs,function(t){return n("el-tab-pane",{key:t.name,staticStyle:{height:"100%"},attrs:{closable:"",label:t.title,name:t.name}},[n("bd-new")],1)})],2)],1)},staticRenderFns:[]};var jr=n("VU/8")(Hr,Yr,!1,function(t){n("+CS4")},"data-v-790c9b69",null).exports,qr={name:"bd-internal-left",data:function(){return{type:"会话",search:""}},computed:Ii()({},Object(c.c)(["userThreads","userCurrentThread","agents","workGroups"]),{filterdThreads:function(){var t=this;return this.userThreads.filter(function(e){return e.visitor.nickname.includes(t.search)||e.content.includes(t.search)})},showThread:function(){return"会话"===this.type},showContacts:function(){return"同事"===this.type},showGroups:function(){return"群聊"===this.type}}),methods:Ii()({},Object(c.b)(["updateCurrentThread","getWorkGroups","getAgents"]),{selectThread:function(t){this.updateCurrentThread(t)},selectContact:function(){},selectWorkGroup:function(){},onTypeChange:function(t){console.log(t);var e={page:0,size:20};"同事"===t?this.getAgents(e):"群聊"===t&&this.getWorkGroups(e)}}),filters:{time:function(t){if("string"==typeof t){var e=new Date(t);return e.getMinutes()<10?e.getHours()+":0"+e.getMinutes():e.getHours()+":"+e.getMinutes()}return t}}},Qr={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-internal-left"}},[n("div",{staticStyle:{"margin-top":"10px"}},[n("el-radio-group",{attrs:{size:"mini"},on:{change:t.onTypeChange},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[n("el-radio-button",{attrs:{label:"会话"}}),t._v(" "),n("el-radio-button",{attrs:{label:"同事"}}),t._v(" "),n("el-radio-button",{attrs:{label:"群聊"}})],1)],1),t._v(" "),n("div",{staticClass:"thread-search"},[n("el-input",{attrs:{size:"mini",placeholder:"搜索","suffix-icon":"el-icon-search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),t._l(t.filterdThreads,function(e){return t.showThread?n("li",{key:e.id,staticClass:"list-item",class:{" active":e.id===t.userCurrentThread.id},on:{click:function(n){t.selectThread(e)}}},[n("div",{staticClass:"list-left"},[n("img",{staticClass:"avatar",attrs:{width:"30",height:"30",alt:e.visitor.nickname,src:e.visitor.avatar}})]),t._v(" "),n("div",{staticClass:"list-right"},[n("div",{staticClass:"top"},[n("span",{staticClass:"name"},[t._v(t._s(e.visitor.nickname))]),t._v(" "),n("span",{staticClass:"timestamp"},[t._v(t._s(t._f("time")(e.timestamp)))])]),t._v(" "),n("div",{staticClass:"bottom"},[n("span",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),0!==e.unreadCount?n("span",{staticClass:"unreadCount"},[t._v(t._s(e.unreadCount))]):t._e()])])]):t._e()}),t._v(" "),t._l(t.agents.content,function(e){return t.showContacts?n("li",{key:e.id,staticClass:"list-item"},[n("div",{staticClass:"list-left"},[n("img",{staticClass:"avatar",attrs:{width:"30",height:"30",alt:e.nickname,src:e.avatar}})]),t._v(" "),n("div",{staticClass:"list-right"},[n("div",{staticClass:"top"},[n("span",{staticClass:"name"},[t._v(t._s(e.nickname))])]),t._v(" "),n("div",{staticClass:"bottom"},[n("span",{staticClass:"content"},[t._v(t._s(e.description))])])])]):t._e()}),t._v(" "),t._l(t.workGroups.content,function(e){return t.showGroups?n("li",{key:e.id,staticClass:"list-item"},[n("div",{staticClass:"list-left"},[n("img",{staticClass:"avatar",attrs:{width:"30",height:"30",alt:e.nickname,src:e.avatar}})]),t._v(" "),n("div",{staticClass:"list-right"},[n("div",{staticClass:"top"},[n("span",{staticClass:"name"},[t._v(t._s(e.nickname))])]),t._v(" "),n("div",{staticClass:"bottom"},[n("span",{staticClass:"content"},[t._v(t._s(e.description))])])])]):t._e()})],2)},staticRenderFns:[]};var Kr=n("VU/8")(qr,Qr,!1,function(t){n("0W+d")},"data-v-c9a89b72",null).exports,Xr={name:"bd-top",data:function(){return{transferDialogVisible:!1,inviteDialogVisible:!1,invitedContactUserids:[]}},computed:Ii()({},Object(c.c)(["accessToken","userCurrentThread","userInfo"]),{disabled:function(){return 0===this.userCurrentThread.id}}),methods:Ii()({},Object(c.b)(["inviteRate","closeThread"]),{showTransferChat:function(){this.transferDialogVisible=!0},isTransferButtonDisabled:function(t){return!1},doTransferChat:function(t,e){var n=this;bt(e.uid,this.userCurrentThread.tid,this.accessToken,function(t){console.log(t),200===t.status_code?(n.$message({message:"转接会话成功",type:"success"}),n.transferDialogVisible=!1):n.$message.error(t.message)},function(t){console.log(t),n.$message.error("转接会话错误")})},showInviteChat:function(){this.inviteDialogVisible=!0},doInviteChat:function(){var t=this,e=this.userCurrentThread.tid;St(this.invitedContactUserids,e,this.accessToken,function(e){console.log(e),200===e.status_code?(t.$message({message:"邀请会话成功",type:"success"}),t.inviteDialogVisible=!1):t.$message.error(e.message)},function(e){console.log(e),t.$message.error("转接会话错误")})},showInviteRate:function(){this.inviteRate(this.userCurrentThread.tid)},showCloseChat:function(){var t=this;this.$confirm("确定要关闭会话?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.closeThread(t.userCurrentThread.tid)}).catch(function(){})},addWorkorder:function(){console.log("addWorkorder")},handleClose:function(t){t()}})},Jr={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-top"}},[n("img",{staticClass:"avatar",attrs:{width:"35",height:"35",alt:t.userCurrentThread.visitor.nickname,src:t.userCurrentThread.visitor.avatar}}),t._v(" "),n("p",{staticClass:"name"},[t._v(t._s(t.userCurrentThread.visitor.nickname))]),t._v(" "),n("span",{staticClass:"wrapper"},[n("el-button",{attrs:{type:"primary",size:"mini",disabled:t.disabled},on:{click:function(e){t.showInviteRate()}}},[t._v("查看公告")])],1)])},staticRenderFns:[]};var Zr=n("VU/8")(Xr,Jr,!1,function(t){n("DxrB")},"data-v-46653df8",null).exports,ts={name:"bd-message",data:function(){return{imageDialogVisible:!1,currentImageUrl:"",currentVoiceUrl:"",dialogTableVisible:!1,emojiBaseUrl:u.EMOJI_BASE_URL}},computed:Ii()({},Object(c.c)(["userInfo","userCurrentThread","messages"]),Object(c.d)(["emotionMap"]),{show_header:function(){return!0}}),methods:Ii()({},Object(c.b)(["getMessages"]),{imageClicked:function(t){this.currentImageUrl=t,this.imageDialogVisible=!0},voiceClicked:function(t){this.currentVoiceUrl=t,this.dialogTableVisible=!0},is_self:function(t){return!t.user.visitor},is_sending:function(t){return t.status===u.MESSAGE_STATUS_SENDING},is_stored:function(t){return t.status===u.MESSAGE_STATUS_STORED},is_received:function(t){return t.status===u.MESSAGE_STATUS_RECEIVED},is_error:function(t){return t.status===u.MESSAGE_STATUS_ERROR},is_read:function(t){return t.status===u.MESSAGE_STATUS_READ},is_type_text:function(t){return t.type===u.MESSAGE_TYPE_TEXT},is_type_robot:function(t){return t.type===u.MESSAGE_TYPE_ROBOT},is_type_image:function(t){return t.type===u.MESSAGE_TYPE_IMAGE},is_type_voice:function(t){return t.type===u.MESSAGE_TYPE_VOICE},is_type_video:function(t){return t.type===u.MESSAGE_TYPE_VIDEO},is_type_shortvideo:function(t){return t.type===u.MESSAGE_TYPE_SHORTVIDEO},is_type_location:function(t){return t.type===u.MESSAGE_TYPE_LOCATION},is_type_link:function(t){return t.type===u.MESSAGE_TYPE_LINK},is_type_event:function(t){return t.type===u.MESSAGE_TYPE_EVENT},is_type_notification:function(t){return t.type.startsWith(u.MESSAGE_TYPE_NOTIFICATION)},player_url:function(){return u.VOICE_PLAYER_BASE_URL+this.currentVoiceUrl},replaceFace:function(t){var e=this.emotionMap,n=t.match(/\[[\u4E00-\u9FA5NoOK]+\]/g),i=t;if(n)for(var o=0;o<n.length;o++)i=i.replace(n[o],"<img height='25px' width='25px' style='margin-top:5px;' src='"+this.emojiBaseUrl+e[n[o]]+"'>");return i},handleImageDialogClose:function(t){t()},scrollToBottom:function(){var t=this;this.$nextTick(function(){var e=t.$refs.list;null!=e&&(e.scrollTop=e.scrollHeight)})}}),mounted:function(){var t=this;Tt.$on(u.EVENT_BUS_MESSAGE_SCROLL_TO_BOTTOM,function(){var e=t;e.$nextTick(function(){var t=e.$refs.list;null!=t&&(t.scrollTop=t.scrollHeight)})})},filters:{datetime:function(t){return"string"==typeof t?moment(t).format("YYYY-MM-DD HH:mm:ss"):t}}},es={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-message"}},[n("el-dialog",{attrs:{title:"查看大图",modal:!1,visible:t.imageDialogVisible,width:"30%","before-close":t.handleImageDialogClose},on:{"update:visible":function(e){t.imageDialogVisible=e}}},[n("span",[n("img",{staticStyle:{height:"100%",width:"100%"},attrs:{src:t.currentImageUrl,alt:"[查看大图]"}})]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.imageDialogVisible=!1}}},[t._v("确 定")])],1)]),t._v(" "),n("el-dialog",{attrs:{title:"语音播放器",modal:!1,width:"30%",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[n("iframe",{attrs:{src:t.player_url}})]),t._v(" "),t.userCurrentThread?n("ul",{ref:"list",staticClass:"bd-message-ul"},[0===t.userCurrentThread.id||t.userCurrentThread.last?t._e():n("div",{staticClass:"pullrefresh",on:{click:function(e){t.getMessages(20)}}},[t._v("更多聊天记录")]),t._v(" "),t._l(t.messages,function(e){return n("li",{key:e.mid},[n("p",{staticClass:"timestamp"},[n("span",[t._v(t._s(t._f("datetime")(e.createdAt)))]),n("br"),t._v(" "),t.is_type_notification(e)?n("span",[t._v(t._s(e.content))]):t._e()]),t._v(" "),t.is_type_notification(e)?t._e():n("div",{staticClass:"main",class:{self:t.is_self(e)}},[t.show_header?n("img",{staticClass:"avatar",attrs:{width:"30",height:"30",src:e.user.avatar}}):t._e(),t._v(" "),n("div",{staticClass:"name"},[t._v(t._s(e.user.name))]),t._v(" "),t.is_type_text(e)?n("div",{staticClass:"text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}}):t._e(),t._v(" "),t.is_type_robot(e)?n("div",{staticClass:"text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}}):t._e(),t._v(" "),t.is_type_image(e)?n("div",{staticClass:"text"},[n("img",{staticStyle:{"padding-top":"10px","padding-bottom":"10px",width:"100px",height:"100px"},attrs:{src:e.imageUrl,alt:"[图片]"},on:{click:function(n){t.imageClicked(e.imageUrl)}}})]):t._e(),t._v(" "),t.is_type_voice(e)?n("div",{staticClass:"text"},[n("img",{staticStyle:{"padding-top":"10px","padding-bottom":"10px",width:"25px",height:"40px"},attrs:{src:"/img/input/voice_received.png",alt:"[语音]"},on:{click:function(n){t.voiceClicked(e.voiceUrl)}}})]):t._e(),t._v(" "),t.is_type_video(e)?n("div",{staticClass:"text"},[t._v(t._s(e.videoOrShortUrl))]):t._e(),t._v(" "),t.is_type_shortvideo(e)?n("div",{staticClass:"text"},[t._v(t._s(e.videoOrShortThumbUrl))]):t._e(),t._v(" "),t.is_type_location(e)?n("div",{staticClass:"text"},[t._v(t._s(e.label))]):t._e(),t._v(" "),t.is_type_link(e)?n("div",{staticClass:"text"},[t._v(t._s(e.title))]):t._e(),t._v(" "),t.is_type_event(e)?n("div",{staticClass:"text"},[t._v(t._s(e.content))]):t._e(),t._v(" "),t.is_self(e)?n("div",{staticClass:"status"},[t.is_sending(e)?n("i",{staticClass:"fa fa-spinner fa-spin",staticStyle:{"font-size":"12px"}}):t._e(),t._v(" "),t.is_error(e)?n("i",{staticClass:"fa fa-times-circle",staticStyle:{"font-size":"12px"}}):t._e()]):t._e()])])})],2):t._e()],1)},staticRenderFns:[]};var ns=n("VU/8")(ts,es,!1,function(t){n("8YsT")},"data-v-41e39e70",null).exports,is={name:"bd-input",data:function(){return{show_emoji:!1,inputContent:"",upload_headers:{"X-CSRF-TOKEN":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json",Authorization:"Bearer "},upload_data:{file_name:"test.png",username:""},upload_name:"file",uploadImageServerUrl:u.UPLOAD_IMAGE_URL,uploadedImageList:[],recordDialogVisible:!1,messageDialogVisible:!1,searchMessage:""}},components:{BdMessage:io},computed:Ii()({},Object(c.c)(["userThreads","userCurrentThread"]),Object(c.d)(["emojis"]),{showEmoji:function(){return!this.disabled&&this.show_emoji},disabled:function(){return 0===this.userCurrentThread.id},sendButtonDisabled:function(){return this.disabled||0===this.inputContent.trim().length},prePageButtonDisabled:function(){return this.userCurrentThread.first},nextPageButtonDisabled:function(){return this.userCurrentThread.last}}),methods:Ii()({},Object(c.b)(["updateCurrentThread","sendTextMessage","sendImageMessage","getMessages"]),{switchEmoji:function(){this.disabled||(this.show_emoji=!this.show_emoji)},emotionUrl:function(t){return u.EMOJI_BASE_URL+t},emotionClicked:function(t){this.inputContent+=t,this.show_emoji=!1},handleRemove:function(t,e){console.log(t,e);for(var n=0;n<this.uploadedImageList.length;n++)this.uploadedImageList[n].url===t.url&&this.uploadedImageList.splice(n,1)},handlePreview:function(t){console.log(t)},handleExceed:function(t,e){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},beforeRemove:function(t,e){return this.$confirm("确定移除 "+t.name+"？")},handleImageUploadSuccess:function(t,e){if(console.log("upload image success result:",t," file:",e),200===t.status_code){var n=t.data;this.sendImageMessage(n)}else this.$message.error("上传图片错误，请稍后重试...")},beforeImageUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,n=t.size/1024/1024<2;e||this.$message.error("上传头像图片只能是 jpg 或 png 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!");var i=moment(new Date).format("YYYYMMDDHHmmss");return"image/jpeg"===t.type?this.upload_data.file_name=i+".jpg":"image/png"===t.type&&(this.upload_data.file_name=i+".png"),e&&n},publishNotification:function(){console.log("发公告")},showHistoryMessages:function(){this.messageDialogVisible=!0},onKeyUp:function(t){13===t.keyCode&&this.inputContent.length>0&&this.sendMessage()},sendMessage:function(){this.show_emoji=!1,this.inputContent.trim().length>0&&(this.sendTextMessage(this.inputContent),this.inputContent="")},handleSearch:function(){console.log("searchMessage:",this.searchMessage)},prePage:function(){},nextPage:function(){this.getMessages(20)}}),directives:{focus:{inserted:function(t){t.focus()}}},mounted:function(){var t=this;Tt.$on(u.EVENT_BUS_SELECT_CUW,function(e){t.disabled||(t.inputContent+=e)})}},os={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-input"}},[n("div",{attrs:{id:"bd-toolbar"}},[n("li",{staticClass:"iconfont icon-emoji",attrs:{id:"bd-emoji"},on:{click:t.switchEmoji}}),t._v(" "),n("transition",{attrs:{name:"showbox"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showEmoji,expression:"showEmoji"}],staticClass:"bd-emoji-box"},t._l(t.emojis,function(e){return n("li",{key:e.file},[n("img",{attrs:{src:t.emotionUrl(e.file),data:e.title},on:{click:function(n){t.emotionClicked(e.title)}}})])}))]),t._v(" "),n("el-upload",{staticClass:"bd-upload-image",attrs:{"on-preview":t.handlePreview,"on-remove":t.handleRemove,"before-remove":t.beforeRemove,"on-exceed":t.handleExceed,"file-list":t.uploadedImageList,data:t.upload_data,name:t.upload_name,action:t.uploadImageServerUrl,"show-file-list":!1,"on-success":t.handleImageUploadSuccess,"before-upload":t.beforeImageUpload,disabled:t.disabled}},[n("li",{staticClass:"iconfont icon-image"})]),t._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"17px","margin-top":"5px"},attrs:{size:"mini",type:"text",disabled:t.disabled},on:{click:t.publishNotification}},[t._v("发公告")]),t._v(" "),n("el-button",{staticStyle:{float:"right","margin-top":"3px","margin-right":"15px"},attrs:{size:"mini",type:"text",disabled:t.disabled},on:{click:t.showHistoryMessages}},[t._v("历史消息")])],1),t._v(" "),n("div",{attrs:{id:"bd-inputbox"}},[n("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onKeyUp(e):null}},model:{value:t.inputContent,callback:function(e){t.inputContent=e},expression:"inputContent"}}),t._v(" "),n("el-button",{staticClass:"sendbutton",attrs:{disabled:t.sendButtonDisabled},on:{click:t.sendMessage}},[t._v("发 送")])],1)])},staticRenderFns:[]};var as={name:"bd-internal-middle",components:{BdTop:Zr,BdMessage:ns,BdInput:n("VU/8")(is,os,!1,function(t){n("1Psd")},"data-v-4117c313",null).exports},data:function(){return{}}},rs={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"bd-internal-middle"}},[e("bd-top"),this._v(" "),e("bd-message"),this._v(" "),e("bd-input")],1)},staticRenderFns:[]};var ss={name:"bd-internal",components:{BdLeft:Kr,BdMiddle:n("VU/8")(as,rs,!1,function(t){n("ftov")},"data-v-d8a1976a",null).exports},methods:Ii()({},Object(c.b)(["changeCurrentMainView"])),mounted:function(){this.changeCurrentMainView("internal")}},ls={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"bd-internal"}},[e("el-row",[e("el-col",{attrs:{span:5,id:"left-col"}},[e("bd-left")],1),this._v(" "),e("el-col",{attrs:{span:19,id:"middle-col"}},[e("bd-middle")],1)],1)],1)},staticRenderFns:[]};var cs=n("VU/8")(ss,ls,!1,function(t){n("f9UJ")},"data-v-fa4e3ff6",null).exports,us={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-imcloud"}},[this._v("\n  云通讯\n")])},staticRenderFns:[]};var ds=n("VU/8")({name:"bd-imcloud"},us,!1,function(t){n("Zszx")},"data-v-61b9b53b",null).exports,ps={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-all"}},[this._v("\n  社区管理\n")])},staticRenderFns:[]};var ms={name:"bd-community-admin",components:{BdAll:n("VU/8")({name:"bd-all"},ps,!1,function(t){n("j1bk")},"data-v-d64d1e5e",null).exports},data:function(){return{activeName:"all"}},methods:{handleClick:function(t,e){}}},fs={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-community-admin"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"讨论社区",name:"all"}},[n("bd-all")],1)],1)],1)},staticRenderFns:[]};var _s=n("VU/8")(ms,fs,!1,function(t){n("JjVa")},"data-v-513f332e",null).exports,hs={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-everyone"}},[this._v("\n  人人客服，通过考核之后，人人可兼职为客服\n")])},staticRenderFns:[]};var gs=n("VU/8")({name:"bd-everyone"},hs,!1,function(t){n("N9Mm")},"data-v-ca899004",null).exports,vs={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-all"}},[this._v("\n  视频会议\n")])},staticRenderFns:[]};var Es={name:"bd-conference",components:{BdAll:n("VU/8")({name:"bd-all"},vs,!1,function(t){n("awD8")},"data-v-fff46ae8",null).exports},data:function(){return{activeName:"all"}},methods:{handleClick:function(t,e){}}},Ts={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-conference"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"视频会议",name:"all"}},[n("bd-all")],1)],1)],1)},staticRenderFns:[]};var bs=n("VU/8")(Es,Ts,!1,function(t){n("Y6ns")},"data-v-518ccf78",null).exports,Ss={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-knowledge"}},[this._v("\n  知识库管理系统\n")])},staticRenderFns:[]};var Cs=n("VU/8")({name:"bd-knowledge"},Ss,!1,function(t){n("4rAd")},"data-v-13b74112",null).exports,ys={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-msg-record"}},[this._v("\n  微信聊天记录、云词分析、导出通讯录, 好友性别、所在城市分析、批量加好友\n")])},staticRenderFns:[]};var Is=n("VU/8")({name:"bd-msg-record"},ys,!1,function(t){n("B+oi")},"data-v-09e49f76",null).exports,ws={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-qq-msg-record"}},[this._v("\n  QQ聊天记录\n")])},staticRenderFns:[]};var As=n("VU/8")({name:"bd-qq-msg-record"},ws,!1,function(t){n("aNIV")},"data-v-8ea7b736",null).exports,ks={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-sms-msg-record"}},[this._v("\n  短信记录\n")])},staticRenderFns:[]};var Rs=n("VU/8")({name:"bd-sms-msg-record"},ks,!1,function(t){n("raDe")},"data-v-ba5391da",null).exports,Ns={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-call-record"}},[this._v("\n  电话通话记录\n")])},staticRenderFns:[]};var Os=n("VU/8")({name:"bd-call-record"},Ns,!1,function(t){n("NgMn")},"data-v-e83cf952",null).exports,xs={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-ding-msg-record"}},[this._v("\n  钉钉聊天记录\n")])},staticRenderFns:[]};var Us={name:"bd-other",components:{BdWeChatRecord:Is,BdQQRecord:As,BdSmsRecord:Rs,BdDingRecord:n("VU/8")({name:"bd-ding-msg-record"},xs,!1,function(t){n("4U/p")},"data-v-0290ae32",null).exports,BdCallRecord:Os},data:function(){return{activeName:"wechat"}},methods:{handleClick:function(t,e){}}},Ps={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-other"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"微信聊天记录",name:"wechat"}},[n("bd-we-chat-record")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"QQ聊天记录",name:"qq"}},[n("bd-q-q-record")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"电话通话记录",name:"call"}},[n("bd-call-record")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"短信聊天记录",name:"sms"}},[n("bd-sms-record")],1)],1)],1)},staticRenderFns:[]};var Ds=n("VU/8")(Us,Ps,!1,function(t){n("GPBx")},"data-v-c89dae6e",null).exports,Ms={name:"bd-settings",computed:Ii()({},Object(c.c)(["showAuthority"])),methods:Ii()({},Object(c.b)(["changeCurrentMainView"])),mounted:function(){this.changeCurrentMainView("setting")}},Vs={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-settings"}},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:3,id:"left-col"}},[n("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{height:"100%"},attrs:{"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",router:!0}},[t.showAuthority.admin?n("el-menu-item",{attrs:{index:"/admin/setting/app"}},[n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("应用管理")])]):t._e(),t._v(" "),t.showAuthority.admin?n("el-menu-item",{attrs:{index:"/admin/setting/agent"}},[n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("客服管理")])]):t._e(),t._v(" "),t.showAuthority.admin?n("el-menu-item",{attrs:{index:"/admin/setting/cuw"}},[n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("常用语管理")])]):t._e(),t._v(" "),t.showAuthority.debug?n("el-menu-item",{attrs:{index:"/admin/setting/taboo"}},[n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("敏感词管理")])]):t._e(),t._v(" "),n("el-menu-item",{attrs:{index:"/admin/setting/profile"}},[n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("个人资料")])]),t._v(" "),t.showAuthority.debug?n("el-menu-item",{attrs:{index:"/admin/setting/pay"}},[n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("费用明细")])]):t._e(),t._v(" "),t.showAuthority.debug?n("el-menu-item",{attrs:{index:"/admin/setting/preference"}},[n("span",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("常用设置")])]):t._e()],1)],1),t._v(" "),n("el-col",{attrs:{span:21,id:"right-col"}},[n("transition",{attrs:{mode:"out-in","enter-active-class":"fadeIn","leave-active-class":"fadeOut",appear:""}},[n("router-view",{staticClass:"animated"})],1)],1)],1)],1)},staticRenderFns:[]};var Gs=n("VU/8")(Ms,Vs,!1,function(t){n("rf0v")},"data-v-f9ea1dd0",null).exports,Ls={name:"bd-profile-admin",data:function(){return{editProfileDialogVisible:!1,form:{username:"",password:"",name:"",avatar:"",mobile:"",email:"",description:"",welcomeTip:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],name:[{required:!0,message:"请输入昵称",trigger:"blur"}],avatar:[{required:!0,message:"上传头像",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],description:[{required:!0,message:"请输入简介",trigger:"blur"}]},upload_headers:{"X-CSRF-TOKEN":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json",Authorization:"Bearer "},upload_data:{file_name:"test.png",username:""},upload_name:"file",isIp:u.IS_IP,electron:u.IS_ELECTRON}},computed:Ii()({},Object(c.c)(["userInfo","mainHost"]),{adminUrl:function(){return this.isIp?u.LOGIN_URL:u.HTTP_PREFIX+this.userInfo.subDomain+"."+this.mainHost+"/admin#/login"},isSaveButtonDisabled:function(){return!1},uploadImageServerUrl:function(){return u.UPLOAD_IMAGE_URL},isSubDomainDiabled:function(){return!0}}),methods:Ii()({},Object(c.b)(["updateProfile"]),{username:function(t){return this.userInfo.agent?t.split("@")[0]:t},handleImageUploadSuccess:function(t,e){console.log("upload image success result:",t," file:",e),200===t.status_code?this.form.avatar=t.data:this.$message.error("上传图片错误，请稍后重试...")},beforeImageUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,n=t.size/1024/1024<2;e||this.$message.error("上传头像图片只能是 jpg 或 png 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!");var i=moment(new Date).format("YYYYMMDDHHmmss");return"image/jpeg"===t.type?this.upload_data.file_name=i+".jpg":"image/png"===t.type&&(this.upload_data.file_name=i+".png"),e&&n},doUpdateProfile:function(){console.log("updateProfile"),this.userInfo.agent&&(this.form.username=this.form.username+"@"+this.form.subDomain),this.updateProfile(this.form),this.editProfileDialogVisible=!1},editProfile:function(){this.form.subDomain=this.userInfo.subDomain,this.userInfo.agent?this.form.username=this.userInfo.username.split("@")[0]:this.form.username=this.userInfo.username,this.form.nickname=this.userInfo.nickname,this.form.avatar=this.userInfo.avatar,this.form.mobile=this.userInfo.mobile,this.form.email=this.userInfo.email,this.form.description=this.userInfo.description,this.form.welcomeTip=this.userInfo.welcomeTip,this.editProfileDialogVisible=!0}})},Bs={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-profile-admin"}},[n("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{rules:t.rules,model:t.form,"label-width":"120px"}},[t.electron?t._e():n("el-form-item",{attrs:{label:"管理后台网址:"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:t.adminUrl,callback:function(e){t.adminUrl=e},expression:"adminUrl"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"企业号",prop:"subDomain"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{disabled:t.isSubDomainDiabled},model:{value:t.userInfo.subDomain,callback:function(e){t.$set(t.userInfo,"subDomain",e)},expression:"userInfo.subDomain"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{disabled:!0},model:{value:t.userInfo.username,callback:function(e){t.$set(t.userInfo,"username",e)},expression:"userInfo.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{disabled:!0},model:{value:t.userInfo.nickname,callback:function(e){t.$set(t.userInfo,"nickname",e)},expression:"userInfo.nickname"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[n("img",{staticStyle:{float:"left","margin-right":"15px"},attrs:{src:t.userInfo.avatar,width:"40px",height:"40px"}}),t._v(" "),n("el-upload",{staticClass:"upload-demo",attrs:{data:t.upload_data,name:t.upload_name,action:t.uploadImageServerUrl,"on-success":t.handleImageUploadSuccess,"before-upload":t.beforeImageUpload}},[n("el-button",{attrs:{size:"small",type:"primary",disabled:!0}},[t._v("点击上传")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{disabled:!0},model:{value:t.userInfo.mobile,callback:function(e){t.$set(t.userInfo,"mobile",e)},expression:"userInfo.mobile"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{disabled:!0},model:{value:t.userInfo.email,callback:function(e){t.$set(t.userInfo,"email",e)},expression:"userInfo.email"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"个性签名",prop:"description"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:2,placeholder:"这个人很懒,什么也没有写",disabled:!0},model:{value:t.userInfo.description,callback:function(e){t.$set(t.userInfo,"description",e)},expression:"userInfo.description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"欢迎语",prop:"welcomeTip"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:2,placeholder:"这个人很懒,什么也没有写",disabled:!0},model:{value:t.userInfo.welcomeTip,callback:function(e){t.$set(t.userInfo,"welcomeTip",e)},expression:"userInfo.welcomeTip"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.editProfile}},[t._v("编辑")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"编辑个人资料",visible:t.editProfileDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.editProfileDialogVisible=e}}},[n("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{rules:t.rules,model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"企业号",prop:"subDomain"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{disabled:t.isSubDomainDiabled},model:{value:t.form.subDomain,callback:function(e){t.$set(t.form,"subDomain",e)},expression:"form.subDomain"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"新密码",prop:"password"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off",placeholder:"密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[n("img",{staticStyle:{float:"left","margin-right":"15px"},attrs:{src:t.form.avatar,width:"40px",height:"40px"}}),t._v(" "),n("el-upload",{staticClass:"upload-demo",attrs:{data:t.upload_data,name:t.upload_name,action:t.uploadImageServerUrl,"on-success":t.handleImageUploadSuccess,"before-upload":t.beforeImageUpload}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"个性签名",prop:"description"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:2,placeholder:"这个人很懒,什么也没有写"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"欢迎语",prop:"welcomeTip"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:2,placeholder:"这个人很懒,什么也没有写"},model:{value:t.form.welcomeTip,callback:function(e){t.$set(t.form,"welcomeTip",e)},expression:"form.welcomeTip"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.editProfileDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.doUpdateProfile}},[t._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var zs=n("VU/8")(Ls,Bs,!1,function(t){n("WBj9")},"data-v-7221dd2a",null).exports,Fs={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-detail-admin"}},[this._v("\n  公众号管理(自定义菜单)\n")])},staticRenderFns:[]};var $s=n("VU/8")({name:"bd-detail-admin",props:["type","object"]},Fs,!1,function(t){n("CIRa")},"data-v-0577daa0",null).exports,Ws={name:"bd-web-admin",data:function(){return{dialogVisible:!1,isEdit:!1,form:{aid:"",name:"",url:"",description:""},rules:{name:[{required:!0,message:"请输入网站名称",trigger:"blur"}],url:[{required:!0,message:"请输入网址",trigger:"blur"}],description:[{required:!0,message:"请输入网站简介",trigger:"blur"}]}}},computed:Ii()({},Object(c.c)(["webs"])),methods:Ii()({},Object(c.b)(["getWebs","createWeb","updateWeb","deleteWeb"]),{gotoHelpdoc:function(){window.open(u.HELP_BASE_URL+"201808252119041")},showAddDialog:function(){this.dialogVisible=!0,this.isEdit=!1,this.form.aid="",this.form.name="",this.form.url="",this.form.description=""},addApp:function(){this.dialogVisible=!1,this.isEdit?this.updateWeb(this.form):this.createWeb(this.form)},handleEdit:function(t,e){console.log(t,e),this.form.aid=e.aid,this.form.name=e.name,this.form.url=e.url,this.form.description=e.description,this.isEdit=!0,this.dialogVisible=!0},handleDelete:function(t,e){var n=this;this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteWeb(e.aid)}).catch(function(){})}}),created:function(){this.getWebs({page:0,size:20})}},Hs={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-web-admin"}},[n("el-row",[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"},on:{click:t.showAddDialog}},[t._v("添加网站")])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.webs.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"aid",label:"唯一ID"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"网站名"}}),t._v(" "),n("el-table-column",{attrs:{prop:"url",label:"网址"}}),t._v(" "),n("el-table-column",{attrs:{prop:"description",label:"描述"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),e.row.defaulted?t._e():n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"添加应用",visible:t.dialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"网站名称",prop:"name"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"网站网址",prop:"url"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"网址描述",prop:"description"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:10}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.addApp}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Ys=n("VU/8")(Ws,Hs,!1,function(t){n("wtb4")},"data-v-0bf64cde",null).exports,js={name:"bd-app-admin",data:function(){return{dialogVisible:!1,isEdit:!1,form:{aid:"",name:"",avatar:u.DEFAULT_IOS_AVATAR_URL,version:"",tip:"",url:"",status:"debug",platform:"both",description:""},rules:{name:[{required:!0,message:"请输入网站名称",trigger:"blur"}],description:[{required:!0,message:"请输入网站简介",trigger:"blur"}]},statuses:[{id:1,value:"debug",name:"测试中"},{id:2,value:"release",name:"已发布"},{id:3,value:"version",name:"新版本"}],platforms:[{id:1,value:"android",name:"安卓"},{id:2,value:"ios",name:"苹果"},{id:3,value:"both",name:"安卓+苹果"}],upload_headers:{"X-CSRF-TOKEN":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json",Authorization:"Bearer "},upload_data:{file_name:"test.png",username:""},upload_name:"file",uploadImageServerUrl:u.UPLOAD_IMAGE_URL}},computed:Ii()({},Object(c.c)(["apps"])),methods:Ii()({},Object(c.b)(["getApps","createApp","updateApp","deleteApp"]),{handleImageUploadSuccess:function(t,e){200===t.status_code?this.form.avatar=t.data:this.$message.error("上传图片错误，请稍后重试...")},beforeImageUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,n=t.size/1024/1024<2;e||this.$message.error("上传头像图片只能是 jpg 或 png 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!");var i=moment(new Date).format("YYYYMMDDHHmmss");return"image/jpeg"===t.type?this.upload_data.file_name=i+".jpg":"image/png"===t.type&&(this.upload_data.file_name=i+".png"),e&&n},gotoHelpdoc:function(){window.open(u.HELP_BASE_URL+"201808252118181")},formatStatus:function(t){return"debug"===t?"测试中":"release"===t?"已发布":"新版本"},formatPlatform:function(t){return"both"===t?"安卓+苹果":"android"===t?"安卓":"苹果"},showAddDialog:function(){this.dialogVisible=!0,this.isEdit=!1,this.form.aid="",this.form.name="",this.form.avatar=u.DEFAULT_IOS_AVATAR_URL,this.form.version="",this.form.tip="",this.form.url="",this.form.status="debug",this.form.platform="both",this.form.description=""},addApp:function(){this.dialogVisible=!1,this.isEdit?this.updateApp(this.form):this.createApp(this.form)},handleEdit:function(t,e){console.log(t,e),this.form.aid=e.aid,this.form.name=e.name,this.form.avatar=e.avatar,this.form.version=e.version,this.form.tip=e.tip,this.form.url=e.url,this.form.status=e.status,this.form.platform=e.platform,this.form.description=e.description,this.isEdit=!0,this.dialogVisible=!0},handleDelete:function(t,e){var n=this;this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteApp(e.aid)}).catch(function(){})}})},qs={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-app-admin"}},[n("el-row",[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"},on:{click:t.showAddDialog}},[t._v("添加应用")])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.apps.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"aid",label:"唯一ID(aid)"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"应用名"}}),t._v(" "),n("el-table-column",{attrs:{prop:"key",label:"AppKey"}}),t._v(" "),n("el-table-column",{attrs:{prop:"version",label:"版本号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"tip",label:"升级内容"}}),t._v(" "),n("el-table-column",{attrs:{prop:"url",label:"下载网址"}}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.formatStatus(e.row.status)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"platform",label:"平台"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.formatPlatform(e.row.platform)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"description",label:"描述"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),e.row.defaulted?t._e():n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"添加应用",visible:t.dialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"应用名称",prop:"name"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[n("img",{staticStyle:{float:"left","margin-right":"10px"},attrs:{src:t.form.avatar,width:"40px",height:"40px"}}),t._v(" "),n("el-upload",{staticClass:"upload-demo",attrs:{data:t.upload_data,name:t.upload_name,action:t.uploadImageServerUrl,"on-success":t.handleImageUploadSuccess,"before-upload":t.beforeImageUpload}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"状态",prop:"status"}},t._l(t.statuses,function(e){return n("el-radio",{key:e.id,attrs:{label:e.value},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[t._v(t._s(e.name))])})),t._v(" "),n("el-form-item",{attrs:{label:"平台",prop:"platform"}},t._l(t.platforms,function(e){return n("el-radio",{key:e.id,attrs:{label:e.value},model:{value:t.form.platform,callback:function(e){t.$set(t.form,"platform",e)},expression:"form.platform"}},[t._v(t._s(e.name))])})),t._v(" "),n("el-form-item",{attrs:{label:"版本号",prop:"version"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.version,callback:function(e){t.$set(t.form,"version",e)},expression:"form.version"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"升级内容",prop:"tip"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.tip,callback:function(e){t.$set(t.form,"tip",e)},expression:"form.tip"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"下载网址",prop:"url"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"应用描述",prop:"description"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:10}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.addApp}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Qs=n("VU/8")(js,qs,!1,function(t){n("nKFQ")},"data-v-4a0ec12a",null).exports,Ks={name:"bd-mp-admin",data:function(){return{dialogVisible:!1,isEdit:!1,form:{wid:"",nickname:"",number:"",description:"",company:"",original_id:"",app_id:"",app_secret:"",aes_key:"OadnyZnUEPiscOA4DsjCSCW4TY4uJQ3zj3aSB2XKDVg",encode_type:"3"},rules:{nickname:[{required:!0,message:"请输入名称",trigger:"blur"}],number:[{required:!0,message:"请输入微信号",trigger:"blur"}],description:[{required:!0,message:"请输入简介",trigger:"blur"}],company:[{required:!0,message:"请输入公司名称",trigger:"blur"}],original_id:[{required:!0,message:"请输入原始ID",trigger:"blur"}],app_id:[{required:!0,message:"请输入AppId",trigger:"blur"}],app_secret:[{required:!0,message:"请输入AppSecret",trigger:"blur"}],aes_key:[{required:!0,message:"请输入AesKey",trigger:"blur"}]},encodeTypes:[{id:1,value:"1",name:"明文模式"},{id:2,value:"2",name:"兼容模式"},{id:3,value:"3",name:"安全模式"}],upload_headers:{"X-CSRF-TOKEN":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json",Authorization:"Bearer "},upload_data:{file_name:"test.png",username:""},upload_name:"file",uploadImageServerUrl:u.UPLOAD_IMAGE_URL}},computed:Ii()({},Object(c.c)(["mps","userInfo","accessToken"]),{mainHost:function(){return document.domain.split(".").slice(-2).join(".")+("8081"===location.port?":8000":"")}}),methods:Ii()({},Object(c.b)(["getMps","createMp","updateMp","deleteMp"]),{gotoHelpdoc:function(){window.open(u.HELP_BASE_URL+"201808252119251")},handleImageUploadSuccess:function(t,e){200===t.status_code?this.form.avatar=t.data:this.$message.error("上传图片错误，请稍后重试...")},beforeImageUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,n=t.size/1024/1024<2;e||this.$message.error("上传头像图片只能是 jpg 或 png 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!");var i=moment(new Date).format("YYYYMMDDHHmmss");return"image/jpeg"===t.type?this.upload_data.file_name=i+".jpg":"image/png"===t.type&&(this.upload_data.file_name=i+".png"),e&&n},gotoOAuth:function(){var t=u.HTTP_PREFIX+"wechat."+this.mainHost+"/redirect/"+this.userInfo.uid;window.location.href=t},showAddDialog:function(){this.dialogVisible=!0,this.isEdit=!1,this.form.wid="",this.form.nickname="",this.form.number="",this.form.description="",this.form.company="",this.form.original_id="",this.form.app_id="",this.form.app_secret=""},addMp:function(){this.dialogVisible=!1,this.isEdit?this.updateMp(this.form):this.createMp(this.form)},handleAdmin:function(t,e){Tt.$emit(u.EVENT_BUS_MP_ADMIN,e)},handleEdit:function(t,e){this.form.wid=e.wid,this.form.nickname=e.nickname,this.form.number=e.wxNumber,this.form.description=e.description,this.form.company=e.company,this.form.original_id=e.userName,this.form.app_id=e.appId,this.form.app_secret=e.appSecret,this.form.aes_key=e.aesKey,this.form.encode_type="3",this.isEdit=!0,this.dialogVisible=!0},handleDelete:function(t,e){var n=this;this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteMp(e.wid)}).catch(function(){})},getApi:function(){}})},Xs={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-mp-admin"}},[n("el-row",[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary",disabled:""},on:{click:t.gotoOAuth}},[t._v("方法一：授权绑定(未开放)")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"},on:{click:t.showAddDialog}},[t._v("方法二：配置服务器")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary",disabled:""},on:{click:t.getApi}},[t._v("方法三：消息接口(未开放)")])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.mps.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"nickname",label:"公众号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"url",label:"服务器地址(URL)"}}),t._v(" "),n("el-table-column",{attrs:{prop:"token",label:"令牌(Token)"}}),t._v(" "),n("el-table-column",{attrs:{prop:"userName",label:"原始Id"}}),t._v(" "),n("el-table-column",{attrs:{prop:"appId",label:"AppId"}}),t._v(" "),n("el-table-column",{attrs:{prop:"workGroup",label:"工作组"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v(t._s(e.row.workGroup.nickname))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"updatedAt",label:"更新时间"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleAdmin(e.$index,e.row)}}},[t._v("管理")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),e.row.defaulted?t._e():n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"添加公众号",visible:t.dialogVisible,width:"40%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("p",[t._v("公众号后台左侧->设置->公众号设置->账号详情")]),t._v(" "),n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"名称",prop:"nickname"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"微信号",prop:"number"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.number,callback:function(e){t.$set(t.form,"number",e)},expression:"form.number"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"描述",prop:"description"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:10}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"主体信息",prop:"company"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.company,callback:function(e){t.$set(t.form,"company",e)},expression:"form.company"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"原始Id",prop:"original_id"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.original_id,callback:function(e){t.$set(t.form,"original_id",e)},expression:"form.original_id"}})],1),t._v(" "),n("p",[t._v("公众号后台左侧->开发->基本配置")]),t._v(" "),n("el-form-item",{attrs:{label:"AppId",prop:"app_id"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.app_id,callback:function(e){t.$set(t.form,"app_id",e)},expression:"form.app_id"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"AppSecret",prop:"app_secret"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.app_secret,callback:function(e){t.$set(t.form,"app_secret",e)},expression:"form.app_secret"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"消息加解密密钥(EncodingAESKey)",prop:"aes_key"}},[n("el-input",{staticStyle:{width:"400px"},model:{value:t.form.aes_key,callback:function(e){t.$set(t.form,"aes_key",e)},expression:"form.aes_key"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"消息加解密方式",prop:"encode_type"}},t._l(t.encodeTypes,function(e){return n("el-radio",{key:e.id,attrs:{label:e.value,disabled:""},model:{value:t.form.encode_type,callback:function(e){t.$set(t.form,"encode_type",e)},expression:"form.encode_type"}},[t._v(t._s(e.name))])}))],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.addMp}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Js=n("VU/8")(Ks,Xs,!1,function(t){n("LtOi")},"data-v-119287fe",null).exports,Zs={name:"bd-mini-admin",data:function(){return{dialogVisible:!1,isEdit:!1,form:{wid:"",nickname:"",description:"",company:"",original_id:"",app_id:"",app_secret:"",aes_key:"YLOfuQ2DfNTx58PqdJoO4cceZOeT8Dv1NYBoZ1ftSjJ",encode_type:"3",data_type:"2"},rules:{nickname:[{required:!0,message:"请输入名称",trigger:"blur"}],description:[{required:!0,message:"请输入简介",trigger:"blur"}],company:[{required:!0,message:"请输入公司名称",trigger:"blur"}],original_id:[{required:!0,message:"请输入原始ID",trigger:"blur"}],app_id:[{required:!0,message:"请输入AppId",trigger:"blur"}],app_secret:[{required:!0,message:"请输入AppSecret",trigger:"blur"}],aes_key:[{required:!0,message:"请输入AesKey",trigger:"blur"}]},encodeTypes:[{id:1,value:"1",name:"明文模式"},{id:2,value:"2",name:"兼容模式"},{id:3,value:"3",name:"安全模式"}],dataTypes:[{id:1,value:"1",name:"JSON"},{id:2,value:"2",name:"XML"}],upload_headers:{"X-CSRF-TOKEN":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json",Authorization:"Bearer "},upload_data:{file_name:"test.png",username:""},upload_name:"file",uploadImageServerUrl:u.UPLOAD_IMAGE_URL}},computed:Ii()({},Object(c.c)(["minis","userInfo","accessToken"])),methods:Ii()({},Object(c.b)(["getMinis","createMini","updateMini","deleteMini"]),{gotoHelpdoc:function(){window.open(u.HELP_BASE_URL+"201808252119421")},handleImageUploadSuccess:function(t,e){200===t.status_code?this.form.avatar=t.data:this.$message.error("上传图片错误，请稍后重试...")},beforeImageUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,n=t.size/1024/1024<2;e||this.$message.error("上传头像图片只能是 jpg 或 png 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!");var i=moment(new Date).format("YYYYMMDDHHmmss");return"image/jpeg"===t.type?this.upload_data.file_name=i+".jpg":"image/png"===t.type&&(this.upload_data.file_name=i+".png"),e&&n},gotoOAuth:function(){var t=u.WECHAT_OPEN_PLATFORM_REDIRECT_URI+this.userInfo.uid;window.open(t)},showAddDialog:function(){this.dialogVisible=!0,this.isEdit=!1,this.form.wid="",this.form.nickname="",this.form.description="",this.form.company="",this.form.original_id="",this.form.app_id="",this.form.app_secret=""},addMini:function(){this.dialogVisible=!1,this.isEdit?this.updateMini(this.form):this.createMini(this.form)},handleEdit:function(t,e){this.form.wid=e.wid,this.form.nickname=e.nickname,this.form.description=e.description,this.form.company=e.company,this.form.original_id=e.userName,this.form.app_id=e.appId,this.form.app_secret=e.appSecret,this.form.aes_key=e.aesKey,this.form.encode_type="3",this.form.data_type="2",this.isEdit=!0,this.dialogVisible=!0},handleDelete:function(t,e){var n=this;this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteMini(e.wid)}).catch(function(){})},getApi:function(){}})},tl={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-mini-admin"}},[n("el-row",[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary",disabled:""},on:{click:t.gotoOAuth}},[t._v("方法一：授权绑定(待上线)")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"},on:{click:t.showAddDialog}},[t._v("方法二：配置服务器")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary",disabled:""},on:{click:t.getApi}},[t._v("方法三：消息接口(待上线)")])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.minis.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"nickname",label:"小程序"}}),t._v(" "),n("el-table-column",{attrs:{prop:"url",label:"服务器地址(URL)"}}),t._v(" "),n("el-table-column",{attrs:{prop:"token",label:"令牌(Token)"}}),t._v(" "),n("el-table-column",{attrs:{prop:"userName",label:"原始Id"}}),t._v(" "),n("el-table-column",{attrs:{prop:"appId",label:"AppId"}}),t._v(" "),n("el-table-column",{attrs:{prop:"workGroup",label:"工作组"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v(t._s(e.row.workGroup.nickname))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"updatedAt",label:"更新时间"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),e.row.defaulted?t._e():n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"添加公众号",visible:t.dialogVisible,width:"38%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("p",[t._v("小程序后台->设置->基本设置")]),t._v(" "),n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"名称",prop:"nickname"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"介绍",prop:"description"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:10}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"主体信息",prop:"company"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.company,callback:function(e){t.$set(t.form,"company",e)},expression:"form.company"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"原始Id",prop:"original_id"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.original_id,callback:function(e){t.$set(t.form,"original_id",e)},expression:"form.original_id"}})],1),t._v(" "),n("p",[t._v("小程序后台->设置->开发设置")]),t._v(" "),n("el-form-item",{attrs:{label:"AppId",prop:"app_id"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.app_id,callback:function(e){t.$set(t.form,"app_id",e)},expression:"form.app_id"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"AppSecret",prop:"app_secret"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.app_secret,callback:function(e){t.$set(t.form,"app_secret",e)},expression:"form.app_secret"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"EncodingAESKey",prop:"aes_key"}},[n("el-input",{staticStyle:{width:"400px"},model:{value:t.form.aes_key,callback:function(e){t.$set(t.form,"aes_key",e)},expression:"form.aes_key"}})],1),t._v(" "),n("p",[t._v("请在小程序后台设置为'安全模式'")]),t._v(" "),n("el-form-item",{attrs:{label:"消息加解密方式",prop:"encode_type"}},t._l(t.encodeTypes,function(e){return n("el-radio",{key:e.id,attrs:{label:e.value,disabled:""},model:{value:t.form.encode_type,callback:function(e){t.$set(t.form,"encode_type",e)},expression:"form.encode_type"}},[t._v(t._s(e.name))])})),t._v(" "),n("p",[t._v("请在小程序后台设置数据格式为'XML'")]),t._v(" "),n("el-form-item",{attrs:{label:"数据格式",prop:"encode_type"}},t._l(t.dataTypes,function(e){return n("el-radio",{key:e.id,attrs:{label:e.value,disabled:""},model:{value:t.form.data_type,callback:function(e){t.$set(t.form,"data_type",e)},expression:"form.data_type"}},[t._v(t._s(e.name))])}))],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.addMini}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var el={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-weibo"}},[this._v("\n  对接微博\n")])},staticRenderFns:[]};var nl={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-taobao-admin"}},[this._v("\n  对接淘宝\n")])},staticRenderFns:[]};var il={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-jd-admin"}},[this._v("\n  对接京东\n")])},staticRenderFns:[]};var ol={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-suning-admin"}},[this._v("\n  对接苏宁\n")])},staticRenderFns:[]};var al={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-cp-admin"}},[this._v("\n  企业微信/企业号\n")])},staticRenderFns:[]};var rl={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-ding-admin"}},[this._v("\n  对接钉钉\n")])},staticRenderFns:[]};var sl={name:"bd-app-admin",components:{BdWeb:Ys,BdApp:Qs,BdMp:Js,BdAdmin:$s,BdMini:n("VU/8")(Zs,tl,!1,function(t){n("Jdc4")},"data-v-10981ab9",null).exports,BdWeibo:n("VU/8")({name:"bd-weibo"},el,!1,function(t){n("r+q8")},"data-v-3fd9cb4b",null).exports,BdTaobao:n("VU/8")({name:"bd-taobao-admin"},nl,!1,function(t){n("LaxM")},"data-v-7089bf3b",null).exports,BdJd:n("VU/8")({name:"bd-jd-admin"},il,!1,function(t){n("uJpJ")},"data-v-2078e502",null).exports,BdSuning:n("VU/8")({name:"bd-suning-admin"},ol,!1,function(t){n("AHVL")},"data-v-5b51fa10",null).exports,BdCp:n("VU/8")({name:"bd-cp-admin"},al,!1,function(t){n("Dzck")},"data-v-51bd02f0",null).exports,BdDing:n("VU/8")({name:"bd-ding-admin"},rl,!1,function(t){n("wAVE")},"data-v-f4ee3a34",null).exports},data:function(){return{activeName:"web",tabIndex:1,editableTabs:[],daxuezhang:u.IS_DAXUEZHANG}},computed:Ii()({},Object(c.c)(["showAuthority"])),methods:Ii()({},Object(c.b)(["getWebs","getApps","getMps","getMinis"]),{handleClick:function(t,e){var n={page:0,size:20};"web"===t.name?this.getWebs(n):"app"===t.name?this.getApps(n):"mp"===t.name?this.getMps(n):"mini"===t.name&&this.getMinis(n)},handleTabsEdit:function(t,e){if("remove"===e){var n=this.editableTabs,i="mp";i===t&&n.forEach(function(e,o){if(e.name===t){var a=n[o+1]||n[o-1];a&&(i=a.name)}}),this.activeName="mp",this.editableTabs=n.filter(function(e){return e.name!==t})}}}),mounted:function(){var t=this;Tt.$on(u.EVENT_BUS_MP_ADMIN,function(e){t.editableTabs.push({title:"公众号"+e.nickname+"管理",name:""+t.tabIndex,type:"mp",object:e}),t.activeName=""+t.tabIndex,t.tabIndex++})}},ll={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-app-admin"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick,edit:t.handleTabsEdit},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"网站",name:"web"}},[n("bd-web")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"App",name:"app"}},[n("bd-app")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"公众号",name:"mp"}},[n("bd-mp")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"小程序",name:"mini"}},[n("bd-mini")],1),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"淘宝",name:"taobao"}},[n("bd-taobao")],1):t._e(),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"京东",name:"jd"}},[n("bd-jd")],1):t._e(),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"苏宁",name:"suning"}},[n("bd-suning")],1):t._e(),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"微博",name:"weibo"}},[n("bd-weibo")],1):t._e(),t._v(" "),t._l(t.editableTabs,function(t){return n("el-tab-pane",{key:t.name,staticStyle:{height:"100%"},attrs:{closable:"",label:t.title,name:t.name}},[n("bd-admin",{attrs:{type:t.type,object:t.object}})],1)})],2)],1)},staticRenderFns:[]};var cl=n("VU/8")(sl,ll,!1,function(t){n("hKkn")},"data-v-c660328c",null).exports,ul={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-pay-admin"}},[this._v("\n  费用\n")])},staticRenderFns:[]};var dl=n("VU/8")({name:"bd-pay-admin"},ul,!1,function(t){n("taYw")},"data-v-42d710ae",null).exports,pl={name:"bd-agent-admin",data:function(){return{realName:"",searchWorkGroupVisible:!1,searchWorkGroup:"",loading:!1,pageSize:20,currentPage:1,isEdit:!1,dialogVisible:!1,allWorkGroups:[],form:{id:0,username:"",password:"",email:"",avatar:u.DEFAULT_AVATAR,realName:"",nickname:"",maxThreadCount:10,workGroups:[],role:"",robot:!1,enabled:!0},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,message:"长度最少5个字符",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"change"}],realName:[{required:!0,message:"请输入密码",trigger:"blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],workGroups:[{type:"array",required:!0,message:"请至少选择一个工作组",trigger:"change"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]},upload_headers:{"X-CSRF-TOKEN":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json",Authorization:"Bearer "},upload_data:{file_name:"test.png",username:""},upload_name:"file",uploadImageServerUrl:u.UPLOAD_IMAGE_URL,isIp:u.IS_IP}},computed:Ii()({},Object(c.c)(["userInfo","accessToken","agents","workGroups","roles","showAuthority"]),{dialogTitle:function(){return this.isEdit?"更新":"创建"},mainHost:function(){return document.domain.split(".").slice(-2).join(".")+("8081"===location.port?":8000":"")}}),methods:Ii()({},Object(c.b)(["createAgent","updateAgent","deleteAgent","getAgents","filterAgents","getAllWorkGroups"]),{username:function(t,e){return this.isSelf(t.username)?e:t.robot?"机器人":t.super?e:t.agent||t.workGroupAdmin?e.split("@")[0]:e},roleRadioDisabled:function(t){return this.form.robot||t===u.ROLE_ROBOT},isSelf:function(t){return t===this.userInfo.username},showDeleteButton:function(t){return t.username!==this.userInfo.username&&!t.robot},gotoHelpdoc:function(){window.open(u.HELP_BASE_URL+"201809171923191")},handleImageUploadSuccess:function(t,e){200===t.status_code?this.form.avatar=t.data:this.$message.error("上传图片错误，请稍后重试...")},beforeImageUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,n=t.size/1024/1024<2;e||this.$message.error("上传头像图片只能是 jpg 或 png 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!");var i=moment(new Date).format("YYYYMMDDHHmmss");return"image/jpeg"===t.type?this.upload_data.file_name=i+".jpg":"image/png"===t.type&&(this.upload_data.file_name=i+".png"),e&&n},querySearchWorkGroupAsync:function(t,e){console.log(t);var n=this.allWorkGroups,i=t?n.filter(this.createStateFilter(t)):n;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e(i)},3e3*Math.random())},createStateFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelectWorkGroup:function(t){console.log(t),this.form.workGroups.some(function(e){return e.id===t.object.id})||this.form.workGroups.push(t.object),this.searchWorkGroupVisible=!1,this.searchWorkGroup=""},showSearchWorkGroup:function(){var t=this;this.searchWorkGroupVisible=!0,this.$nextTick(function(e){t.$refs.saveWorkGroupInput.$refs.input.focus()})},handleRemoveTag:function(t){console.log(t),this.form.workGroups.splice(this.form.workGroups.indexOf(t),1)},handleMaxThreadCountChange:function(t){},handleSizeChange:function(t){this.pageSize=t,this.loading=!0;var e={page:this.currentPage-1,size:this.pageSize};this.getAgents(e)},handleCurrentChange:function(t){this.currentPage=t,this.loading=!0;var e={page:this.currentPage-1,size:this.pageSize};this.getAgents(e)},addAgentDialog:function(){this.isEdit=!1,this.form.id="",this.form.username="",this.form.password="",this.form.email="",this.form.avatar=u.DEFAULT_AVATAR,this.form.realName="",this.form.nickname="",this.form.maxThreadCount=10,this.form.workGroups=[],this.form.role="",this.form.robot=!1,this.form.enabled=!0,this.dialogVisible=!0},transformWorkGroups:function(){var t=this.form.workGroups;this.form.workGroups=[];for(var e=0;e<t.length;e++){var n=t[e];this.form.workGroups.push(n.wid)}},addAgent:function(){var t=this;this.transformWorkGroups(),this.$refs.form.validate(function(e){if(!e)return!1;t.dialogVisible=!1,t.isEdit?t.updateAgent(t.form):t.createAgent(t.form)})},handleQueryChange:function(t){if(0===t.trim().length){this.loading=!0;this.getAgents({page:0,size:20})}},handleQuery:function(){if(""===this.realName){this.getAgents({page:0,size:20})}else{var t={page:0,size:20,realName:this.realName};this.filterAgents(t)}},handleView:function(t,e){this.isIp?window.open(u.CHAT_BASE_URL+"?uid="+this.userInfo.uid+"&wid=&type=appointed&aid="+e.uid+"&ph=ph"):window.open(u.HTTP_PREFIX+this.userInfo.subDomain+"."+this.mainHost+"/chat?uid="+this.userInfo.uid+"&wid=&type=appointed&aid="+e.uid+"&ph=ph")},handleCode:function(t,e){Tt.$emit(u.EVENT_BUS_AGENT_CODE,e)},handleEdit:function(t,e){this.isEdit=!0,this.form.id=e.id,e.username!==this.userInfo.username?this.form.username=e.username.split("@")[0]:this.form.username=e.username,this.form.password="",this.form.email=e.email,this.form.avatar=e.avatar,this.form.realName=e.realName,this.form.nickname=e.nickname,this.form.maxThreadCount=e.maxThreadCount,this.form.email=e.email,this.form.mobile=e.mobile,this.form.robot=e.robot,this.form.enabled=e.enabled,this.dialogVisible=!0},handleDelete:function(t,e){var n=this;console.log(t,e),this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteAgent(e.id)}).catch(function(){})}}),mounted:function(){var t=this;yt(this.accessToken,function(e){console.log(e);for(var n=0;n<e.data.length;n++){var i=e.data[n];t.allWorkGroups.push({value:i.nickname,object:i})}},function(t){console.log(t)}),Tt.$on(u.EVENT_BUS_AGENT_LOAD_FINISHED,function(e){t.loading=!1})}},ml={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-agent-admin"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.addAgentDialog()}}},[t._v("添加客服账号")]),t._v(" "),n("el-input",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{size:"mini",placeholder:"客服真名",clearable:""},on:{input:t.handleQueryChange},model:{value:t.realName,callback:function(e){t.realName=e},expression:"realName"}}),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.agents.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.agents.content}},[n("el-table-column",{attrs:{type:"index",width:"35"}}),t._v(" "),n("el-table-column",{attrs:{prop:"subDomain",label:"企业号",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"uid",label:"唯一ID(uId)",width:"125"}}),t._v(" "),n("el-table-column",{attrs:{prop:"username",label:"用户名(用于登录)",width:"155"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("img",{attrs:{src:e.row.avatar,height:"15px",width:"15px"}}),t._v(" "),n("span",[t._v(t._s(t.username(e.row,e.row.username)))]),t._v(" "),t.isSelf(e.row.username)?n("span",[n("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v("当前账号")])],1):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"realName",label:"真名(后台展示)"}}),t._v(" "),n("el-table-column",{attrs:{prop:"nickname",label:"昵称(对话页面展示)"}}),t._v(" "),n("el-table-column",{attrs:{prop:"maxThreadCount",label:"最大接待数"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.robot?n("span",[t._v("不限")]):n("span",[t._v(t._s(e.row.maxThreadCount))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"robot",label:"机器人"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.robot?n("span",[t._v("是")]):n("span",[t._v("否")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"enabled",label:"在职"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.enabled?n("span",[t._v("是")]):n("span",[t._v("否")])]}}])}),t._v(" "),t.showAuthority.debug?n("el-table-column",{attrs:{prop:"acceptStatus",label:"接待状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.acceptStatus))])]}}])}):t._e(),t._v(" "),t.showAuthority.debug?n("el-table-column",{attrs:{prop:"connectionStatus",label:"在线状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.connectionStatus))])]}}])}):t._e(),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){t.handleView(e.$index,e.row)}}},[t._v("模拟对话")]),t._v(" "),e.row.robot?t._e():n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleCode(e.$index,e.row)}}},[t._v("获取代码")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),t.showDeleteButton(e.row)?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.agents.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"添加客服账号",visible:t.dialogVisible,width:"35%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"登录用户名",prop:"username"}},[n("el-input",{attrs:{placeholder:"用于登录客服后台",disabled:t.isSelf(t.form.username)},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{"auto-complete":"off",placeholder:"密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{attrs:{placeholder:"邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[n("img",{staticStyle:{float:"left","margin-right":"10px"},attrs:{src:t.form.avatar,width:"40px",height:"40px"}}),t._v(" "),n("el-upload",{staticClass:"upload-demo",attrs:{data:t.upload_data,name:t.upload_name,action:t.uploadImageServerUrl,"on-success":t.handleImageUploadSuccess,"before-upload":t.beforeImageUpload}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"真名",prop:"realName"}},[n("el-input",{attrs:{placeholder:"仅在管理后台显示"},model:{value:t.form.realName,callback:function(e){t.$set(t.form,"realName",e)},expression:"form.realName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"昵称",prop:"name"}},[n("el-input",{attrs:{placeholder:"访客端显示"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"最大接待数",prop:"maxThreadCount"}},[n("el-input-number",{attrs:{min:1,max:1e3,label:"描述文字"},on:{change:t.handleMaxThreadCountChange},model:{value:t.form.maxThreadCount,callback:function(e){t.$set(t.form,"maxThreadCount",e)},expression:"form.maxThreadCount"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"在职",prop:"enabled"}},[n("el-radio",{attrs:{label:!0},model:{value:t.form.enabled,callback:function(e){t.$set(t.form,"enabled",e)},expression:"form.enabled"}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:!1},model:{value:t.form.enabled,callback:function(e){t.$set(t.form,"enabled",e)},expression:"form.enabled"}},[t._v("否")])],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addAgent()}}},[t._v(t._s(t.dialogTitle))])],1)],1)],1)},staticRenderFns:[]};var fl=n("VU/8")(pl,ml,!1,function(t){n("+YkN")},"data-v-6292d7cd",null).exports,_l={name:"bd-workGroup-admin",data:function(){return{nickname:"",searchUserVisible:!1,searchUser:"",loading:!1,pageSize:20,currentPage:1,dialogVisible:!1,isEdit:!1,workTimeIndex:0,allWorkGroups:[],filteredWorkGroups:[],allAgents:[],form:{id:0,wid:"",nickname:"",avatar:u.DEFAULT_WORKGROUP_AVATAR,defaultRobot:!1,offlineRobot:!1,forceRate:!1,routeType:"robin",workTimes:[{startTime:new Date(2018,8,10,8,30),endTime:new Date(2018,8,10,11,30)}],users:[],admin:"",welcomeTip:"正在为您分配客服，请稍后",acceptTip:"您好有什么可以帮您的?",offlineTip:"当前客服不在线，请留言",onDutyWorkGroupWid:""},workTimes:[{id:0,value:[new Date(2018,8,10,8,30),new Date(2018,8,10,11,30)]}],rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,message:"长度最少2个字符",trigger:"blur"}],workGroups:[{type:"array",required:!0,message:"请至少选择一个技能组",trigger:"change"}],defaultRobot:[{required:!0,message:"请选择默认机器人",trigger:"change"}],offlineRobot:[{required:!0,message:"请选择离线机器人",trigger:"change"}],forceRate:[{required:!0,message:"请选择强制评价",trigger:"change"}],routeType:[{required:!0,message:"请选择强制评价",trigger:"change"}],welcomeTip:[{required:!0,message:"请填写默认欢迎语",trigger:"blur"}],acceptTip:[{required:!0,message:"请填写接入欢迎语",trigger:"blur"}],offlineTip:[{required:!0,message:"请填写离线提示语",trigger:"blur"}],users:[{type:"array",required:!0,message:"请至少添加一个成员",trigger:"change"}],admin:[{required:!0,message:"请选择客服组长",trigger:"change"}]},upload_headers:{"X-CSRF-TOKEN":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json",Authorization:"Bearer "},upload_data:{file_name:"test.png",username:""},upload_name:"file",uploadImageServerUrl:u.UPLOAD_IMAGE_URL,isIp:u.IS_IP}},computed:Ii()({},Object(c.c)(["userInfo","agents","contacts","workGroups","accessToken"]),{dialogTitle:function(){return this.isEdit?"更新":"创建"},mainHost:function(){return document.domain.split(".").slice(-2).join(".")+("8081"===location.port?":8000":"")}}),methods:Ii()({},Object(c.b)(["createWorkgroup","updateWorkgroup","deleteWorkgroup","getWorkGroups","getAllWorkGroups","filterWorkGroups"]),{routeType:function(t){return"robin"===t?"轮询":"pubsub"===t?"广播":t},gotoHelpdoc:function(){window.open(u.HELP_BASE_URL+"201809171923321")},handleImageUploadSuccess:function(t,e){200===t.status_code?this.form.avatar=t.data:this.$message.error("上传图片错误，请稍后重试...")},beforeImageUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,n=t.size/1024/1024<2;e||this.$message.error("上传头像图片只能是 jpg 或 png 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!");var i=moment(new Date).format("YYYYMMDDHHmmss");return"image/jpeg"===t.type?this.upload_data.file_name=i+".jpg":"image/png"===t.type&&(this.upload_data.file_name=i+".png"),e&&n},querySearchUserAsync:function(t,e){console.log(t);var n=this.allAgents,i=t?n.filter(this.createStateFilter(t)):n;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e(i)},3e3*Math.random())},createStateFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelectUser:function(t){console.log(t),this.form.users.some(function(e){return e.id===t.object.id})||this.form.users.push(t.object),this.searchUserVisible=!1,this.searchUser=""},showSearchUser:function(){var t=this;this.searchUserVisible=!0,this.$nextTick(function(e){t.$refs.saveUserInput.$refs.input.focus()})},handleRemoveTag:function(t){console.log(t),this.form.users.splice(this.form.users.indexOf(t),1)},handleCommand:function(t){this.$message("click on item "+t)},handleSizeChange:function(t){this.pageSize=t,this.loading=!0;var e={page:this.currentPage-1,size:this.pageSize};this.getWorkGroups(e)},handleCurrentChange:function(t){this.currentPage=t,this.loading=!0;var e={page:this.currentPage-1,size:20};this.getWorkGroups(e)},addWorkTime:function(){this.workTimeIndex++,this.workTimes.push({id:this.workTimeIndex,value:[new Date(2018,8,10,13,30),new Date(2018,8,10,18,30)]})},removeWorkTime:function(t){for(var e=0;e<this.workTimes.length;e++){this.workTimes[e].id===t&&this.workTimes.splice(e,1)}},transformWorkTimes:function(){for(var t=[],e=0;e<this.workTimes.length;e++){var n=this.workTimes[e],i=moment(n.value[0]).format("HH:mm:ss"),o=moment(n.value[1]).format("HH:mm:ss");t.push({startTime:i,endTime:o})}this.form.workTimes=t},transformUsers:function(){for(var t=[],e=0;e<this.form.users.length;e++){var n=this.form.users[e];t.push(n.uid)}this.form.users=t},addWorkGroupDialog:function(){this.isEdit=!1,this.form.onDutyWorkGroupWid="",this.workTimeIndex=0,this.workTimes=[{id:0,value:[new Date(2018,8,10,8,30),new Date(2018,8,10,11,30)]}],this.form.users=[],this.form.admin="",this.filteredWorkGroups=[{id:0,wid:"",nickname:"不设置"}];for(var t=0;t<this.allWorkGroups.length;t++){var e=this.allWorkGroups[t];this.filteredWorkGroups.push(e)}this.dialogVisible=!0},addWorkGroup:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.dialogVisible=!1,t.transformWorkTimes(),t.transformUsers(),t.isEdit?t.updateWorkgroup(t.form):t.createWorkgroup(t.form)})},handleQueryChange:function(t){if(0===t.trim().length){this.loading=!0;this.getWorkGroups({page:0,size:20})}},handleQuery:function(){if(""===this.nickname){this.getWorkGroups({page:0,size:20})}else{var t={page:0,size:20,nickname:this.nickname};this.filterWorkGroups(t)}},handleView:function(t,e){this.isIp?window.open(u.CHAT_BASE_URL+"?uid="+this.userInfo.uid+"&wid="+e.wid+"&type=workGroup&aid=&ph=ph"):window.open(u.HTTP_PREFIX+this.userInfo.subDomain+"."+this.mainHost+"/chat?uid="+this.userInfo.uid+"&wid="+e.wid+"&type=workGroup&aid=&ph=ph")},handleCode:function(t,e){Tt.$emit(u.EVENT_BUS_WORKGROUP_CODE,e)},handleEdit:function(t,e){this.isEdit=!0,this.form.id=e.id,this.form.wid=e.wid,this.form.nickname=e.nickname,this.form.avatar=e.avatar,this.form.defaultRobot=e.defaultRobot,this.form.offlineRobot=e.offlineRobot,this.form.forceRate=e.forceRate,this.form.routeType=e.routeType,this.form.welcomeTip=e.welcomeTip,this.form.acceptTip=e.acceptTip,this.form.offlineTip=e.offlineTip,this.form.onDutyWorkGroupWid=null!=e.onDutyWorkGroup?e.onDutyWorkGroup.wid:"",this.workTimes=[];for(var n=0;n<e.workTimes.length;n++){var i=e.workTimes[n];this.workTimeIndex=n,this.workTimes.push({id:n,value:[new Date("2018-08-10 "+i.startTime),new Date("2018-08-10 "+i.endTime)]})}this.form.users=[];for(var o=0;o<e.users.length;o++){var a=e.users[o];a.robot||this.form.users.push(a)}this.form.admin=null!==e.admin?e.admin.uid:"",this.filteredWorkGroups=[{id:0,wid:"",nickname:"不设置"}];for(var r=0;r<this.allWorkGroups.length;r++){var s=this.allWorkGroups[r];e.wid!==s.wid&&this.filteredWorkGroups.push(s)}this.dialogVisible=!0},handleDelete:function(t,e){var n=this;console.log(t,e),this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteWorkgroup(e.id);for(var t=n.allWorkGroups.length-1;t>=0;t--){n.allWorkGroups[t].id===e.id&&n.allWorkGroups.splice(t,1)}}).catch(function(){})}}),mounted:function(){var t=this;yt(this.accessToken,function(e){console.log(e);for(var n=0;n<e.data.length;n++){var i=e.data[n];t.allWorkGroups.push(i)}},function(t){console.log(t)}),Ct(this.accessToken,function(e){console.log(e);for(var n=0;n<e.data.length;n++){var i=e.data[n];i.robot||t.allAgents.push({value:i.realName,object:i})}},function(t){console.log(t)}),Tt.$on(u.EVENT_BUS_WORKGROUP_LOAD_FINISHIED,function(e){t.loading=!1})}},hl={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-workGroup-admin"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.addWorkGroupDialog()}}},[t._v("添加技能组")]),t._v(" "),n("el-input",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{size:"mini",placeholder:"技能组昵称",clearable:""},on:{input:t.handleQueryChange},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.workGroups.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.workGroups.content}},[n("el-table-column",{attrs:{type:"index",width:"35"}}),t._v(" "),n("el-table-column",{attrs:{type:"expand",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"工作时间段:"}},t._l(e.row.workTimes,function(e){return n("el-tag",{key:e.id,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n              "+t._s(e.startTime)+" - "+t._s(e.endTime)+"\n            ")])}))],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"wid",label:"唯一ID(wId)",width:"125"}}),t._v(" "),n("el-table-column",{attrs:{prop:"nickname",label:"对话页面标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("img",{attrs:{src:e.row.avatar,height:"15px",width:"15px"}}),t._v(" "),n("span",[t._v(t._s(e.row.nickname))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"welcomeTip",label:"默认欢迎语"}}),t._v(" "),n("el-table-column",{attrs:{prop:"acceptTip",label:"接入欢迎语"}}),t._v(" "),n("el-table-column",{attrs:{prop:"offlineTip",label:"离线提示语"}}),t._v(" "),n("el-table-column",{attrs:{prop:"onDutyWorkGroup",label:"值班工作组"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.onDutyWorkGroup?n("el-tag",{key:e.row.onDutyWorkGroup.id,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n          "+t._s(e.row.onDutyWorkGroup.nickname)+"\n        ")]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"users",label:"所有成员"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.users,function(e){return n("el-tag",{key:e.id,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n          "+t._s(e.realName)+"\n        ")])})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"admin",label:"客服组长"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.admin?n("el-tag",{key:e.row.admin.uid,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n          "+t._s(e.row.admin.realName)+"\n        ")]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"350px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){t.handleView(e.$index,e.row)}}},[t._v("模拟对话")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleCode(e.$index,e.row)}}},[t._v("获取代码")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),e.row.defaulted?t._e():n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.workGroups.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"添加技能组",visible:t.dialogVisible,width:"40%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"140px"}},[n("el-form-item",{attrs:{label:"对话页面标题",prop:"nickname"}},[n("el-input",{model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"LOGO",prop:"avatar"}},[n("img",{staticStyle:{float:"left","margin-right":"10px"},attrs:{src:t.form.avatar,width:"40px",height:"40px"}}),t._v(" "),n("el-upload",{staticClass:"upload-demo",attrs:{data:t.upload_data,name:t.upload_name,action:t.uploadImageServerUrl,"on-success":t.handleImageUploadSuccess,"before-upload":t.beforeImageUpload}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),t._v(" "),t._l(t.workTimes,function(e,i){return n("el-form-item",{key:e.id,attrs:{label:"工作时间段 "+(i+1),prop:"workTimes.0.value"}},[n("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"workTime.value"}}),t._v(" "),i>0?n("el-button",{on:{click:function(n){t.removeWorkTime(e.id)}}},[t._v("删除")]):t._e(),t._v(" "),i===t.form.workTimes.length-1?n("el-button",{on:{click:function(e){t.addWorkTime()}}},[t._v("添加")]):t._e()],1)}),t._v(" "),n("el-form-item",{attrs:{label:"进入页面欢迎语",prop:"welcomeTip"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.form.welcomeTip,callback:function(e){t.$set(t.form,"welcomeTip",e)},expression:"form.welcomeTip"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"接入客服欢迎语",prop:"acceptTip"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.form.acceptTip,callback:function(e){t.$set(t.form,"acceptTip",e)},expression:"form.acceptTip"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"离线提示",prop:"offlineTip"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.form.offlineTip,callback:function(e){t.$set(t.form,"offlineTip",e)},expression:"form.offlineTip"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"值班工作组",prop:"onDutyWorkGroupWid"}},[n("el-radio-group",{model:{value:t.form.onDutyWorkGroupWid,callback:function(e){t.$set(t.form,"onDutyWorkGroupWid",e)},expression:"form.onDutyWorkGroupWid"}},t._l(t.filteredWorkGroups,function(e){return n("el-radio",{key:e.id,attrs:{label:e.wid}},[t._v("\n            "+t._s(e.nickname)+"\n          ")])}))],1),t._v(" "),n("el-form-item",{attrs:{label:"所有成员",prop:"users"}},[t._l(t.form.users,function(e){return n("el-tag",{key:e.id,staticStyle:{"margin-right":"5px"},attrs:{size:"mini",closable:"","disable-transitions":!1},on:{close:function(n){t.handleRemoveTag(e)}}},[t._v(t._s(e.realName))])}),t._v(" "),t.searchUserVisible?n("el-autocomplete",{ref:"saveUserInput",attrs:{size:"mini","fetch-suggestions":t.querySearchUserAsync,placeholder:"请输入内容"},on:{select:t.handleSelectUser},model:{value:t.searchUser,callback:function(e){t.searchUser=e},expression:"searchUser"}}):n("el-button",{attrs:{size:"mini"},on:{click:t.showSearchUser}},[t._v("添加成员")])],2),t._v(" "),n("el-form-item",{attrs:{label:"客服组长",prop:"admin"}},[0===t.form.users.length?n("span",[t._v("请先添加成员")]):t._e(),t._v(" "),n("el-radio-group",{model:{value:t.form.admin,callback:function(e){t.$set(t.form,"admin",e)},expression:"form.admin"}},t._l(t.form.users,function(e){return n("el-radio",{key:e.id,attrs:{label:e.uid}},[t._v("\n            "+t._s(e.realName)+"\n          ")])}))],1)],2),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addWorkGroup()}}},[t._v(t._s(t.dialogTitle))])],1)],1)],1)},staticRenderFns:[]};var gl=n("VU/8")(_l,hl,!1,function(t){n("idss")},"data-v-1affb5bf",null).exports,vl=n("TQvf"),El=n.n(vl),Tl={name:"bd-code-admin",props:["type","object"],data:function(){return{form:{color:"#409EFF",style:1,size:1,position:1,code:""},htmlTip:"复制代码，并放在网页</body>之前",isIp:u.IS_IP,isDxz:u.IS_DAXUEZHANG,homeUrl:u.HOME_URL}},computed:Ii()({},Object(c.c)(["userInfo"]),{mainHost:function(){return document.domain.split(".").slice(-2).join(".")+("8081"===location.port?":8000":"")},styledCode:function(){return 1===this.form.style?"workGroup"===this.type?this.isIp?'<a href="'+u.CHAT_BASE_URL+"?uid="+this.userInfo.uid+"&wid="+this.object.wid+'&type=workGroup&aid=&ph=ph" target="_blank">在线客服</a>':'<a href="'+u.HTTP_PREFIX+this.userInfo.subDomain+"."+this.mainHost+"/chat?uid="+this.userInfo.uid+"&wid="+this.object.wid+'&type=workGroup&aid=&ph=ph" target="_blank">在线客服</a>':this.isIp?'<a href="'+u.CHAT_BASE_URL+"?uid="+this.userInfo.uid+"&wid=&type=appointed&aid="+this.object.uid+'&ph=ph" target="_blank">在线客服</a>':'<a href="'+u.HTTP_PREFIX+this.userInfo.subDomain+"."+this.mainHost+"/chat?uid="+this.userInfo.uid+"&wid=&type=appointed&aid="+this.object.uid+'&ph=ph" target="_blank">在线客服</a>':"workGroup"===this.type?'\x3c!--萝卜丝·智能客服代码 开始 --\x3e\n<div id="byteDesk"></div>\n<script type="text/javascript">\nwindow.adminUid = "'+this.userInfo.uid+'";\nwindow.workGroupWid = "'+this.object.wid+'";\nwindow.subDomain = "'+this.userInfo.subDomain+'";\nwindow.type = "workGroup";\nwindow.agentUid = "";\n(function () {\n  d = document;\n  s = d.createElement("script");\n  s.src = "'+this.homeUrl+this.jsDirName+this.floatJs+'";\n  s.async = 1;\n  d.getElementsByTagName("head")[0].appendChild(s);\n})();\n<\/script>\n\x3c!--./萝卜丝·智能客服代码 结束 --\x3e':'\x3c!--萝卜丝·智能客服代码 开始 --\x3e\n<div id="byteDesk"></div>\n<script type="text/javascript">\nwindow.adminUid = "'+this.userInfo.uid+'";\nwindow.workGroupWid = "";\nwindow.subDomain = "'+this.userInfo.subDomain+'";\nwindow.type = "appointed";\nwindow.agentUid = "'+this.object.uid+'";\n(function () {\n  d = document;\n  s = d.createElement("script");\n  s.src = "'+this.homeUrl+this.jsDirName+this.floatJs+'";\n  s.async = 1;\n  d.getElementsByTagName("head")[0].appendChild(s);\n})();\n<\/script>\n\x3c!--./萝卜丝·智能客服代码 结束 --\x3e'},iconSizeVisible:function(){return 2===this.form.style},jsDirName:function(){return this.isDxz?"/js/deploy/dxz/":"/js/"},floatJs:function(){return 1===this.form.size?"n.js":2===this.form.size?"me.js":3===this.form.size?"sm.js":4===this.form.size?"mi.js":"n.js"}}),methods:{gotoHelpdoc:function(){window.open(u.HELP_BASE_URL+"201809182325351")},onCopy:function(){var t=this;console.log("submit!");var e=new El.a(".copyBtn");e.on("success",function(n){t.$message({message:"复制成功",type:"success"}),e.destroy()}),e.on("error",function(n){t.$message.error("该浏览器不支持自动复制"),e.destroy()})}}},bl={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-code-admin"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-form",{ref:"form",staticStyle:{width:"600px","margin-top":"50px"},attrs:{model:t.form,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"样式"}},[n("el-radio-group",{model:{value:t.form.style,callback:function(e){t.$set(t.form,"style",e)},expression:"form.style"}},[n("el-radio",{attrs:{label:1}},[t._v("独立窗口")]),t._v(" "),n("el-radio",{attrs:{label:2}},[t._v("嵌入式")])],1)],1),t._v(" "),t.iconSizeVisible?n("el-form-item",{attrs:{label:"icon大小"}},[n("el-radio-group",{model:{value:t.form.size,callback:function(e){t.$set(t.form,"size",e)},expression:"form.size"}},[n("el-radio",{attrs:{label:1}},[t._v("正常")]),t._v(" "),n("el-radio",{attrs:{label:2}},[t._v("中等")]),t._v(" "),n("el-radio",{attrs:{label:3}},[t._v("小")]),t._v(" "),n("el-radio",{attrs:{label:4}},[t._v("最小")])],1)],1):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"代码"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:12,maxRows:20},value:t.styledCode}}),t._v(" "),1===this.form.style?n("span",[t._v("需要以超链接的形式放在网页的任何地方")]):t._e(),t._v(" "),2===this.form.style?n("span",[t._v(t._s(t.htmlTip))]):t._e()],1),t._v(" "),n("el-form-item",[n("el-button",{staticClass:"copyBtn",attrs:{type:"primary","data-clipboard-text":t.styledCode},on:{click:t.onCopy}},[t._v("复制")])],1)],1)],1)},staticRenderFns:[]};var Sl=n("VU/8")(Tl,bl,!1,function(t){n("raDJ")},"data-v-3cd76eea",null).exports,Cl={name:"bd-company-admin",data:function(){return{searchRegionVisible:!1,searchRegion:"",loading:!1,pageSize:20,currentPage:1,isEdit:!1,dialogVisible:!1,companyName:"",regionName:"",selectedRegions:[],form:{cid:"",name:"",description:"",regions:[],selectedRegions:[]},rules:{name:[{required:!0,message:"请输入公司名",trigger:"blur"}]}}},computed:Ii()({},Object(c.c)(["companies","provinceCities","regions"]),{dialogTitle:function(){return this.isEdit?"更新":"创建"}}),methods:Ii()({},Object(c.b)(["getCompanies","createCompany","updateCompany","deleteCompany","filterCompanies"]),{gotoHelpdoc:function(){window.open(u.HELP_BASE_URL+"201809171923191")},displayRegionTagName:function(t){return void 0===t.parent||null===t.parent?t.name:t.parent.name+t.name},querySearchRegionAsync:function(t,e){console.log(t);var n=this.regions,i=t?n.filter(this.createStateFilter(t)):n;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e(i)},3e3*Math.random())},createStateFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelectRegion:function(t){this.form.regions.some(function(e){return e.id===t.object.id})||this.form.regions.push(t.object),this.searchRegionVisible=!1,this.searchRegion=""},showSearchRegion:function(){var t=this;this.searchRegionVisible=!0,this.$nextTick(function(e){t.$refs.saveRegionInput.$refs.input.focus()})},handleRemoveTag:function(t){console.log(t),this.form.regions.splice(this.form.regions.indexOf(t),1)},handleSizeChange:function(t){this.pageSize=t,this.loading=!0;var e={page:this.currentPage-1,size:this.pageSize};this.getCompanies(e)},handleCurrentChange:function(t){this.currentPage=t,this.loading=!0;var e={page:this.currentPage-1,size:this.pageSize};this.getCompanies(e)},handleQueryChange:function(t){if(0===t.trim().length){this.loading=!0;this.getCompanies({page:0,size:20})}},handleQuery:function(){var t={page:0,size:20,name:this.companyName};this.filterCompanies(t)},addCompanyDialog:function(){this.isEdit=!1,this.form.cid="",this.form.name="",this.form.description="",this.form.regions=[],this.dialogVisible=!0},transformRegions:function(){var t=this.form.regions;this.form.selectedRegions=[];for(var e=0;e<t.length;e++){var n=t[e];this.form.selectedRegions.push(n.code)}},doAddCompany:function(){var t=this;this.transformRegions(),this.$refs.form.validate(function(e){if(!e)return!1;t.dialogVisible=!1,t.isEdit?t.updateCompany(t.form):t.createCompany(t.form)})},handleChange:function(t){console.log(t)},handleEdit:function(t,e){this.isEdit=!0,this.form.cid=e.cid,this.form.name=e.name,this.form.description=e.description,this.form.regions=[];for(var n=0;n<e.regions.length;n++){var i=e.regions[n];this.form.regions.push(i)}this.dialogVisible=!0},handleDelete:function(t,e){var n=this;console.log(t,e),this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteCompany(e.cid)}).catch(function(){})}}),mounted:function(){var t=this;Tt.$on(u.EVENT_BUS_COMPANY_LOAD_FINISHED,function(e){t.loading=!1})}},yl={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-company-admin"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"},on:{click:t.addCompanyDialog}},[t._v("添加分公司")]),t._v(" "),n("el-input",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{size:"mini",placeholder:"分公司名",clearable:""},on:{input:t.handleQueryChange},model:{value:t.companyName,callback:function(e){t.companyName=e},expression:"companyName"}}),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.companies.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.companies.content,stripe:"",size:"mini",height:"calc(100% - 80px)"}},[n("el-table-column",{attrs:{type:"index",width:"35"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"分公司名",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{prop:"regions",label:"服务城市"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.regions,function(e){return n("el-tag",{key:e.id,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v(t._s(t.displayRegionTagName(e)))])})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"description",label:"备注",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.companies.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"添加分公司",visible:t.dialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"分公司名",prop:"name"}},[n("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"服务城市",prop:"regions"}},[t._l(t.form.regions,function(e){return n("el-tag",{key:e.id,staticStyle:{"margin-right":"5px"},attrs:{size:"mini",closable:"","disable-transitions":!1},on:{close:function(n){t.handleRemoveTag(e)}}},[t._v(t._s(t.displayRegionTagName(e)))])}),t._v(" "),t.searchRegionVisible?n("el-autocomplete",{ref:"saveRegionInput",attrs:{size:"mini","fetch-suggestions":t.querySearchRegionAsync,placeholder:"请输入内容"},on:{select:t.handleSelectRegion},model:{value:t.searchRegion,callback:function(e){t.searchRegion=e},expression:"searchRegion"}}):n("el-button",{attrs:{size:"mini"},on:{click:t.showSearchRegion}},[t._v("添加服务城市")])],2),t._v(" "),n("el-form-item",{attrs:{label:"描述",prop:"description"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:20}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.doAddCompany()}}},[t._v(t._s(t.dialogTitle))])],1)],1)],1)},staticRenderFns:[]};var Il={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-priviledge-admin"}},[this._v("\n  权限管理：自定义角色、赋予相应权限、并在客服页面修改账号角色\n")])},staticRenderFns:[]};var wl={name:"bd-agent-admin",components:{BdAgent:fl,BdWorkgroup:gl,BdCode:Sl,BdCompany:n("VU/8")(Cl,yl,!1,function(t){n("lLcd")},"data-v-230372ae",null).exports,BdPriviledge:n("VU/8")({name:"bd-priviledge-admin"},Il,!1,function(t){n("Yt5g")},"data-v-9e75bfb8",null).exports},data:function(){return{activeName:"agent",tabIndex:1,editableTabs:[]}},computed:Ii()({},Object(c.c)(["showAuthority"])),methods:Ii()({},Object(c.b)(["getWorkGroups","getAgents","getRoles","getRegions","getCompanies"]),{handleClick:function(t,e){var n={page:0,size:20};"agent"===t.name?this.getAgents(n):"workGroup"===t.name?this.getWorkGroups(n):"company"===t.name?(this.getCompanies(n),this.getRegions()):t.name},handleTabsEdit:function(t,e){if("remove"===e){var n=this.editableTabs,i="agent";i===t&&n.forEach(function(e,o){if(e.name===t){var a=n[o+1]||n[o-1];a&&(i=a.name)}}),this.activeName="agent",this.editableTabs=n.filter(function(e){return e.name!==t})}}}),created:function(){var t={page:0,size:20};this.getWorkGroups(t),this.getAgents(t),this.getRoles()},mounted:function(){var t=this;Tt.$on(u.EVENT_BUS_AGENT_CODE,function(e){t.editableTabs.push({title:"客服"+e.nickname+"代码",name:""+t.tabIndex,type:"agent",object:e}),t.activeName=""+t.tabIndex,t.tabIndex++}),Tt.$on(u.EVENT_BUS_WORKGROUP_CODE,function(e){t.editableTabs.push({title:"工作组"+e.nickname+"代码",name:""+t.tabIndex,type:"workGroup",object:e}),t.activeName=""+t.tabIndex,t.tabIndex++})}},Al={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-agent-admin"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick,edit:t.handleTabsEdit},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"客服账号",name:"agent"}},[n("bd-agent")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"技能组",name:"workGroup"}},[n("bd-workgroup")],1),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"分公司",name:"company"}},[n("bd-company")],1):t._e(),t._v(" "),t.showAuthority.debug?n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"权限管理",name:"priviledge"}},[n("bd-priviledge")],1):t._e(),t._v(" "),t._l(t.editableTabs,function(t){return n("el-tab-pane",{key:t.name,staticStyle:{height:"100%"},attrs:{closable:"",label:t.title,name:t.name}},[n("bd-code",{attrs:{type:t.type,object:t.object}})],1)})],2)],1)},staticRenderFns:[]};var kl=n("VU/8")(wl,Al,!1,function(t){n("coUW")},"data-v-33c6b14e",null).exports,Rl={name:"bd-member",data:function(){return{currentPage:1,isEdit:!1,dialogVisible:!1,form:{id:0,username:"",password:"",email:"",avatar:u.DEFAULT_AVATAR,realName:"",name:"",maxThreadCount:10,workGroups:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,message:"长度最少5个字符",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"change"}],realName:[{required:!0,message:"请输入密码",trigger:"blur"}],name:[{required:!0,message:"请输入密码",trigger:"blur"}],workGroups:[{required:!0,message:"请至少选择一个工作组",trigger:"change"}]},upload_headers:{"X-CSRF-TOKEN":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json",Authorization:"Bearer "},upload_data:{file_name:"test.png",username:""},upload_name:"file",uploadImageServerUrl:u.UPLOAD_IMAGE_URL}},computed:Ii()({},Object(c.c)(["userInfo","accessToken","agents","workGroups","roles"])),methods:Ii()({},Object(c.b)(["createAgent","updateAgent","deleteAgent","getAgents"]),{username:function(t){return t.split("@")[0]},isSelf:function(t){return t===this.userInfo.username},handleImageUploadSuccess:function(t,e){200===t.status_code?this.form.avatar=t.data:this.$message.error("上传图片错误，请稍后重试...")},beforeImageUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,n=t.size/1024/1024<2;e||this.$message.error("上传头像图片只能是 jpg 或 png 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!");var i=moment(new Date).format("YYYYMMDDHHmmss");return"image/jpeg"===t.type?this.upload_data.file_name=i+".jpg":"image/png"===t.type&&(this.upload_data.file_name=i+".png"),e&&n},handleMaxThreadCountChange:function(t){},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={page:this.currentPage-1,size:20};this.getAgents(e)},addAgentDialog:function(){this.isEdit=!1,this.form.id="",this.form.username="",this.form.password="",this.form.email="",this.form.avatar=u.DEFAULT_AVATAR,this.form.realName="",this.form.nickname="",this.form.maxThreadCount=10,this.form.workGroups=[],this.form.role="",this.dialogVisible=!0},addAgent:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.dialogVisible=!1,t.isEdit?t.updateAgent(t.form):t.createAgent(t.form)})},handleEdit:function(t,e){this.isEdit=!0,this.form.id=e.id,this.form.username=e.username.split("@")[0],this.form.password="",this.form.email=e.email,this.form.avatar=e.avatar,this.form.realName=e.realName,this.form.nickname=e.nickname,this.form.maxThreadCount=e.maxThreadCount,this.form.email=e.email,this.form.mobile=e.mobile,this.form.workGroups=[];for(var n=0;n<e.workGroups.length;n++){var i=e.workGroups[n];this.form.workGroups.push(i.wid)}for(var o="",a=0;a<e.roles.length;a++){var r=e.roles[a];r.value!==u.ROLE_FREE&&(o=r.value)}this.form.role=o,this.dialogVisible=!0},handleDelete:function(t,e){var n=this;console.log(t,e),this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteAgent(e.id)}).catch(function(){})}})},Nl={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-member"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.addAgentDialog()}}},[t._v("添加账号")]),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,total:t.agents.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.agents.content}},[n("el-table-column",{attrs:{type:"index",width:"20"}}),t._v(" "),n("el-table-column",{attrs:{prop:"subDomain",label:"企业号",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"username",label:"用户名(用于登录)"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("img",{attrs:{src:e.row.avatar,height:"15px",width:"15px"}}),t._v(" "),n("span",[t._v(t._s(t.username(e.row.username)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"realName",label:"真名"}}),t._v(" "),n("el-table-column",{attrs:{prop:"workGroups",label:"部门"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.workGroups,function(e){return n("el-tag",{key:e.id,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v(t._s(e.nickname))])})}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),t.isSelf(e.row.username)?t._e():n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,total:t.agents.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"添加客服账号",visible:t.dialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"登录用户名",prop:"username"}},[n("el-input",{attrs:{placeholder:"用于登录客服后台"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{"auto-complete":"off",placeholder:"密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{attrs:{placeholder:"邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[n("img",{staticStyle:{float:"left","margin-right":"10px"},attrs:{src:t.form.avatar,width:"40px",height:"40px"}}),t._v(" "),n("el-upload",{staticClass:"upload-demo",attrs:{data:t.upload_data,name:t.upload_name,action:t.uploadImageServerUrl,"on-success":t.handleImageUploadSuccess,"before-upload":t.beforeImageUpload}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"真名",prop:"realName"}},[n("el-input",{model:{value:t.form.realName,callback:function(e){t.$set(t.form,"realName",e)},expression:"form.realName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"所属部门",prop:"workGroups"}},[n("el-radio-group",{model:{value:t.form.workGroups,callback:function(e){t.$set(t.form,"workGroups",e)},expression:"form.workGroups"}},t._l(t.workGroups.content,function(e){return n("el-radio",{key:e.id,attrs:{label:e.wid}},[t._v(t._s(e.nickname))])}))],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addAgent()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Ol=n("VU/8")(Rl,Nl,!1,function(t){n("usen")},"data-v-0eb5a712",null).exports,xl={name:"bd-department",data:function(){return{currentPage:1,dialogVisible:!1,isEdit:!1,workTimeIndex:0,form:{id:0,wid:"",name:"",avatar:u.DEFAULT_WORKGROUP_AVATAR,defaultRobot:!1,offlineRobot:!1,forceRate:!1,routeType:"robin",workTimes:[{startTime:new Date(2018,8,10,8,30),endTime:new Date(2018,8,10,11,30)}],users:[],welcomeTip:"正在为您分配客服，请稍后",acceptTip:"您好有什么可以帮您的?",offlineTip:"当前客服不在线，请留言"},workTimes:[{id:0,value:[new Date(2018,8,10,8,30),new Date(2018,8,10,11,30)]}],rules:{name:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,message:"长度最少2个字符",trigger:"blur"}],workGroups:[{type:"array",required:!0,message:"请至少选择工作组",trigger:"change"}],defaultRobot:[{required:!0,message:"请选择默认机器人",trigger:"change"}],offlineRobot:[{required:!0,message:"请选择离线机器人",trigger:"change"}],forceRate:[{required:!0,message:"请选择强制评价",trigger:"change"}],routeType:[{required:!0,message:"请选择强制评价",trigger:"change"}],welcomeTip:[{required:!0,message:"请填写默认欢迎语",trigger:"blur"}],acceptTip:[{required:!0,message:"请填写接入欢迎语",trigger:"blur"}],offlineTip:[{required:!0,message:"请填写离线提示语",trigger:"blur"}],users:[{type:"array",required:!0,message:"请至少选择一个客服",trigger:"change"}]},upload_headers:{"X-CSRF-TOKEN":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json",Authorization:"Bearer "},upload_data:{file_name:"test.png",username:""},upload_name:"file",uploadImageServerUrl:u.UPLOAD_IMAGE_URL}},computed:Ii()({},Object(c.c)(["agents","workGroups"])),methods:Ii()({},Object(c.b)(["createWorkgroup","updateWorkgroup","deleteWorkgroup","getWorkGroups"]),{routeType:function(t){return"robin"===t?"轮询":"pubsub"===t?"广播":t},handleImageUploadSuccess:function(t,e){200===t.status_code?this.form.avatar=t.data:this.$message.error("上传图片错误，请稍后重试...")},beforeImageUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,n=t.size/1024/1024<2;e||this.$message.error("上传头像图片只能是 jpg 或 png 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!");var i=moment(new Date).format("YYYYMMDDHHmmss");return"image/jpeg"===t.type?this.upload_data.file_name=i+".jpg":"image/png"===t.type&&(this.upload_data.file_name=i+".png"),e&&n},handleCurrentChange:function(t){console.log(t),this.currentPage=t;var e={page:this.currentPage-1,size:20};this.getWorkGroups(e)},addWorkTime:function(){this.workTimeIndex++,this.workTimes.push({id:this.workTimeIndex,value:[new Date(2018,8,10,13,30),new Date(2018,8,10,18,30)]})},transforWorkTimes:function(){for(var t=[],e=0;e<this.workTimes.length;e++){var n=this.workTimes[e],i=moment(n.value[0]).format("HH:mm:ss"),o=moment(n.value[1]).format("HH:mm:ss");console.log(i,o),t.push({startTime:i,endTime:o})}this.form.workTimes=t},removeWorkTime:function(t){for(var e=0;e<this.workTimes.length;e++){this.workTimes[e].id===t&&this.workTimes.splice(e,1)}},addWorkGroupDialog:function(){this.isEdit=!1,this.dialogVisible=!0},addWorkGroup:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.dialogVisible=!1,t.transforWorkTimes(),t.isEdit?t.updateWorkgroup(t.form):t.createWorkgroup(t.form)})},handleCode:function(t,e){},handleEdit:function(t,e){console.log(t,e),this.isEdit=!0,this.form.id=e.id,this.form.wid=e.wid,this.form.nickname=e.nickname,this.form.avatar=e.avatar,this.form.defaultRobot=e.defaultRobot,this.form.offlineRobot=e.offlineRobot,this.form.forceRate=e.forceRate,this.form.routeType=e.routeType,this.form.welcomeTip=e.welcomeTip,this.form.acceptTip=e.acceptTip,this.form.offlineTip=e.offlineTip,this.form.workTimes=e.workTimes,this.form.users=e.users,this.dialogVisible=!0},handleDelete:function(t,e){var n=this;console.log(t,e),this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteWorkgroup(e.id)}).catch(function(){})}})},Ul={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-department"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.addWorkGroupDialog()}}},[t._v("添加部门")]),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,total:t.workGroups.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.workGroups.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"部门名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("img",{attrs:{src:e.row.avatar,height:"15px",width:"15px"}}),t._v(" "),n("span",[t._v(t._s(e.row.nickname))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"部门成员"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),e.row.defaulted?t._e():n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,total:t.workGroups.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"添加部门",visible:t.dialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"140px"}},[n("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[n("el-input",{model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"LOGO",prop:"avatar"}},[n("img",{staticStyle:{float:"left","margin-right":"10px"},attrs:{src:t.form.avatar,width:"40px",height:"40px"}}),t._v(" "),n("el-upload",{staticClass:"upload-demo",attrs:{data:t.upload_data,name:t.upload_name,action:t.uploadImageServerUrl,"on-success":t.handleImageUploadSuccess,"before-upload":t.beforeImageUpload}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addWorkGroup()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Pl={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"bd-group"}},[this._v("\n  群组管理\n")])},staticRenderFns:[]};var Dl={name:"bd-internal-admin",components:{BdMember:Ol,BdDepartment:n("VU/8")(xl,Ul,!1,function(t){n("7xeX")},"data-v-4926b6c0",null).exports,BdGroup:n("VU/8")({name:"bd-group"},Pl,!1,function(t){n("7yZk")},"data-v-435a94ec",null).exports},data:function(){return{activeName:"member"}},methods:{handleClick:function(t,e){}}},Ml={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-internal-admin"}},[n("el-tabs",{staticStyle:{height:"100%"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"成员管理",name:"member"}},[n("bd-member")],1),t._v(" "),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"部门管理",name:"department"}},[n("bd-department")],1)],1)],1)},staticRenderFns:[]};var Vl=n("VU/8")(Dl,Ml,!1,function(t){n("bzJe")},"data-v-1f7a1b2a",null).exports,Gl={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-robot-admin"}},[n("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{rules:t.rules,model:t.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"机器人昵称",prop:"username"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var Ll=n("VU/8")({name:"bd-robot-admin",data:function(){return{form:{username:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}]}}}},Gl,!1,function(t){n("B2l1")},"data-v-2cc1e02a",null).exports,Bl={name:"bd-cuw-admin",data:function(){return{emptyText:"暂无分组",currentCategory:{id:0,name:"",cuwChildren:[]},pageSize:20,currentPage:1,isEdit:!1,inputVisible:!1,inputValue:"",addCuwDialogVisible:!1,setRobotNameDialogVisible:!1,filterText:"",defaultProps:{label:"name"},form:{id:0,name:"",content:"",categoryId:""},rules:{name:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}],categoryId:[{required:!0,message:"请至少选择一个类别",trigger:"change"}]},formRobot:{robotName:""}}},computed:Ii()({},Object(c.c)(["companyCuwCategories","companyCuws"]),{editButtonDisabled:function(){return!1},deleteButtonDisabled:function(){return!1}}),watch:{filterText:function(t){this.$refs.cateTree.filter(t)}},methods:Ii()({},Object(c.b)(["getCategories","createCategory","updateCategory","deleteCategory","getCompanyCuws","currentCompanyCuwCategoryId","getChildrenCuws","getCuws","cuwCreate","cuwUpdate","cuwDelete"]),{filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},gotoHelpdoc:function(){window.open(u.HELP_BASE_URL+"201809252249331")},rateTotal:function(t){return t.rateHelpful+t.rateUseless},handleNodeClick:function(t){console.log(t),this.currentCategory.id=t.id,this.currentCategory.name=t.name,this.getChildrenCuws(t.id)},handleSizeChange:function(t){console.log(t),this.pageSize=t},handleCurrentChange:function(t){console.log(t),this.currentPage=t},addCuw:function(){this.isEdit=!1,this.form.id=0,this.form.name="",this.form.content="",this.form.categoryId="",this.addCuwDialogVisible=!0},addCategory:function(){var t=this;this.$prompt("请输入分组","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var n=e.value;if(null!=n&&n.length>0){var i={parent_id:0,name:n,type:u.CATEGORY_TYPE_CUW_COMPANY};t.createCategory(i)}}).catch(function(){})},editCategory:function(){var t=this;0===this.currentCategory.id?this.$message.error("请选择要编辑的类别"):this.$prompt("编辑类别","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.currentCategory.name}).then(function(e){var n=e.value;if(null!=n&&n.length>0){var i={category_id:t.currentCategory.id,name:n};t.updateCategory(i)}else t.$message.error("不能为空")}).catch(function(){})},removeCategory:function(){var t=this;0!==this.currentCategory.id?this.companyCuws.length>0?this.$message.error("请首先删除分类内容"):this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteCategory(t.currentCategory.id),t.currentCategory.id=0}).catch(function(){}):this.$message.error("不允许删除")},doAddCuw:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;if(t.addCuwDialogVisible=!1,t.isEdit){var n={id:t.form.id,name:t.form.name,content:t.form.content};t.cuwUpdate(n)}else{var i={categoryId:t.form.categoryId,name:t.form.name,content:t.form.content};t.cuwCreate(i)}})},handleEdit:function(t,e){this.isEdit=!0,this.form.id=e.id,this.form.name=e.name,this.form.content=e.content,this.addCuwDialogVisible=!0},handleDelete:function(t,e){var n=this;console.log(t,e),this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.cuwDelete(e.id)}).catch(function(){})}}),created:function(){this.getCategories(),this.getCuws()}},zl={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-cuw-admin"}},[n("el-row",[n("el-col",{attrs:{span:5,id:"left-col"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"15px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:function(e){t.gotoHelpdoc()}}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left","margin-bottom":"15px"},attrs:{size:"mini",type:"success"},on:{click:t.addCuw}},[t._v("添加常用语")]),t._v(" "),n("el-input",{attrs:{size:"mini",placeholder:"搜索类别"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),n("el-tree",{ref:"cateTree",staticClass:"filter-tree",attrs:{"empty-text":t.emptyText,data:t.companyCuwCategories,props:t.defaultProps,"filter-node-method":t.filterNode},on:{"node-click":t.handleNodeClick}}),t._v(" "),n("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.addCategory}},[t._v("添加")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",disabled:t.editButtonDisabled},on:{click:t.editCategory}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger",disabled:t.deleteButtonDisabled},on:{click:t.removeCategory}},[t._v("删除")])],1),t._v(" "),n("el-col",{attrs:{span:19,id:"right-col"}},[n("el-table",{staticStyle:{width:"100%","text-align":"left"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.companyCuws}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"标题"}}),t._v(" "),n("el-table-column",{attrs:{prop:"content",label:"内容"}}),t._v(" "),n("el-table-column",{attrs:{prop:"count",label:"使用次数",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"添加常用语",visible:t.addCuwDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.addCuwDialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"标题",prop:"name"}},[n("el-input",{attrs:{placeholder:"标题"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"内容",prop:"content"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:20}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),t.isEdit?t._e():n("el-form-item",{attrs:{label:"所属分类",prop:"categoryId"}},[1===t.companyCuwCategories.length?n("span",[t._v("请首先创建分类")]):t._e(),t._v(" "),n("el-radio-group",{model:{value:t.form.categoryId,callback:function(e){t.$set(t.form,"categoryId",e)},expression:"form.categoryId"}},t._l(t.companyCuwCategories,function(e){return e.id>0?n("el-radio",{key:e.id,attrs:{label:e.id}},[t._v("\n            "+t._s(e.name)+"\n          ")]):t._e()}))],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.addCuwDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.doAddCuw()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Fl=n("VU/8")(Bl,zl,!1,function(t){n("0vYT")},"data-v-3e8cf588",null).exports,$l={name:"bd-preference-admin",data:function(){return{form:{notification:!1},electron:u.IS_ELECTRON}},computed:Ii()({},Object(c.c)([])),methods:Ii()({},Object(c.b)([]),{onChange:function(t){console.log("开启",t),t&&this.requestNotification()},handleNotificationSwitchChange:function(t){console.log(t),window.Notification?"granted"===Notification.permission?this.showNotification(t):(Notification.permission,this.requestNotification()):alert("浏览器不支持消息通知")},showNotification:function(t){var e="";e=t?"开启通知":"关闭通知";var n=new Notification("通知",{body:e,icon:u.ICON_URL});n.onshow=function(){console.log("Notification shown")},n.onclick=function(){console.log("notification click")},n.onclose=function(){console.log("notification close")},n.onerror=function(){console.log("notification error")}},requestNotification:function(){window.Notification&&"granted"!==Notification.permission&&Notification.requestPermission(function(t){})}})},Wl={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-preference-admin"}},[n("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{model:t.form,"label-width":"80px"}},[t.electron?t._e():n("el-form-item",{attrs:{label:"消息通知"}},[n("el-switch",{attrs:{"active-text":"开启","inactive-text":"关闭"},on:{change:t.onChange},model:{value:t.form.notification,callback:function(e){t.$set(t.form,"notification",e)},expression:"form.notification"}}),t._v(" "),n("span",{staticStyle:{"font-size":"10px",color:"gray","margin-left":"20px"}},[t._v("提示：窗口左上角会弹出提示框，请点击允许")])],1)],1)],1)},staticRenderFns:[]};var Hl=n("VU/8")($l,Wl,!1,function(t){n("F34l")},"data-v-02238142",null).exports,Yl={name:"bd-filter-admin",data:function(){return{pageSize:20,currentPage:1,isEdit:!1,dialogVisible:!1,synonymIndex:0,tableData:[],form:{tid:"",standard:"",synonyms:[{id:0,synonym:""}]},myTaboos:[{id:0,synonym:""}],rules:{standard:[{required:!0,message:"请输入标准词",trigger:"blur"}],synonym:[{required:!0,message:"请输入相似词",trigger:"blur"}]}}},computed:Ii()({},Object(c.c)(["taboos"])),methods:Ii()({},Object(c.b)(["getTaboos","createTaboo","updateTaboo","deleteTaboo"]),{handleSizeChange:function(t){console.log(t),this.pageSize=t},handleCurrentChange:function(t){console.log(t),this.currentPage=t},addTaboos:function(){this.synonymIndex++,this.myTaboos.push({id:this.synonymIndex,synonym:""})},removeSynonym:function(t){for(var e=0;e<this.myTaboos.length;e++){this.myTaboos[e].id===t&&this.myTaboos.splice(e,1)}},transformSynonyms:function(){for(var t=[],e=0;e<this.myTaboos.length;e++){var n=this.myTaboos[e];t.push(n.synonym)}this.form.synonyms=t},addTaboo:function(){this.isEdit=!1,this.form.tid="",this.form.standard="",this.myTaboos=[{id:0,synonym:""}],this.dialogVisible=!0},doAddTaboo:function(){var t=this;this.transformSynonyms(),this.$refs.form.validate(function(e){if(!e)return!1;t.dialogVisible=!1,t.isEdit?t.updateTaboo(t.form):t.createTaboo(t.form)})},handleEdit:function(t,e){console.log(t,e),this.isEdit=!0,this.myTaboos=[],this.form.tid=e.tid,this.form.standard=e.standard;for(var n=0;n<e.synonyms.length;n++){var i=e.synonyms[n];this.synonymIndex=n,this.myTaboos.push({id:n,synonym:i.standard})}this.dialogVisible=!0},handleDelete:function(t,e){var n=this;console.log(t,e),this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.deleteTaboo(e.tid)}).catch(function(){})}}),created:function(){this.getTaboos({page:0,size:20})}},jl={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bd-filter-admin"}},[n("div",{staticStyle:{"padding-top":"5px",height:"calc(100% - 10px)"}},[n("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""}},[t._v("帮助文档")]),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"success"},on:{click:t.addTaboo}},[t._v("添加敏感词")]),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.taboos.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",height:"calc(100% - 80px)",data:t.taboos.content}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"standard",label:"词语"}}),t._v(" "),n("el-table-column",{attrs:{prop:"taboos",label:"相似词"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.taboos,function(i,o){return n("span",{key:i.id},[t._v("\n            "+t._s(i.standard)+" "),o<e.row.taboos.length-1?n("span",[t._v(",")]):t._e()])})}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.taboos.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"添加敏感词",visible:t.dialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"标准词",prop:"standard"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:t.form.standard,callback:function(e){t.$set(t.form,"standard",e)},expression:"form.standard"}})],1),t._v(" "),t._l(t.myTaboos,function(e,i){return n("el-form-item",{key:e.id,attrs:{label:"相似词"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:e.synonym,callback:function(n){t.$set(e,"synonym",n)},expression:"synonym.synonym"}}),t._v(" "),i>0?n("el-button",{on:{click:function(n){n.preventDefault(),t.removeSynonym(e.id)}}},[t._v("删除")]):t._e(),t._v(" "),0===i?n("el-button",{on:{click:function(e){e.preventDefault(),t.addTaboos()}}},[t._v("添加")]):t._e()],1)})],2),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.doAddTaboo()}}},[t._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var ql=n("VU/8")(Yl,jl,!1,function(t){n("EA9o")},"data-v-6d29a580",null).exports,Ql={name:"bd-notfound",components:{CmHeader:vi},data:function(){return{}}},Kl={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"text-align":"center"},attrs:{id:"bd-notfound"}},[e("el-header",[e("cm-header")],1),this._v(" "),e("el-main",[e("el-row",[e("el-col",{attrs:{span:6,id:"left-col"}},[e("div",{staticClass:"grid-content"})]),this._v(" "),e("el-col",{attrs:{span:12,id:"middle-col"}},[e("div",[e("h1",[this._v("404，未找到相关页面")])])]),this._v(" "),e("el-col",{attrs:{span:6,id:"right-col"}},[e("div",{staticClass:"grid-content"})])],1)],1)],1)},staticRenderFns:[]};var Xl=n("VU/8")(Ql,Kl,!1,function(t){n("WFr4")},"data-v-723c2798",null).exports;function Jl(t,e,n){_i.getters.connected?n({path:"/admin",query:{redirect:t.fullPath}}):n()}a.default.use(l.a);var Zl=new l.a({routes:[{path:"/",component:Ci,children:[{path:"",component:Bi,beforeEnter:Jl,meta:{title:"登录 - "+u.DEFAULT_TITLE}},{path:"login",name:"login",component:Bi,beforeEnter:Jl,meta:{title:"登录 - "+u.DEFAULT_TITLE}},{path:"register",name:"register",component:$i,beforeEnter:Jl,meta:{title:"注册 - "+u.DEFAULT_TITLE}},{path:"forget",name:"forget",component:Yi,beforeEnter:Jl,meta:{title:"找回密码 - "+u.DEFAULT_TITLE}},{path:"/logout",name:"logout",beforeEnter:function(t,e,n){_i.dispatch("logout").then(function(){console.log("go to login page"),n("/login")})}}]},{path:"/admin",component:Vi,beforeEnter:function(t,e,n){_i.getters.connected?n():n({path:"/login",query:{redirect:t.fullPath}})},children:[{path:"",component:ba,meta:{title:"人工客服 - "+u.DEFAULT_TITLE}},{path:"home",name:"home",component:qi,meta:{title:"我的首页 - "+u.DEFAULT_TITLE}},{path:"statistic",name:"statistic",component:Ya,meta:{title:"绩效数据 - "+u.DEFAULT_TITLE}},{path:"chat",name:"chat",component:ba,meta:{title:"人工客服 - "+u.DEFAULT_TITLE}},{path:"robot",name:"robot",component:Na,meta:{title:"智能客服 - "+u.DEFAULT_TITLE}},{path:"support",name:"support",component:br,meta:{title:"知识库-帮助中心 - "+u.DEFAULT_TITLE}},{path:"feedback",name:"feedback",component:nr,meta:{title:"意见反馈 - "+u.DEFAULT_TITLE}},{path:"ticket",name:"ticket",component:xr,meta:{title:"工单系统 - "+u.DEFAULT_TITLE}},{path:"callcenter",name:"callcenter",component:Mr,meta:{title:"呼叫中心 - "+u.DEFAULT_TITLE}},{path:"crm",name:"crm",component:Br,meta:{title:"客户管理 - "+u.DEFAULT_TITLE}},{path:"community",name:"community",component:_s,meta:{title:"讨论社区 - "+u.DEFAULT_TITLE}},{path:"wenjuan",name:"wenjuan",component:jr,meta:{title:"调查问卷 - "+u.DEFAULT_TITLE}},{path:"internal",name:"internal",component:cs,meta:{title:"内部协同 - "+u.DEFAULT_TITLE}},{path:"imcloud",name:"imcloud",component:ds,meta:{title:"云通讯 - "+u.DEFAULT_TITLE}},{path:"conference",name:"conference",component:bs,meta:{title:"视频会议 - "+u.DEFAULT_TITLE}},{path:"everyone",name:"everyone",component:gs,meta:{title:"人人客服 - "+u.DEFAULT_TITLE}},{path:"knowledge",name:"knowledge",component:Cs,meta:{title:"知识库 - "+u.DEFAULT_TITLE}},{path:"other",name:"other",component:Ds,meta:{title:"其他功能 - "+u.DEFAULT_TITLE}},{path:"setting",component:Gs,children:[{path:"",component:zs,meta:{title:"个人资料 - "+u.DEFAULT_TITLE}},{path:"app",component:cl,meta:{title:"应用管理 - "+u.DEFAULT_TITLE}},{path:"agent",component:kl,meta:{title:"客服管理 - "+u.DEFAULT_TITLE}},{path:"internal",component:Vl,meta:{title:"协同管理 - "+u.DEFAULT_TITLE}},{path:"robot",component:Ll,meta:{title:"智能客服 - "+u.DEFAULT_TITLE}},{path:"cuw",component:Fl,meta:{title:" 常用语管理 - "+u.DEFAULT_TITLE}},{path:"taboo",component:ql,meta:{title:" 敏感词管理 - "+u.DEFAULT_TITLE}},{path:"profile",component:zs,meta:{title:"个人资料 - "+u.DEFAULT_TITLE}},{path:"pay",component:dl,meta:{title:"费用明细 - "+u.DEFAULT_TITLE}},{path:"preference",component:Hl,meta:{title:"常用设置 - "+u.DEFAULT_TITLE}}]}]},{path:"*",component:Xl}],scrollBehavior:function(t,e,n){}});Zl.beforeEach(function(t,e,n){t.meta.title&&(document.title=t.meta.title),n()});var tc=Zl,ec=n("zL8q"),nc=n.n(ec),ic=(n("tvR6"),n("OS1Z")),oc=n.n(ic),ac=(n("pw1w"),n("4qOc"),n("XLwt")),rc=n.n(ac);a.default.prototype.$echarts=rc.a,a.default.use(nc.a),a.default.use(oc.a),a.default.config.productionTip=u.IS_PRODUCTION,new a.default({el:"#app",router:tc,store:_i,components:{App:s},template:"<App/>"})},NgMn:function(t,e){},O42R:function(t,e){},ODqe:function(t,e){},OoIy:function(t,e){},OxZE:function(t,e){},POmt:function(t,e){},PSoF:function(t,e){},QTVx:function(t,e){},QpaG:function(t,e){},R5hJ:function(t,e){},RNpa:function(t,e){},TgUw:function(t,e){},WBj9:function(t,e){},WFr4:function(t,e){},WQai:function(t,e){},"XI/4":function(t,e){},Y6ns:function(t,e){},YjuF:function(t,e){},Yt5g:function(t,e){},ZKXY:function(t,e){},Zszx:function(t,e){},a2dB:function(t,e){},aNIV:function(t,e){},awD8:function(t,e){},axo7:function(t,e){},bsQx:function(t,e){},bzJe:function(t,e){},cF37:function(t,e){},coUW:function(t,e){},"d/iS":function(t,e){},e9Ws:function(t,e){},eHPN:function(t,e){t.exports={HTTP_CLIENT:"web",IS_ELECTRON:!1,IS_PRODUCTION:!0,IS_PRIVATE_SERVER:!1,PRIVATE_SERVER_UID:"",IS_DAXUEZHANG:!1,IS_IP:!1,HTTP_PREFIX:"https://",SHOW_STATISTIC:!0,SHOW_SUPPORT:!0,SHOW_FEEDBACK:!0,ADMIN_URL:"/admin#/admin",LOGIN_URL:"/admin#/login",CHAT_BASE_URL:"/chat",ADMIN_BASE_URL:"https://www.bytedesk.com/admin#",HOME_URL:"https://www.bytedesk.com",HELP_URL:"https://support.bytedesk.com/support?uid=201808221551193",HELP_BASE_URL:"https://support.bytedesk.com/support/article?uid=201808221551193&aid=",SOCKJS_WEBSOCKET_ENDPOINT:"https://stomp.bytedesk.com/stomp/?access_token=",WECHAT_OPEN_PLATFORM_REDIRECT_URI:"https://wechat.bytedesk.com/redirect/",PRIVATE_SERVER_VALIDATE_URL:"https://api.bytedesk.com/visitor/api/server/validate",AXIOS_DEFAULT_BASEURL:"/",SHOW_IM:!0,UPLOAD_AVATAR_URL:"https://upload.bytedesk.com/visitor/api/upload/avatar",UPLOAD_IMAGE_URL:"https://upload.bytedesk.com/visitor/api/upload/image",UPLOAD_FILE_URL:"https://upload.bytedesk.com/visitor/api/upload/file",UPLOAD_LAYIM_IMAGE_URL:"https://upload.bytedesk.com/visitor/api/upload/layim/image",UPLOAD_LAYIM_FILE_URL:"https://upload.bytedesk.com/visitor/api/upload/layim/file",UPLOAD_WECHAT_IMAGE_URL:"https://upload.bytedesk.com/visitor/api/upload/wechat/image",UPLOAD_WECHAT_VOICE_URL:"https://upload.bytedesk.com/visitor/api/upload/wechat/voice",UPLOAD_WECHAT_VIDEO_URL:"https://upload.bytedesk.com/visitor/api/upload/wechat/video",UPLOAD_WECHAT_THUMB_URL:"https://upload.bytedesk.com/visitor/api/upload/wechat/thumb"}},eWUn:function(t,e){},eajV:function(t,e){t.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors:["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.28",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=0.10.0"},dependencies:{debug:"^2.2.0",nan:"^2.11.0","typedarray-to-buffer":"^3.1.5",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config:{verbose:!1},scripts:{install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}},f9UJ:function(t,e){},ftov:function(t,e){},fxMK:function(t,e){},"gZ/o":function(t,e){},gbdC:function(t,e){},gbzW:function(t,e){},hEA6:function(t,e){},hKkn:function(t,e){},iD6w:function(t,e){},idss:function(t,e){},j1bk:function(t,e){},jCew:function(t,e){},"jNd/":function(t,e){},ksHO:function(t,e){},"l+Ea":function(t,e){},lLcd:function(t,e){},lk0g:function(t,e){},mv98:function(t,e){},nC55:function(t,e){},nKFQ:function(t,e){},oCSg:function(t,e){},pw1w:function(t,e){},qpsY:function(t,e){},qrgt:function(t,e){},"r+q8":function(t,e){},raDJ:function(t,e){},raDe:function(t,e){},rf0v:function(t,e){},sPYx:function(t,e){},sc2Y:function(t,e){},szfx:function(t,e){},szx3:function(t,e){},taYw:function(t,e){},tf6n:function(t,e){},tvR6:function(t,e){},uJpJ:function(t,e){},usen:function(t,e){},uslO:function(t,e,n){var i={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function o(t){return n(a(t))}function a(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}o.keys=function(){return Object.keys(i)},o.resolve=a,t.exports=o,o.id="uslO"},v1BW:function(t,e){},wAVE:function(t,e){},wnAD:function(t,e){},wtb4:function(t,e){},"x20+":function(t,e){},y2K1:function(t,e){},ydiG:function(t,e,n){window.axios=n("mtWM"),window._=n("M4fF"),window.StompJS=n("AIgo"),window.SockJS=n("O3w4"),window.moment=n("PJh5")},zM5E:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c51e292c6d3946fb9f03.js.map