var HomePage = {
    playVideosOnScroll: {
        testForVideo: function() {
            $("video").each(function() {
                var a = $(this),
                    b = a.offset().top,
                    c = b + a.outerHeight(),
                    d = $(window).scrollTop(),
                    e = d + window.innerHeight;
                c < d || b > e ? a.removeClass("js-played") : a.hasClass("js-played") || (a[0].currentTime = 0, a[0].play(), a.addClass("js-played"))
            })
        },
        init: function() {
            var a = this;
            $(window).on("scroll resize", webutils.throttle(a.testForVideo, 100))
        }
    },
    responsiveVideos: {
        useVideoSource: function(a) {
            a.each(function() {
                $(this).attr("src", $(this).attr("data-src")).removeAttr("data-src"),
                    $(this).parent()[0].load()
            })
        },
        init: function() {
            window.devicePixelRatio > 1 ? this.useVideoSource($("source.retina")) : this.useVideoSource($("source.default"))
        }
    },
    floatingPromo: {
        injectPromoLocation: function(a) {
            var b = a.clone().removeClass("small-only").addClass("medium-up");
            return $('<div class="home"></div>').insertBefore(".global-header").append(b),
                $(".floating-promo")
        },
        init: function() {
            var a = this,
                b = $(".floating-promo");
            0 !== b.length && ("true" !== cookieUtils.searchForCookie("homepage-promo-hidden") && b.removeClass("hide"), b = a.injectPromoLocation(b), b.children(".close").on("click",
                function() {
                    b.addClass("hide"),
                        $.cookie("homepage-promo-hidden", !0, {
                            expires: 1
                        })
                }))
        }
    },
    init: function() {
        webutils.lockTopNavigation(),
        this.floatingPromo.init(),
        this.playVideosOnScroll.init(),
        this.responsiveVideos.init()
    }
};
HomePage.init();